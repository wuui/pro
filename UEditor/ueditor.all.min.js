/*
 UEditor
 version: ueditor
 build: Tue Jul 25 2017 13:43:26 GMT+0800 (CST)
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(A,G,r){if(null==A)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(G instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return A+""};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(A,G,r){A!=Array.prototype&&A!=Object.prototype&&(A[G]=r.value)};
$jscomp.getGlobal=function(A){return"undefined"!=typeof window&&window===A?A:"undefined"!=typeof global&&null!=global?global:A};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(A,G,r,E){if(G){r=$jscomp.global;A=A.split(".");for(E=0;E<A.length-1;E++){var t=A[E];t in r||(r[t]={});r=r[t]}A=A[A.length-1];E=r[A];G=G(E);G!=E&&null!=G&&$jscomp.defineProperty(r,A,{configurable:!0,writable:!0,value:G})}};
$jscomp.polyfill("String.prototype.repeat",function(A){return A?A:function(A){var r=$jscomp.checkStringArgs(this,null,"repeat");if(0>A||1342177279<A)throw new RangeError("Invalid count value");A|=0;for(var E="";A;)if(A&1&&(E+=r),A>>>=1)r+=r;return E}},"es6-impl","es3");
(function(){function A(g,a,d){var b;a=a.toLowerCase();return(b=g.__allListeners||d&&(g.__allListeners={}))&&(b[a]||d&&(b[a]=[]))}function G(g,a,d,b,f,k){b=b&&g[a];var h;for(!b&&(b=g[d]);!b&&(h=(h||g).parentNode);){if("BODY"==h.tagName||k&&!k(h))return null;b=h[d]}return b&&f&&!f(b)?G(b,a,d,!1,f):b}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var r=window.baidu||{};window.baidu=r;window.UE=r.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";
var E=UE.dom={},t=UE.browser=function(){var g=navigator.userAgent.toLowerCase(),a=window.opera,d={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(g),opera:!!a&&a.version,webkit:-1<g.indexOf(" applewebkit/"),mac:-1<g.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};d.gecko="Gecko"==navigator.product&&!d.webkit&&!d.opera&&!d.ie;var b=0;if(d.ie){var b=g.match(/(?:msie\s([\w.]+))/),f=g.match(/(?:trident.*rv:([\w.]+))/),b=b&&f&&b[1]&&f[1]?Math.max(1*b[1],1*f[1]):b&&b[1]?1*b[1]:f&&f[1]?1*f[1]:0;d.ie11Compat=
11==document.documentMode;d.ie9Compat=9==document.documentMode;d.ie8=!!document.documentMode;d.ie8Compat=8==document.documentMode;d.ie7Compat=7==b&&!document.documentMode||7==document.documentMode;d.ie6Compat=7>b||d.quirks;d.ie9above=8<b;d.ie9below=9>b;d.ie11above=10<b;d.ie11below=11>b}d.gecko&&(f=g.match(/rv:([\d\.]+)/))&&(f=f[1].split("."),b=1E4*f[0]+100*(f[1]||0)+1*(f[2]||0));/chrome\/(\d+\.\d)/i.test(g)&&(d.chrome=+RegExp.$1);/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(g)&&!/chrome/i.test(g)&&
(d.safari=+(RegExp.$1||RegExp.$2));d.opera&&(b=parseFloat(a.version()));d.webkit&&(b=parseFloat(g.match(/ applewebkit\/(\d+)/)[1]));d.version=b;d.isCompatible=!d.mobile&&(d.ie&&6<=b||d.gecko&&10801<=b||d.opera&&9.5<=b||d.air&&1<=b||d.webkit&&522<=b||!1);return d}(),I=t.ie,la=t.opera,n=UE.utils={each:function(g,a,d){if(null!=g)if(g.length===+g.length)for(var b=0,f=g.length;b<f;b++){if(!1===a.call(d,g[b],b,g))return!1}else for(b in g)if(g.hasOwnProperty(b)&&!1===a.call(d,g[b],b,g))return!1},makeInstance:function(g){var a=
new Function;a.prototype=g;g=new a;a.prototype=null;return g},extend:function(g,a,d){if(a)for(var b in a)d&&g.hasOwnProperty(b)||(g[b]=a[b]);return g},extend2:function(g){for(var a=arguments,d=1;d<a.length;d++){var b=a[d],f;for(f in b)g.hasOwnProperty(f)||(g[f]=b[f])}return g},inherits:function(g,a){var d=g.prototype,b=n.makeInstance(a.prototype);n.extend(b,d,!0);g.prototype=b;return b.constructor=g},bind:function(g,a){return function(){return g.apply(a,arguments)}},defer:function(g,a,d){var b;return function(){d&&
clearTimeout(b);b=setTimeout(g,a)}},indexOf:function(g,a,d){var b=-1;d=this.isNumber(d)?d:0;this.each(g,function(f,k){if(k>=d&&f===a)return b=k,!1});return b},removeItem:function(g,a){for(var d=0,b=g.length;d<b;d++)g[d]===a&&(g.splice(d,1),d--)},trim:function(g){return g.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(g){if(!g)return{};g=n.isArray(g)?g:g.split(",");for(var a=0,d,b={};d=g[a++];)b[d.toUpperCase()]=b[d]=1;return b},unhtml:function(g,a){return g?g.replace(a||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,
function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(g){return g?g.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[a]}):""},cssStyleToDomStyle:function(){var g=document.createElement("div").style,a={"float":void 0!=g.cssFloat?"cssFloat":void 0!=g.styleFloat?"styleFloat":"float"};return function(d){return a[d]||(a[d]=d.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),
loadFile:function(){function g(d,b){try{for(var f=0,k;k=a[f++];)if(k.doc===d&&k.url==(b.src||b.href))return k}catch(h){return null}}var a=[];return function(d,b,f){var k=g(d,b);if(k)k.ready?f&&f():k.funs.push(f);else if(a.push({doc:d,url:b.src||b.href,funs:[f]}),!d.body){f=[];for(var h in b)"tag"!=h&&f.push(h+'="'+b[h]+'"');d.write("<"+b.tag+" "+f.join(" ")+" ></"+b.tag+">")}else if(!b.id||!d.getElementById(b.id)){var c=d.createElement(b.tag);delete b.tag;for(h in b)c.setAttribute(h,b[h]);c.onload=
c.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){k=g(d,b);if(0<k.funs.length){k.ready=1;for(var a;a=k.funs.pop();)a()}c.onload=c.onreadystatechange=null}};c.onerror=function(){throw Error("The load "+(b.href||b.src)+" fails,check the url settings of file ueditor.config.js ");};d.getElementsByTagName("head")[0].appendChild(c)}}}(),isEmptyObject:function(g){if(null==g)return!0;if(this.isArray(g)||this.isString(g))return 0===g.length;for(var a in g)if(g.hasOwnProperty(a))return!1;
return!0},fixColor:function(g,a){if(/color/i.test(g)&&/rgba?/.test(a)){var d=a.split(",");if(3<d.length)return"";a="#";for(var b=0,f;f=d[b++];)f=parseInt(f.replace(/[^\d]/gi,""),10).toString(16),a+=1==f.length?"0"+f:f;a=a.toUpperCase()}return a},optCss:function(g){function a(a,b){if(!a)return"";var h=a.top,c=a.bottom,f=a.left,d=a.right,m="";if(h&&f&&c&&d)m+=";"+b+":"+(h==c&&c==f&&f==d?h:h==c&&f==d?h+" "+f:f==d?h+" "+f+" "+c:h+" "+d+" "+c+" "+f)+";";else for(var k in a)m+=";"+b+"-"+k+":"+a[k]+";";
return m}var d,b;g=g.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,k,h,c){if(1==c.split(" ").length)switch(k){case "padding":return!d&&(d={}),d[h]=c,"";case "margin":return!b&&(b={}),b[h]=c,"";case "border":return"initial"==c?"":a}return a});g+=a(d,"padding")+a(b,"margin");return g.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},clone:function(g,a){a=a||{};for(var d in g)if(g.hasOwnProperty(d)){var b=
g[d];"object"==typeof b?(a[d]=n.isArray(b)?[]:{},n.clone(g[d],a[d])):a[d]=b}return a},transUnitToPx:function(g){if(!/(pt|cm)/.test(g))return g;var a;g.replace(/([\d.]+)(\w+)/,function(d,b,f){g=b;a=f});switch(a){case "cm":g=25*parseFloat(g);break;case "pt":g=Math.round(96*parseFloat(g)/72)}return g+(g?"px":"")},domReady:function(){function g(d){for(d.isReady=!0;d=a.pop();d());}var a=[];return function(d,b){b=b||window;var f=b.document;d&&a.push(d);"complete"===f.readyState?g(f):(f.isReady&&g(f),t.ie&&
11!=t.version?(function(){if(!f.isReady){try{f.documentElement.doScroll("left")}catch(k){setTimeout(arguments.callee,0);return}g(f)}}(),b.attachEvent("onload",function(){g(f)})):(f.addEventListener("DOMContentLoaded",function(){f.removeEventListener("DOMContentLoaded",arguments.callee,!1);g(f)},!1),b.addEventListener("load",function(){g(f)},!1)))}}(),cssRule:t.ie&&11!=t.version?function(g,a,d){if(void 0===a||a&&a.nodeType&&9==a.nodeType){d=a&&a.nodeType&&9==a.nodeType?a:d||document;var b=d.indexList||
(d.indexList={});var f=b[g];if(void 0!==f)return d.styleSheets[f].cssText}else{d=d||document;b=d.indexList||(d.indexList={});f=b[g];if(""===a)return void 0!==f?(d.styleSheets[f].cssText="",delete b[g],!0):!1;void 0!==f?sheetStyle=d.styleSheets[f]:(sheetStyle=d.createStyleSheet("",f=d.styleSheets.length),b[g]=f);sheetStyle.cssText=a}}:function(g,a,d){var b;if(void 0===a||a&&a.nodeType&&9==a.nodeType)return d=a&&a.nodeType&&9==a.nodeType?a:d||document,(b=d.getElementById(g))?b.innerHTML:void 0;d=d||
document;b=d.getElementById(g);if(""===a)return b?(b.parentNode.removeChild(b),!0):!1;b?b.innerHTML=a:(b=d.createElement("style"),b.id=g,b.innerHTML=a,d.getElementsByTagName("head")[0].appendChild(b))},sort:function(g,a){a=a||function(a,h){return a.localeCompare(h)};for(var d=0,b=g.length;d<b;d++)for(var f=d,k=g.length;f<k;f++)if(0<a(g[d],g[f])){var h=g[d];g[d]=g[f];g[f]=h}return g},serializeParam:function(g){var a=[],d;for(d in g)if("method"!=d&&"timeout"!=d&&"async"!=d)if("function"!=(typeof g[d]).toLowerCase()&&
"object"!=(typeof g[d]).toLowerCase())a.push(encodeURIComponent(d)+"="+encodeURIComponent(g[d]));else if(n.isArray(g[d]))for(var b=0;b<g[d].length;b++)a.push(encodeURIComponent(d)+"[]="+encodeURIComponent(g[d][b]));return a.join("&")},formatUrl:function(g){g=g.replace(/&&/g,"&");g=g.replace(/\?&/g,"?");g=g.replace(/&$/g,"");g=g.replace(/&#/g,"#");return g=g.replace(/&+/g,"&")},isCrossDomainUrl:function(g){var a=document.createElement("a");a.href=g;t.ie&&(a.href=a.href);return!(a.protocol==location.protocol&&
a.hostname==location.hostname&&(a.port==location.port||"80"==a.port&&""==location.port||""==a.port&&"80"==location.port))},clearEmptyAttrs:function(g){for(var a in g)""===g[a]&&delete g[a];return g},str2json:function(g){return n.isString(g)?window.JSON?JSON.parse(g):(new Function("return "+n.trim(g||"")))():null},json2str:function(){if(window.JSON)return JSON.stringify;var g=function(a){return 10>a?"0"+a:a},a=function(a){/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var f=d[a];
if(f)return f;f=a.charCodeAt();return"\\u00"+Math.floor(f/16).toString(16)+(f%16).toString(16)}));return'"'+a+'"'},d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(b){switch(typeof b){case "undefined":return"undefined";case "number":return isFinite(b)?String(b):"null";case "string":return a(b);case "boolean":return String(b);default:if(null===b)return"null";if(n.isArray(b)){var f=["["],d=b.length,h;for(h=0;h<d;h++){var c=b[h];switch(typeof c){case "undefined":case "function":case "unknown":break;
default:l&&f.push(",");f.push(n.json2str(c));var l=1}}f.push("]");return f.join("")}if(n.isDate(b))return'"'+b.getFullYear()+"-"+g(b.getMonth()+1)+"-"+g(b.getDate())+"T"+g(b.getHours())+":"+g(b.getMinutes())+":"+g(b.getSeconds())+'"';l=["{"];h=n.json2str;for(d in b)if(Object.prototype.hasOwnProperty.call(b,d))switch(c=b[d],typeof c){case "undefined":case "unknown":case "function":break;default:f&&l.push(","),f=1,l.push(h(d)+":"+h(c))}l.push("}");return l.join("")}}}()};n.each("String Function Array Number RegExp Object Date".split(" "),
function(g){UE.utils["is"+g]=function(a){return Object.prototype.toString.apply(a)=="[object "+g+"]"}});var aa=UE.EventBase=function(){};aa.prototype={addListener:function(g,a){g=n.trim(g).split(/\s+/);for(var d=0,b;b=g[d++];)A(this,b,!0).push(a)},on:function(g,a){return this.addListener(g,a)},off:function(g,a){return this.removeListener(g,a)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(g,a){g=n.trim(g).split(/\s+/);for(var d=0,b;b=g[d++];)n.removeItem(A(this,
b)||[],a)},fireEvent:function(){for(var g,a=arguments[0],a=n.trim(a).split(" "),d=0,b;b=a[d++];){var f=A(this,b),k;if(f)for(k=f.length;k--;)if(f[k]){var h=f[k].apply(this,arguments);if(!0===h)return h;void 0!==h&&(g=h)}if(h=this["on"+b.toLowerCase()])g=h.apply(this,arguments)}return g}};var z=E.dtd=function(){function g(a){for(var h in a)a[h.toUpperCase()]=a[h];return a}var a=n.extend2,d=g({isindex:1,fieldset:1}),b=g({input:1,button:1,select:1,textarea:1,label:1}),f=a(g({a:1}),b),k=a({iframe:1},f),
h=g({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),c=g({ins:1,del:1,script:1,style:1}),l=a(g({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),c),p=a(g({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),l),m=a(g({p:1}),p),b=a(g({iframe:1}),p,b),p=g({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,
button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),e=a(g({a:0}),b),u=g({tr:1}),w=g({"#":1}),x=a(g({param:1}),p),v=a(g({form:1}),d,k,h,m),
H=g({li:1,ol:1,ul:1}),D=g({style:1,script:1}),ba=g({base:1,link:1,meta:1,title:1}),D=a(ba,D),W=g({head:1,body:1}),da=g({html:1}),r=g({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),t=g({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return g({$nonBodyContent:a(da,W,ba),$block:r,$inline:e,
$inlineWithA:a(g({a:1}),e),$body:a(g({script:1,style:1}),r),$cdata:g({script:1,style:1}),$empty:t,$nonChild:g({iframe:1,textarea:1}),$listItem:g({dd:1,dt:1,li:1}),$list:g({ul:1,ol:1,dl:1}),$isNotEmpty:g({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:g({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,
strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:g({p:1,div:1}),$tableContent:g({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:g({pre:1,script:1,style:1,textarea:1}),html:W,head:D,style:w,script:w,body:v,base:{},link:{},meta:{},title:w,col:{},tr:g({td:1,th:1}),img:{},embed:{},colgroup:g({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:v,td:v,br:{},th:v,center:v,kbd:e,button:a(m,h),basefont:{},h5:e,h4:e,samp:e,h6:e,ol:H,h1:e,h3:e,option:w,h2:e,
form:a(d,k,h,m),select:g({optgroup:1,option:1}),font:e,ins:e,menu:H,abbr:e,label:e,table:g({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:e,tfoot:u,cite:e,li:v,input:{},iframe:v,strong:e,textarea:w,noframes:v,big:e,small:e,span:g({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:e,dt:e,sub:e,optgroup:g({option:1}),param:{},bdo:e,"var":e,div:v,object:x,sup:e,dd:v,strike:e,area:{},dir:H,map:a(g({area:1,form:1,p:1}),d,c,h),applet:x,dl:g({dt:1,dd:1}),del:e,isindex:{},
fieldset:a(g({legend:1}),p),thead:u,ul:H,acronym:e,b:e,a:a(g({a:1}),b),blockquote:a(g({td:1,tr:1,tbody:1,li:1}),v),caption:e,i:e,u:e,tbody:u,s:e,address:a(k,m),tt:e,legend:e,q:e,pre:a(l,f),p:a(g({a:1}),e),em:e,dfn:e})}(),ea=I&&9>t.version?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},
ma=n.listToMap("-webkit-box -moz-box block list-item table table-row-group table-header-group table-footer-group table-row table-column-group table-column table-cell table-caption".split(" ")),e=E.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:I&&"6"==t.version?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,
38:1,39:1,40:1,13:1},getPosition:function(e,a){if(e===a)return 0;var d,b=[e],f=[a];for(d=e;d=d.parentNode;){if(d===a)return 10;b.push(d)}for(d=a;d=d.parentNode;){if(d===e)return 20;f.push(d)}b.reverse();f.reverse();if(b[0]!==f[0])return 1;for(d=-1;d++,b[d]===f[d];);e=b[d];for(a=f[d];e=e.nextSibling;)if(e===a)return 4;return 2},getNodeIndex:function(e,a){for(var d=e,b=0;d=d.previousSibling;)a&&3==d.nodeType?d.nodeType!=d.nextSibling.nodeType&&b++:b++;return b},inDoc:function(g,a){return 10==e.getPosition(g,
a)},findParent:function(g,a,d){if(g&&!e.isBody(g))for(g=d?g:g.parentNode;g;){if(!a||a(g)||e.isBody(g))return a&&!a(g)&&e.isBody(g)?null:g;g=g.parentNode}return null},findParentByTagName:function(g,a,d,b){a=n.listToMap(n.isArray(a)?a:[a]);return e.findParent(g,function(f){return a[f.tagName]&&!(b&&b(f))},d)},findParents:function(g,a,d,b){for(a=a&&(d&&d(g)||!d)?[g]:[];g=e.findParent(g,d);)a.push(g);return b?a:a.reverse()},insertAfter:function(e,a){return e.nextSibling?e.parentNode.insertBefore(a,e.nextSibling):
e.parentNode.appendChild(a)},remove:function(e,a){var d=e.parentNode,b;if(d){if(a&&e.hasChildNodes())for(;b=e.firstChild;)d.insertBefore(b,e);d.removeChild(e)}return e},getNextDomNode:function(e,a,d,b){return G(e,"firstChild","nextSibling",a,d,b)},getPreDomNode:function(e,a,d,b){return G(e,"lastChild","previousSibling",a,d,b)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){e=e.ownerDocument||e;return e.defaultView||e.parentWindow},getCommonAncestor:function(e,
a){if(e===a)return e;for(var d=[e],b=[a],f=e,k=-1;f=f.parentNode;){if(f===a)return f;d.push(f)}for(f=a;f=f.parentNode;){if(f===e)return f;b.push(f)}d.reverse();for(b.reverse();k++,d[k]===b[k];);return 0==k?null:d[k-1]},clearEmptySibling:function(g,a,d){function b(a,b){for(var h;a&&!e.isBookmarkNode(a)&&(e.isEmptyInlineElement(a)||!(new RegExp("[^\t\n\r"+e.fillChar+"]")).test(a.nodeValue));)h=a[b],e.remove(a),a=h}!a&&b(g.nextSibling,"nextSibling");!d&&b(g.previousSibling,"previousSibling")},split:function(g,
a){var d=g.ownerDocument;if(t.ie&&a==g.nodeValue.length){var b=d.createTextNode("");return e.insertAfter(g,b)}b=g.splitText(a);t.ie8&&(d=d.createTextNode(""),e.insertAfter(b,d),e.remove(d));return b},isWhitespace:function(g){return!(new RegExp("[^ \t\n\r"+e.fillChar+"]")).test(g.nodeValue)},getXY:function(e){for(var a=0,d=0;e.offsetParent;)d+=e.offsetTop,a+=e.offsetLeft,e=e.offsetParent;return{x:a,y:d}},on:function(e,a,d){var b=n.isArray(a)?a:n.trim(a).split(/\s+/),f=b.length;if(f)for(;f--;)if(a=
b[f],e.addEventListener)e.addEventListener(a,d,!1);else{d._d||(d._d={els:[]});var k=a+d.toString(),h=n.indexOf(d._d.els,e);d._d[k]&&-1!=h||(-1==h&&d._d.els.push(e),d._d[k]||(d._d[k]=function(a){return d.call(a.srcElement,a||window.event)}),e.attachEvent("on"+a,d._d[k]))}e=null},un:function(e,a,d){var b=n.isArray(a)?a:n.trim(a).split(/\s+/),f=b.length;if(f)for(;f--;)if(a=b[f],e.removeEventListener)e.removeEventListener(a,d,!1);else{var k=a+d.toString();try{e.detachEvent("on"+a,d._d?d._d[k]:d)}catch(h){}d._d&&
d._d[k]&&(a=n.indexOf(d._d.els,e),-1!=a&&d._d.els.splice(a,1),0==d._d.els.length&&delete d._d[k])}},isSameElement:function(g,a){if(g.tagName!=a.tagName)return!1;var d=g.attributes,b=a.attributes;if(!I&&d.length!=b.length)return!1;for(var f,k,h=0,c=0,l=0;f=d[l++];){if("style"==f.nodeName)if(f.specified&&h++,e.isSameStyle(g,a))continue;else return!1;if(I)if(f.specified)h++,k=b.getNamedItem(f.nodeName);else continue;else k=a.attributes[f.nodeName];if(!k.specified||f.nodeValue!=k.nodeValue)return!1}if(I){for(l=
0;k=b[l++];)k.specified&&c++;if(h!=c)return!1}return!0},isSameStyle:function(e,a){var d=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),b=a.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(t.opera){d=e.style;b=a.style;if(d.length!=b.length)return!1;for(var f in d)if(!/^(\d+|csstext)$/i.test(f)&&d[f]!=b[f])return!1;return!0}if(!d||!b)return d==b;d=d.split(";");b=b.split(";");if(d.length!=b.length)return!1;f=0;for(var k;k=d[f++];)if(-1==n.indexOf(b,k))return!1;return!0},
isBlockElm:function(g){return 1==g.nodeType&&(z.$block[g.tagName]||ma[e.getComputedStyle(g,"display")])&&!z.$nonChild[g.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(g,a){var d=g,b=g;do{d=d.parentNode;if(k){var f=d.cloneNode(!1);f.appendChild(k);var k=f;f=d.cloneNode(!1);f.appendChild(h);var h=f}else k=d.cloneNode(!1),h=k.cloneNode(!1);for(;f=b.previousSibling;)k.insertBefore(f,k.firstChild);for(;f=b.nextSibling;)h.appendChild(f);b=d}while(a!==
d);f=a.parentNode;f.insertBefore(k,a);f.insertBefore(h,a);f.insertBefore(g,h);e.remove(a);return g},isEmptyInlineElement:function(g){if(1!=g.nodeType||!z.$removeEmpty[g.tagName])return 0;for(g=g.firstChild;g;){if(e.isBookmarkNode(g)||1==g.nodeType&&!e.isEmptyInlineElement(g)||3==g.nodeType&&!e.isWhitespace(g))return 0;g=g.nextSibling}return 1},trimWhiteTextNode:function(g){function a(a){for(var b;(b=g[a])&&3==b.nodeType&&e.isWhitespace(b);)g.removeChild(b)}a("firstChild");a("lastChild")},mergeChild:function(g,
a,d){a=e.getElementsByTagName(g,g.tagName.toLowerCase());for(var b=0,f;f=a[b++];)if(f.parentNode&&!e.isBookmarkNode(f))if("span"==f.tagName.toLowerCase()){if(g===f.parentNode&&(e.trimWhiteTextNode(g),1==g.childNodes.length)){g.style.cssText=f.style.cssText+";"+g.style.cssText;e.remove(f,!0);continue}f.style.cssText=g.style.cssText+";"+f.style.cssText;if(d){var k=d.style;if(k)for(var k=k.split(";"),h=0,c;c=k[h++];)f.style[n.cssStyleToDomStyle(c.split(":")[0])]=c.split(":")[1]}e.isSameStyle(f,g)&&e.remove(f,
!0)}else e.isSameElement(g,f)&&e.remove(f,!0)},getElementsByTagName:function(g,a,d){if(d&&n.isString(d)){var b=d;d=function(a){return e.hasClass(a,b)}}a=n.trim(a).replace(/[ ]{2,}/g," ").split(" ");for(var f=[],k=0,h;h=a[k++];){h=g.getElementsByTagName(h);for(var c=0,l;l=h[c++];)d&&!d(l)||f.push(l)}return f},mergeToParent:function(g){for(var a=g.parentNode;a&&z.$removeEmpty[a.tagName];){if(a.tagName==g.tagName||"A"==a.tagName){e.trimWhiteTextNode(a);if("SPAN"==a.tagName&&!e.isSameStyle(a,g)||"A"==
a.tagName&&"SPAN"==g.tagName)if(1<a.childNodes.length||a!==g.parentNode){g.style.cssText=a.style.cssText+";"+g.style.cssText;a=a.parentNode;continue}else a.style.cssText+=";"+g.style.cssText,"A"==a.tagName&&(a.style.textDecoration="underline");if("A"!=a.tagName){a===g.parentNode&&e.remove(g,!0);break}}a=a.parentNode}},mergeSibling:function(g,a,d){function b(a,b,h){var c;if((c=h[a])&&!e.isBookmarkNode(c)&&1==c.nodeType&&e.isSameElement(h,c)){for(;c.firstChild;)"firstChild"==b?h.insertBefore(c.lastChild,
h.firstChild):h.appendChild(c.firstChild);e.remove(c)}}!a&&b("previousSibling","firstChild",g);!d&&b("nextSibling","lastChild",g)},unSelectable:I&&t.ie9below||t.opera?function(e){e.onselectstart=function(){return!1};e.onclick=e.onkeyup=e.onkeydown=function(){return!1};e.unselectable="on";e.setAttribute("unselectable","on");for(var a=0,d;d=e.all[a++];)switch(d.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:d.unselectable="on",e.setAttribute("unselectable",
"on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,a){a=n.isArray(a)?a:n.trim(a).replace(/[ ]{2,}/g," ").split(" ");for(var d=0,b;b=a[d++];){b=ea[b]||b;switch(b){case "className":e[b]="";break;case "style":e.style.cssText="";var f=e.getAttributeNode("style");!t.ie&&f&&e.removeAttributeNode(f)}e.removeAttribute(b)}},createElement:function(g,a,d){return e.setAttributes(g.createElement(a),d)},setAttributes:function(e,
a){for(var d in a)if(a.hasOwnProperty(d)){var b=a[d];switch(d){case "class":e.className=b;break;case "style":e.style.cssText=e.style.cssText+";"+b;break;case "innerHTML":e[d]=b;break;case "value":e.value=b;break;default:e.setAttribute(ea[d]||d,b)}}return e},getComputedStyle:function(g,a){if(-1<"width height top left".indexOf(a))return g["offset"+a.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";3==g.nodeType&&(g=g.parentNode);if(t.ie&&9>t.version&&"font-size"==a&&!g.style.fontSize&&!z.$empty[g.tagName]&&
!z.$nonChild[g.tagName]){var d=g.ownerDocument.createElement("span");d.style.cssText="padding:0;border:0;font-family:simsun;";d.innerHTML=".";g.appendChild(d);var b=d.offsetHeight;g.removeChild(d);d=null;return b+"px"}try{d=e.getStyle(g,a)||(window.getComputedStyle?e.getWindow(g).getComputedStyle(g,"").getPropertyValue(a):(g.currentStyle||g.style)[n.cssStyleToDomStyle(a)])}catch(f){return""}return n.transUnitToPx(n.fixColor(a,d))},removeClasses:function(g,a){a=n.isArray(a)?a:n.trim(a).replace(/[ ]{2,}/g,
" ").split(" ");for(var d=0,b,f=g.className;b=a[d++];)f=f.replace(new RegExp("\\b"+b+"\\b"),"");(f=n.trim(f).replace(/[ ]{2,}/g," "))?g.className=f:e.removeAttributes(g,["class"])},addClass:function(e,a){if(e){a=n.trim(a).replace(/[ ]{2,}/g," ").split(" ");for(var d=0,b,f=e.className;b=a[d++];)(new RegExp("\\b"+b+"\\b")).test(f)||(f+=" "+b);e.className=n.trim(f)}},hasClass:function(e,a){if(n.isRegExp(a))return a.test(e.className);a=n.trim(a).replace(/[ ]{2,}/g," ").split(" ");for(var d=0,b,f=e.className;b=
a[d++];)if(!(new RegExp("\\b"+b+"\\b","i")).test(f))return!1;return d-1==a.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(g,a){t.ie?("color"==a&&(a="(^|;)"+a),g.style.cssText=g.style.cssText.replace(new RegExp(a+"[^:]*:[^;]+;?","ig"),"")):g.style.removeProperty?g.style.removeProperty(a):g.style.removeAttribute(n.cssStyleToDomStyle(a));g.style.cssText||e.removeAttributes(g,["style"])},getStyle:function(e,a){var d=e.style[n.cssStyleToDomStyle(a)];
return n.fixColor(a,d)},setStyle:function(e,a,d){e.style[n.cssStyleToDomStyle(a)]=d;n.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(g,a){for(var d in a)a.hasOwnProperty(d)&&e.setStyle(g,d,a[d])},removeDirtyAttr:function(e){for(var a=0,d,b=e.getElementsByTagName("*");d=b[a++];)d.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,a){var d=0,b=e.firstChild;for(a=a||function(){return 1};b;)a(b)&&d++,b=b.nextSibling;return d},isEmptyNode:function(g){return!g.firstChild||
0==e.getChildCount(g,function(a){return!e.isBr(a)&&!e.isBookmarkNode(a)&&!e.isWhitespace(a)})},clearSelectedArr:function(g){for(var a;a=g.pop();)e.removeAttributes(a,["class"])},scrollToView:function(g,a,d){var b=function(){var b=a.document,d="CSS1Compat"==b.compatMode;return{width:(d?b.documentElement.clientWidth:b.body.clientWidth)||0,height:(d?b.documentElement.clientHeight:b.body.clientHeight)||0}}().height;d=-1*b+d+(g.offsetHeight||0);g=e.getXY(g);d+=g.y;g=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||
0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}}(a).y;(d>g||d<g-b)&&a.scrollTo(0,d+(0>d?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(g,a){if(3!=g.nodeType)return!1;var d=g.nodeValue;return a?(new RegExp("^"+e.fillChar)).test(d):!d.replace(new RegExp(e.fillChar,"g"),"").length},isStartInblock:function(g){var a=g.cloneRange(),d=0,b=a.startContainer;if(1==b.nodeType&&
b.childNodes[a.startOffset])for(b=b.childNodes[a.startOffset],g=b.previousSibling;g&&e.isFillChar(g);)b=g,g=g.previousSibling;this.isFillChar(b,!0)&&1==a.startOffset&&(a.setStartBefore(b),b=a.startContainer);for(;b&&e.isFillChar(b);){var f=b;b=b.previousSibling}f&&(a.setStartBefore(f),b=a.startContainer);for(1==b.nodeType&&e.isEmptyNode(b)&&1==a.startOffset&&a.setStart(b,0).collapse(!0);!a.startOffset;){b=a.startContainer;if(e.isBlockElm(b)||e.isBody(b)){d=1;break}g=a.startContainer.previousSibling;
if(g){for(;g&&e.isFillChar(g);){var k=g;g=g.previousSibling}k?a.setStartBefore(k):a.setStartBefore(a.startContainer)}else a.setStartBefore(a.startContainer)}return d&&!e.isBody(a.startContainer)?1:0},isEmptyBlock:function(g,a){if(1!=g.nodeType)return 0;a=a||new RegExp("[ \u00a0\t\r\n"+e.fillChar+"]","g");if(0<g[t.ie?"innerText":"textContent"].replace(a,"").length)return 0;for(var d in z.$isNotEmpty)if(g.getElementsByTagName(d).length)return 0;return 1},setViewportOffset:function(e,a){var d=parseInt(e.style.left)|
0,b=parseInt(e.style.top)|0,f=e.getBoundingClientRect(),k=a.left-f.left,f=a.top-f.top;k&&(e.style.left=d+k+"px");f&&(e.style.top=b+f+"px")},fillNode:function(g,a){var d=t.ie?g.createTextNode(e.fillChar):g.createElement("br");a.innerHTML="";a.appendChild(d)},moveChild:function(e,a,d){for(;e.firstChild;)d&&a.firstChild?a.insertBefore(e.lastChild,a.firstChild):a.appendChild(e.firstChild)},hasNoAttributes:function(e){return t.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==
e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,a){return 1==e.nodeType&&(new RegExp("\\b"+e.tagName+"\\b","i")).test(a)},filterNodeList:function(e,a,d){var b=[];if(!n.isFunction(a)){var f=a;a=function(a){return-1!=n.indexOf(n.isArray(f)?f:f.split(" "),a.tagName.toLowerCase())}}n.each(e,function(f){a(f)&&b.push(f)});return 0==b.length?null:1!=b.length&&d?b:b[0]},isInNodeEndBoundary:function(e,a){var d=e.startContainer;if(3==d.nodeType&&e.startOffset!=d.nodeValue.length||1==d.nodeType&&
e.startOffset!=d.childNodes.length)return 0;for(;d!==a;){if(d.nextSibling)return 0;d=d.parentNode}return 1},isBoundaryNode:function(g,a){for(var d;!e.isBody(g);)if(d=g,g=g.parentNode,d!==g[a])return!1;return!0},fillHtml:t.ie11below?"&nbsp;":"<br/>"},R=new RegExp(e.fillChar,"g");(function(){function g(a){return!a.collapsed&&1==a.startContainer.nodeType&&a.startContainer===a.endContainer&&1==a.endOffset-a.startOffset}function a(a,h,b,c){1==h.nodeType&&(z.$empty[h.tagName]||z.$nonChild[h.tagName])&&
(b=e.getNodeIndex(h)+(a?0:1),h=h.parentNode);a?(c.startContainer=h,c.startOffset=b,c.endContainer||c.collapse(!0)):(c.endContainer=h,c.endOffset=b,c.startContainer||c.collapse(!1));c.collapsed=c.startContainer&&c.endContainer&&c.startContainer===c.endContainer&&c.startOffset==c.endOffset;return c}function d(a,h){var c=a.startContainer,b=a.endContainer,f=a.startOffset,l=a.endOffset,m=a.document,d=m.createDocumentFragment(),k,p;1==c.nodeType&&(c=c.childNodes[f]||(k=c.appendChild(m.createTextNode(""))));
1==b.nodeType&&(b=b.childNodes[l]||(p=b.appendChild(m.createTextNode(""))));if(c===b&&3==c.nodeType)return d.appendChild(m.createTextNode(c.substringData(f,l-f))),h&&(c.deleteData(f,l-f),a.collapse(!0)),d;for(var g,n,r=d,t=e.findParents(c,!0),z=e.findParents(b,!0),J=0;t[J]==z[J];)J++;for(var N=J,A;A=t[N];N++){g=A.nextSibling;A==c?k||(3==a.startContainer.nodeType?(r.appendChild(m.createTextNode(c.nodeValue.slice(f))),h&&c.deleteData(f,c.nodeValue.length-f)):r.appendChild(h?c:c.cloneNode(!0))):(n=A.cloneNode(!1),
r.appendChild(n));for(;g&&g!==b&&g!==z[N];)A=g.nextSibling,r.appendChild(h?g:g.cloneNode(!0)),g=A;r=n}r=d;t[J]||(r.appendChild(t[J-1].cloneNode(!1)),r=r.firstChild);for(N=J;f=z[N];N++){g=f.previousSibling;f==b?p||3!=a.endContainer.nodeType||(r.appendChild(m.createTextNode(b.substringData(0,l))),h&&b.deleteData(0,l)):(n=f.cloneNode(!1),r.appendChild(n));if(N!=J||!t[J])for(;g&&g!==c;)f=g.previousSibling,r.insertBefore(h?g:g.cloneNode(!0),r.firstChild),g=f;r=n}h&&a.setStartBefore(z[J]?t[J]?z[J]:t[J-
1]:z[J-1]).collapse(!0);k&&e.remove(k);p&&e.remove(p);return d}function b(a,h){try{if(c&&e.inDoc(c,a))if(c.nodeValue.replace(R,"").length)c.nodeValue=c.nodeValue.replace(R,"");else{var b=c.parentNode;for(e.remove(c);b&&e.isEmptyInlineElement(b)&&(t.safari?!(e.getPosition(b,h)&e.POSITION_CONTAINS):!b.contains(h));)c=b.parentNode,e.remove(b),b=c}}catch(u){}}function f(a,h){for(a=a[h];a&&e.isFillChar(a);){var c=a[h];e.remove(a);a=c}}var k=0,h=e.fillChar,c,l=E.Range=function(a){this.startContainer=this.startOffset=
this.endContainer=this.endOffset=null;this.document=a;this.collapsed=!0};l.prototype={cloneContents:function(){return this.collapsed?null:d(this,0)},deleteContents:function(){this.collapsed||d(this,1);if(t.webkit){var a=this.startContainer;3!=a.nodeType||a.nodeValue.length||(this.setStartBefore(a).collapse(!0),e.remove(a))}return this},extractContents:function(){return this.collapsed?null:d(this,2)},setStart:function(h,c){return a(!0,h,c,this)},setEnd:function(h,c){return a(!1,h,c,this)},setStartAfter:function(a){return this.setStart(a.parentNode,
e.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,e.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,e.getNodeIndex(a)+1)},setEndBefore:function(a){return this.setEnd(a.parentNode,e.getNodeIndex(a))},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,
3==a.nodeType?a.nodeValue.length:a.childNodes.length)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEndAtLast(a)},cloneRange:function(){return(new l(this.document)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},collapse:function(a){a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset);
this.collapsed=!0;return this},shrinkBoundary:function(a){function h(a){return 1==a.nodeType&&!e.isBookmarkNode(a)&&!z.$empty[a.tagName]&&!z.$nonChild[a.tagName]}for(var c,b=this.collapsed;1==this.startContainer.nodeType&&(c=this.startContainer.childNodes[this.startOffset])&&h(c);)this.setStart(c,0);if(b)return this.collapse(!0);if(!a)for(;1==this.endContainer.nodeType&&0<this.endOffset&&(c=this.endContainer.childNodes[this.endOffset-1])&&h(c);)this.setEnd(c,c.childNodes.length);return this},getCommonAncestor:function(a,
h){var c=this.startContainer,b=this.endContainer;return c===b?a&&g(this)&&(c=c.childNodes[this.startOffset],1==c.nodeType)?c:h&&3==c.nodeType?c.parentNode:c:e.getCommonAncestor(c,b)},trimBoundary:function(a){this.txtToElmBoundary();var h=this.startContainer,c=this.startOffset,b=this.collapsed,f=this.endContainer;if(3==h.nodeType){if(0==c)this.setStartBefore(h);else if(c>=h.nodeValue.length)this.setStartAfter(h);else{var l=e.split(h,c);h===f?this.setEnd(l,this.endOffset-c):h.parentNode===f&&(this.endOffset+=
1);this.setStartBefore(l)}if(b)return this.collapse(!0)}a||(c=this.endOffset,f=this.endContainer,3==f.nodeType&&(0==c?this.setEndBefore(f):(c<f.nodeValue.length&&e.split(f,c),this.setEndAfter(f))));return this},txtToElmBoundary:function(a){function h(a,h){var c=a[h+"Container"],b=a[h+"Offset"];if(3==c.nodeType)if(!b)a["set"+h.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](c);else if(b>=c.nodeValue.length)a["set"+h.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](c)}if(a||
!this.collapsed)h(this,"start"),h(this,"end");return this},insertNode:function(a){var h=a,c=1;11==a.nodeType&&(h=a.firstChild,c=a.childNodes.length);this.trimBoundary(!0);var b=this.startContainer,f=b.childNodes[this.startOffset];f?b.insertBefore(a,f):b.appendChild(a);h.parentNode===this.endContainer&&(this.endOffset+=c);return this.setStartBefore(h)},setCursor:function(a,h){return this.collapse(!a).select(h)},createBookmark:function(a,h){var c=this.document.createElement("span");c.style.cssText=
"display:none;line-height:0px;";c.appendChild(this.document.createTextNode("\u200d"));c.id="_baidu_bookmark_start_"+(h?"":k++);if(!this.collapsed){var b=c.cloneNode(!0);b.id="_baidu_bookmark_end_"+(h?"":k++)}this.insertNode(c);b&&this.collapse().insertNode(b).setEndBefore(b);this.setStartAfter(c);return{start:a?c.id:c,end:b?a?b.id:b:null,id:a}},moveToBookmark:function(a){var h=a.id?this.document.getElementById(a.start):a.start;a=a.end&&a.id?this.document.getElementById(a.end):a.end;this.setStartBefore(h);
e.remove(h);a?(this.setEndBefore(a),e.remove(a)):this.collapse(!0);return this},enlarge:function(a,h){var c=e.isBody,b=this.document.createTextNode("");if(a){var f=this.startContainer;if(1==f.nodeType)if(f.childNodes[this.startOffset])var l=f=f.childNodes[this.startOffset];else f.appendChild(b),l=f=b;else l=f;for(;;){if(e.isBlockElm(f)){for(f=l;(l=f.previousSibling)&&!e.isBlockElm(l);)f=l;this.setStartBefore(f);break}l=f;f=f.parentNode}f=this.endContainer;1==f.nodeType?((l=f.childNodes[this.endOffset])?
f.insertBefore(b,l):f.appendChild(b),l=f=b):l=f;for(;;){if(e.isBlockElm(f)){for(f=l;(l=f.nextSibling)&&!e.isBlockElm(l);)f=l;this.setEndAfter(f);break}l=f;f=f.parentNode}b.parentNode===this.endContainer&&this.endOffset--;e.remove(b)}if(!this.collapsed){for(;!(0!=this.startOffset||h&&h(this.startContainer)||c(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||
h&&h(this.endContainer)||c(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(a){for(;!e.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!a)for(;!e.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!e.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==
this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!e.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(a,h,c){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(a){return 1==a.nodeType&&e.isBlockElm(a)}).adjustmentBoundary();for(var b=this.createBookmark(),f=b.end,l=function(a){return 1==
a.nodeType?"br"!=a.tagName.toLowerCase():!e.isWhitespace(a)},d=e.getNextDomNode(b.start,!1,l),m,k,g=this.cloneRange();d&&e.getPosition(d,f)&e.POSITION_PRECEDING;)if(3==d.nodeType||z[a][d.tagName]){g.setStartBefore(d);for(m=d;m&&(3==m.nodeType||z[a][m.tagName])&&m!==f;)k=m,m=e.getNextDomNode(m,1==m.nodeType,null,function(h){return z[a][h.tagName]});var d=g.setEndAfter(k).extractContents(),p;if(c&&0<c.length){var q=p=c[0].cloneNode(!1);for(var n=1,r;r=c[n++];)p.appendChild(r.cloneNode(!1)),p=p.firstChild}else p=
g.document.createElement(a);h&&e.setAttributes(p,h);p.appendChild(d);g.insertNode(c?q:p);var t;"span"==a&&h.style&&/text\-decoration/.test(h.style)&&(t=e.findParentByTagName(p,"a",!0))?(e.setAttributes(t,h),e.remove(p,!0),p=t):(e.mergeSibling(p),e.clearEmptySibling(p));e.mergeChild(p,h);d=e.getNextDomNode(p,!1,l);e.mergeToParent(p);if(m===f)break}else d=e.getNextDomNode(d,!0,l);return this.moveToBookmark(b)},removeInlineStyle:function(a){if(this.collapsed)return this;a=n.isArray(a)?a:[a];this.shrinkBoundary().adjustmentBoundary();
for(var h=this.startContainer,c=this.endContainer;;){if(1==h.nodeType){if(-1<n.indexOf(a,h.tagName.toLowerCase()))break;if("body"==h.tagName.toLowerCase()){h=null;break}}h=h.parentNode}for(;;){if(1==c.nodeType){if(-1<n.indexOf(a,c.tagName.toLowerCase()))break;if("body"==c.tagName.toLowerCase()){c=null;break}}c=c.parentNode}var b=this.createBookmark();if(h){var f=this.cloneRange().setEndBefore(b.start).setStartBefore(h);var l=f.extractContents();f.insertNode(l);e.clearEmptySibling(h,!0);h.parentNode.insertBefore(b.start,
h)}c&&(f=this.cloneRange().setStartAfter(b.end).setEndAfter(c),l=f.extractContents(),f.insertNode(l),e.clearEmptySibling(c,!1,!0),c.parentNode.insertBefore(b.end,c.nextSibling));for(h=e.getNextDomNode(b.start,!1,function(a){return 1==a.nodeType});h&&h!==b.end;)c=e.getNextDomNode(h,!0,function(a){return 1==a.nodeType}),-1<n.indexOf(a,h.tagName.toLowerCase())&&e.remove(h,!0),h=c;return this.moveToBookmark(b)},getClosedNode:function(){var a;if(!this.collapsed){var h=this.cloneRange().adjustmentBoundary().shrinkBoundary();
g(h)&&(h=h.startContainer.childNodes[h.startOffset])&&1==h.nodeType&&(z.$empty[h.tagName]||z.$nonChild[h.tagName])&&(a=h)}return a},select:t.ie?function(a,l){this.collapsed||this.shrinkBoundary();var d=this.getClosedNode();if(d&&!l){try{var k=this.document.body.createControlRange();k.addElement(d);k.select()}catch(H){}return this}var d=this.createBookmark(),m=d.start;k=this.document.body.createTextRange();k.moveToElementText(m);k.moveStart("character",1);if(!this.collapsed){var g=this.document.body.createTextRange(),
m=d.end;g.moveToElementText(m);k.setEndPoint("EndToEnd",g)}else if(!a&&3!=this.startContainer.nodeType){g=this.document.createTextNode(h);var p=this.document.createElement("span");p.appendChild(this.document.createTextNode(h));m.parentNode.insertBefore(p,m);m.parentNode.insertBefore(g,m);b(this.document,g);c=g;f(p,"previousSibling");f(m,"nextSibling");k.moveStart("character",-1);k.collapse(!0)}this.moveToBookmark(d);p&&e.remove(p);try{k.select()}catch(H){}return this}:function(a){function l(a){function h(h,
c,b){3==h.nodeType&&h.nodeValue.length<c&&(a[b+"Offset"]=h.nodeValue.length)}h(a.startContainer,a.startOffset,"start");h(a.endContainer,a.endOffset,"end")}var d=e.getWindow(this.document);var k=d.getSelection();t.gecko?this.document.body.focus():d.focus();if(k){k.removeAllRanges();this.collapsed&&!a&&(a=d=this.startContainer,1==d.nodeType&&(a=d.childNodes[this.startOffset]),3==d.nodeType&&this.startOffset||(a?a.previousSibling&&3==a.previousSibling.nodeType:d.lastChild&&3==d.lastChild.nodeType)||
(a=this.document.createTextNode(h),this.insertNode(a),b(this.document,a),f(a,"previousSibling"),f(a,"nextSibling"),c=a,this.setStart(a,t.webkit?1:0).collapse(!0)));d=this.document.createRange();if(this.collapsed&&t.opera&&1==this.startContainer.nodeType)if(a=this.startContainer.childNodes[this.startOffset]){for(;a&&e.isBlockElm(a);)if(1==a.nodeType&&a.childNodes[0])a=a.childNodes[0];else break;a&&this.setStartBefore(a).collapse(!0)}else(a=this.startContainer.lastChild)&&e.isBr(a)&&this.setStartBefore(a).collapse(!0);
l(this);d.setStart(this.startContainer,this.startOffset);d.setEnd(this.endContainer,this.endOffset);k.addRange(d)}return this},scrollToView:function(a,h){a=a?window:e.getWindow(this.document);var c=this.document.createElement("span");c.innerHTML="&nbsp;";this.cloneRange().insertNode(c);e.scrollToView(c,a,h);e.remove(c);return this},inFillChar:function(){var a=this.startContainer;return this.collapsed&&3==a.nodeType&&a.nodeValue.replace(new RegExp("^"+e.fillChar),"").length+1==a.nodeValue.length?!0:
!1},createAddress:function(a,h){function c(a){for(var c=a?f.startContainer:f.endContainer,b=e.findParents(c,!0,function(a){return!e.isBody(a)}),l=[],d=0,k;k=b[d++];)l.push(e.getNodeIndex(k,h));b=0;if(h)if(3==c.nodeType){for(c=c.previousSibling;c&&3==c.nodeType;)b+=c.nodeValue.replace(R,"").length,c=c.previousSibling;b+=a?f.startOffset:f.endOffset}else if(c=c.childNodes[a?f.startOffset:f.endOffset])b=e.getNodeIndex(c,h);else for(c=a?f.startContainer:f.endContainer,a=c.firstChild;a;)if(e.isFillChar(a))a=
a.nextSibling;else if(b++,3==a.nodeType)for(;a&&3==a.nodeType;)a=a.nextSibling;else a=a.nextSibling;else b=a?e.isFillChar(c)?0:f.startOffset:f.endOffset;0>b&&(b=0);l.push(b);return l}var b={},f=this;b.startAddress=c(!0);a||(b.endAddress=f.collapsed?[].concat(b.startAddress):c());return b},moveToAddress:function(a,h){function c(a,h){for(var c=b.document.body,f,l,d=0,k,e=a.length;d<e;d++)if(k=a[d],f=c,c=c.childNodes[k],!c){l=k;break}h?c?b.setStartBefore(c):b.setStart(f,l):c?b.setEndBefore(c):b.setEnd(f,
l)}var b=this;c(a.startAddress,!0);!h&&a.endAddress&&c(a.endAddress);return b},equals:function(a){for(var h in this)if(this.hasOwnProperty(h)&&this[h]!==a[h])return!1;return!0},traversal:function(a,h){if(this.collapsed)return this;for(var c=this.createBookmark(),b=c.end,f=e.getNextDomNode(c.start,!1,h);f&&f!==b&&e.getPosition(f,b)&e.POSITION_PRECEDING;){var l=e.getNextDomNode(f,!1,h);a(f);f=l}return this.moveToBookmark(c)}}})();(function(){function g(a,f){var b,h=e.getNodeIndex;a=a.duplicate();a.collapse(f);
var c=a.parentElement();if(!c.hasChildNodes())return{container:c,offset:0};for(var l=c.children,d,m=a.duplicate(),g=0,u=l.length-1,w=-1;g<=u;){w=Math.floor((g+u)/2);d=l[w];m.moveToElementText(d);var x=m.compareEndPoints("StartToStart",a);if(0<x)u=w-1;else if(0>x)g=w+1;else return{container:c,offset:h(d)}}if(-1==w){m.moveToElementText(c);m.setEndPoint("StartToStart",a);m=m.text.replace(/(\r\n|\r)/g,"\n").length;l=c.childNodes;if(!m)return d=l[l.length-1],{container:d,offset:d.nodeValue.length};for(b=
l.length;0<m;)m-=l[--b].nodeValue.length;return{container:l[b],offset:-m}}m.collapse(0<x);m.setEndPoint(0<x?"StartToStart":"EndToStart",a);m=m.text.replace(/(\r\n|\r)/g,"\n").length;if(!m)return z.$empty[d.tagName]||z.$nonChild[d.tagName]?{container:c,offset:h(d)+(0<x?0:1)}:{container:d,offset:0<x?0:d.childNodes.length};for(;0<m;)try{b=d,d=d[0<x?"previousSibling":"nextSibling"],m-=d.nodeValue.length}catch(v){return{container:c,offset:h(b)}}return{container:d,offset:0<x?-m:d.nodeValue.length+m}}function a(a,
f){if(a.item)f.selectNode(a.item(0));else{var b=g(a,!0);f.setStart(b.container,b.offset);0!=a.compareEndPoints("StartToEnd",a)&&(b=g(a,!1),f.setEnd(b.container,b.offset))}return f}function d(a){try{var b=a.getNative().createRange()}catch(h){return null}var d=b.item?b.item(0):b.parentElement();return(d.ownerDocument||d)===a.document?b:null}(E.Selection=function(a){var b=this;b.document=a;t.ie9below&&(a=e.getWindow(a).frameElement,e.on(a,"beforedeactivate",function(){b._bakIERange=b.getIERange()}),
e.on(a,"activate",function(){try{!d(b)&&b._bakIERange&&b._bakIERange.select()}catch(k){}b._bakIERange=null}));a=a=null}).prototype={rangeInBody:function(a,f){var b=t.ie9below||f?a.item?a.item():a.parentElement():a.startContainer;return b===this.document.body||e.inDoc(b,this.document)},getNative:function(){var a=this.document;try{return a?t.ie9below?a.selection:e.getWindow(a).getSelection():null}catch(f){return null}},getIERange:function(){var a=d(this);return!a&&this._bakIERange?this._bakIERange:
a},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?e.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(t.ie9below){var a=d(this);return!(!a||!this.rangeInBody(a))}return!!this.getNative().rangeCount}catch(f){return!1}},
getRange:function(){function b(a){for(var h=f.document.body.firstChild,c=a.collapsed;h&&h.firstChild;)a.setStart(h,0),h=h.firstChild;a.startContainer||a.setStart(f.document.body,0);c&&a.collapse(!0)}var f=this;if(null!=f._cachedRange)return this._cachedRange;var d=new r.editor.dom.Range(f.document);if(t.ie9below){var h=f.getIERange();if(h)try{a(h,d)}catch(l){b(d)}else b(d)}else{var c=f.getNative();if(c&&c.rangeCount)h=c.getRangeAt(0),c=c.getRangeAt(c.rangeCount-1),d.setStart(h.startContainer,h.startOffset).setEnd(c.endContainer,
c.endOffset),d.collapsed&&e.isBody(d.startContainer)&&!d.startOffset&&b(d);else{if(this._bakRange&&e.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;b(d)}}return this._bakRange=d},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var a=t.ie9below?this.getIERange():this.getRange(),f;if(t.ie9below){if(!a)return this.document.body.firstChild;if(a.item)return a.item(0);var d=a.duplicate();0<d.text.length&&d.moveStart("character",1);d.collapse(1);
d=d.parentElement();for(f=a=a.parentElement();a=a.parentNode;)if(a==d){d=f;break}}else if(a.shrinkBoundary(),d=a.startContainer,1==d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[Math.min(d.childNodes.length-1,a.startOffset)]),3==d.nodeType)return d.parentNode;return d},getText:function(){var a;return this.isFocus()&&(a=this.getNative())?(a=t.ie9below?a.createRange():a.getRangeAt(0),t.ie9below?a.text:a.toString()):""},clearRange:function(){this.getNative()[t.ie9below?"empty":"removeAllRanges"]()}}})();
(function(){function g(a,c){if(c.textarea)if(n.isString(c.textarea))for(var h=0,b,f=e.getElementsByTagName(a,"textarea");b=f[h++];){if(b.id=="ueditor_textarea_"+c.options.textarea){var d=b;break}}else d=c.textarea;d||(a.appendChild(d=e.createElement(document,"textarea",{name:c.options.textarea,id:"ueditor_textarea_"+c.options.textarea,style:"display:none"})),c.textarea=d);!d.getAttribute("name")&&d.setAttribute("name",c.options.textarea);d.value=c.hasContents()?c.options.allHtmlEnabled?c.getAllHtml():
c.getContent(null,null,!0):""}function a(a){for(var h in a)return h}function d(a){a.langIsReady=!0;a.fireEvent("langReady")}var b=0,f,k=UE.Editor=function(h){var c=this;c.uid=b++;aa.call(c);c.commands={};c.options=n.extend(n.clone(h||{}),UEDITOR_CONFIG,!0);c.shortcutkeys={};c.inputRules=[];c.outputRules=[];c.setOpt(k.defaultOptions(c));c.loadServerConfig();n.isEmptyObject(UE.I18N)?n.loadFile(document,{src:c.options.langPath+c.options.lang+"/"+c.options.lang+".js",tag:"script",type:"text/javascript",
defer:"defer"},function(){UE.plugin.load(c);d(c)}):(c.options.lang=a(UE.I18N),UE.plugin.load(c),d(c));UE.instants["ueditorInstant"+c.uid]=c};k.prototype={registerCommand:function(a,c){this.commands[a]=c},ready:function(a){a&&(this.isReady?a.apply(this):this.addListener("ready",a))},setOpt:function(a,c){var h={};n.isString(a)?h[a]=c:h=a;n.extend(this.options,h,!0)},getOpt:function(a){return this.options[a]},destroy:function(){this.fireEvent("destroy");var a=this.container.parentNode,c=this.textarea;
c?c.style.display="":(c=document.createElement("textarea"),a.parentNode.insertBefore(c,a));c.style.width=this.iframe.offsetWidth+"px";c.style.height=this.iframe.offsetHeight+"px";c.value=this.getContent();c.id=this.key;a.innerHTML="";e.remove(a);var a=this.key,b;for(b in this)this.hasOwnProperty(b)&&delete this[b];UE.delEditor(a)},render:function(a){var c=this.options;n.isString(a)&&(a=document.getElementById(a));if(a){c.minFrameWidth=c.initialFrameWidth?c.initialFrameWidth:c.initialFrameWidth=a.offsetWidth;
c.initialFrameHeight?c.minFrameHeight=c.initialFrameHeight:c.initialFrameHeight=c.minFrameHeight=a.offsetHeight;a.style.width=/%$/.test(c.initialFrameWidth)?"100%":c.initialFrameWidth-parseInt(e.getComputedStyle(a,"padding-left"))-parseInt(e.getComputedStyle(a,"padding-right"))+"px";a.style.height=/%$/.test(c.initialFrameHeight)?"100%":c.initialFrameHeight-parseInt(e.getComputedStyle(a,"padding-top"))-parseInt(e.getComputedStyle(a,"padding-bottom"))+"px";a.style.zIndex=c.zIndex;var h=(I&&9>t.version?
"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(c.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+n.unhtml(c.iframeCssUrl)+"'/>":"")+(c.initialStyle?"<style>"+c.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(I?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+
this.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);\x3c/script></html>";a.appendChild(e.createElement(document,"iframe",{id:"ueditor_"+this.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(c.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+h+'");document.close();}())'}));a.style.overflow="hidden";
setTimeout(function(){/%$/.test(c.initialFrameWidth)&&(c.minFrameWidth=c.initialFrameWidth=a.offsetWidth);/%$/.test(c.initialFrameHeight)&&(c.minFrameHeight=c.initialFrameHeight=a.offsetHeight,a.style.height=c.initialFrameHeight+"px")})}},_setup:function(a){var c=this,h=c.options;I?(a.body.disabled=!0,a.body.contentEditable=!0,a.body.disabled=!1):a.body.contentEditable=!0;a.body.spellcheck=!1;c.document=a;c.window=a.defaultView||a.parentWindow;c.iframe=c.window.frameElement;c.body=a.body;c.selection=
new E.Selection(a);var b;t.gecko&&(b=this.selection.getNative())&&b.removeAllRanges();this._initEvents();for(var f=this.iframe.parentNode;!e.isBody(f);f=f.parentNode)if("FORM"==f.tagName){c.form=f;if(c.options.autoSyncData)e.on(c.window,"blur",function(){g(f,c)});else e.on(f,"submit",function(){g(this,c)});break}if(h.initialContent)if(h.autoClearinitialContent){var d=c.execCommand;c.execCommand=function(){c.fireEvent("firstBeforeExecCommand");return d.apply(c,arguments)};this._setDefaultContent(h.initialContent)}else this.setContent(h.initialContent,
!1,!0);e.isEmptyNode(c.body)&&(c.body.innerHTML="<p>"+(t.ie?"":"<br/>")+"</p>");h.focus&&setTimeout(function(){c.focus(c.options.focusInEnd);!c.options.autoClearinitialContent&&c._selectionChange()},0);c.container||(c.container=this.iframe.parentNode);h.fullscreen&&c.ui&&c.ui.setFullScreen(!0);try{c.document.execCommand("2D-position",!1,!1)}catch(u){}try{c.document.execCommand("enableInlineTableEditing",!1,!1)}catch(u){}try{c.document.execCommand("enableObjectResizing",!1,!1)}catch(u){}c._bindshortcutKeys();
c.isReady=1;c.fireEvent("ready");h.onready&&h.onready.call(c);if(!t.ie9below)e.on(c.window,["blur","focus"],function(a){if("blur"==a.type){c._bakRange=c.selection.getRange();try{c._bakNativeRange=c.selection.getNative().getRangeAt(0),c.selection.getNative().removeAllRanges()}catch(w){c._bakNativeRange=null}}else try{c._bakRange&&c._bakRange.select()}catch(w){}});t.gecko&&10902>=t.version&&(c.body.contentEditable=!1,setTimeout(function(){c.body.contentEditable=!0},100),setInterval(function(){c.body.style.height=
c.iframe.offsetHeight-20+"px"},100));!h.isShow&&c.setHide();h.readonly&&c.setDisabled()},sync:function(a){(a=a?document.getElementById(a):e.findParent(this.iframe.parentNode,function(a){return"FORM"==a.tagName},!0))&&g(a,this)},setHeight:function(a,c){a!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=a+"px");!c&&(this.options.minFrameHeight=this.options.initialFrameHeight=a);this.body.style.height=a+"px";!c&&this.trigger("setHeight")},addshortcutkey:function(a,
c){var h={};c?h[a]=c:h=a;n.extend(this.shortcutkeys,h)},_bindshortcutKeys:function(){var a=this,c=this.shortcutkeys;a.addListener("keydown",function(h,b){var f=b.keyCode||b.which,d;for(d in c)for(var l=c[d].split(","),k=0,g;g=l[k++];){g=g.split(":");var p=g[0];g=g[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(p.toLowerCase())||/^(\d+)$/.test(p))if("ctrl"==RegExp.$1&&(b.ctrlKey||b.metaKey)&&(""!=RegExp.$2?b[RegExp.$2.slice(1)+"Key"]:1)&&f==RegExp.$3||f==RegExp.$1)-1!=a.queryCommandState(d,g)&&a.execCommand(d,
g),e.preventDefault(b)}})},getContent:function(a,c,b,f,d){a&&n.isFunction(a)&&(c=a,a="");if(c?!c():!this.hasContents())return"";this.fireEvent("beforegetcontent");c=UE.htmlparser(this.body.innerHTML,f);this.filterOutputRule(c);this.fireEvent("aftergetcontent",a,c);return c.toHtml(d)},getAllHtml:function(){var a=[];this.fireEvent("getAllHtml",a);if(t.ie&&8<t.version){var c="";n.each(this.document.styleSheets,function(a){c+=a.href?'<link rel="stylesheet" type="text/css" href="'+a.href+'" />':"<style>"+
a.cssText+"</style>"});n.each(this.document.getElementsByTagName("script"),function(a){c+=a.outerHTML})}return"<html><head>"+(this.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+this.options.charset+'"/>':"")+(c||this.document.getElementsByTagName("head")[0].innerHTML)+a.join("\n")+"</head><body "+(I&&9>t.version?'class="view"':"")+">"+this.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var a=new RegExp(e.fillChar,"g"),c=this.body.innerHTML.replace(/[\n\r]/g,
""),c=c.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,c,h){return z.$block[h]?"\n":c?c:""});return c.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getPlainTxtButLink:function(){var a=new RegExp(e.fillChar,"g"),c=this.body.innerHTML.replace(/[\n\r]/g,""),c=c.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,
function(a,c,h){return"a"===h.trim()&&void 0===c?a:z.$block[h]?"\n":c?c:""});return c.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&")},getContentTxt:function(){return this.body[t.ie?"innerText":"textContent"].replace(new RegExp(e.fillChar,"g"),"").replace(/\u00a0/g," ")},setContent:function(a,c,b){this.fireEvent("beforesetcontent",a);a=UE.htmlparser(a);this.filterInputRule(a);a=a.toHtml();this.body.innerHTML=(c?this.body.innerHTML:"")+a;if("p"==this.options.enterTag)if(c=
this.body.firstChild,!c||1==c.nodeType&&(z.$cdata[c.tagName]||"DIV"==c.tagName&&c.getAttribute("cdata_tag")||e.isCustomeNode(c))&&c===this.body.lastChild)this.body.innerHTML="<p>"+(t.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var h=this.document.createElement("p");c;){for(;c&&(3==c.nodeType||1==c.nodeType&&z.p[c.tagName]&&!z.$cdata[c.tagName]);)a=c.nextSibling,h.appendChild(c),c=a;if(h.firstChild)if(c)c.parentNode.insertBefore(h,c),h=this.document.createElement("p");else{this.body.appendChild(h);
break}c=c.nextSibling}this.fireEvent("aftersetcontent");this.fireEvent("contentchange");!b&&this._selectionChange();this._bakRange=this._bakIERange=this._bakNativeRange=null;var f;t.gecko&&(f=this.selection.getNative())&&f.removeAllRanges();this.options.autoSyncData&&this.form&&g(this.form,this)},focus:function(a){var c;try{var h=this.selection.getRange();a?((c=this.body.lastChild)&&1==c.nodeType&&!z.$empty[c.tagName]&&(e.isEmptyBlock(c)?h.setStartAtFirst(c):h.setStartAtLast(c),h.collapse(!0)),h.setCursor(!0)):
(!h.collapsed&&e.isBody(h.startContainer)&&0==h.startOffset&&(c=this.body.firstChild)&&1==c.nodeType&&!z.$empty[c.tagName]&&h.setStartAtFirst(c).collapse(!0),h.select(!0));this.fireEvent("focus selectionchange")}catch(p){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var a=this.selection.getNative();if(a.empty&&t.ie){var c=document.body.createTextRange();c.moveToElementText(document.body);c.collapse(!0);c.select();a.empty()}else a.removeAllRanges()},_initEvents:function(){var a=
this,c=a.document,b=a.window;a._proxyDomEvent=n.bind(a._proxyDomEvent,a);e.on(c,"click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart".split(" "),a._proxyDomEvent);e.on(b,["focus","blur"],a._proxyDomEvent);e.on(a.body,"drop",function(c){t.gecko&&c.stopPropagation&&c.stopPropagation();a.fireEvent("contentchange")});e.on(c,["mouseup","keydown"],function(c){"keydown"==c.type&&(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)||2!=c.button&&a._selectionChange(250,c)})},
_proxyDomEvent:function(a){return!1===this.fireEvent("before"+a.type.replace(/^on/,"").toLowerCase())||!1===this.fireEvent(a.type.replace(/^on/,""),a)?!1:this.fireEvent("after"+a.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(a,c){var h=this,b=!1;if(t.ie&&9>t.version&&c&&"mouseup"==c.type&&!this.selection.getRange().collapsed){b=!0;var d=c.clientX;var e=c.clientY}clearTimeout(f);f=setTimeout(function(){if(h.selection&&h.selection.getNative()){if(b&&"None"==h.selection.getNative().type){var a=
h.document.body.createTextRange();try{a.moveToPoint(d,e)}catch(x){a=null}}if(a){var f=h.selection.getIERange;h.selection.getIERange=function(){return a}}h.selection.cache();f&&(h.selection.getIERange=f);h.selection._cachedRange&&h.selection._cachedStartElement&&(h.fireEvent("beforeselectionchange"),h.fireEvent("selectionchange",!!c),h.fireEvent("afterselectionchange"),h.selection.clear())}},a||50)},_callCmdFn:function(a,c){var h=c[0].toLowerCase();var b=(h=this.commands[h]||UE.commands[h])&&h[a];
if(!(h&&b||"queryCommandState"!=a))return 0;if(b)return b.apply(this,c)},execCommand:function(a){a=a.toLowerCase();var c=this.commands[a]||UE.commands[a];if(!c||!c.execCommand)return null;if(c.notNeedUndo||this.__hasEnterExecCommand){var h=this._callCmdFn("execCommand",arguments);this.__hasEnterExecCommand||c.ignoreContentChange||this._ignoreContentChange||this.fireEvent("contentchange")}else this.__hasEnterExecCommand=!0,-1!=this.queryCommandState.apply(this,arguments)&&(this.fireEvent("saveScene"),
this.fireEvent.apply(this,["beforeexeccommand",a].concat(arguments)),h=this._callCmdFn("execCommand",arguments),this.fireEvent.apply(this,["afterexeccommand",a].concat(arguments)),this.fireEvent("saveScene")),this.__hasEnterExecCommand=!1;this.__hasEnterExecCommand||c.ignoreContentChange||this._ignoreContentChange||this._selectionChange();return h},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",
arguments)},hasContents:function(a){if(a)for(var c=0,h;h=a[c++];)if(0<this.document.getElementsByTagName(h).length)return!0;if(!e.isEmptyBlock(this.body))return!0;a=["div"];for(c=0;h=a[c++];){h=e.getElementsByTagName(this.document,h);for(var b=0,f;f=h[b++];)if(e.isCustomeNode(f))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){if("false"==this.body.contentEditable){this.body.contentEditable=!0;var a=this.selection.getRange();try{a.moveToBookmark(this.lastBk),delete this.lastBk}catch(c){a.setStartAtFirst(this.body).collapse(!0)}a.select(!0);
this.bkqueryCommandState&&(this.queryCommandState=this.bkqueryCommandState,delete this.bkqueryCommandState);this.bkqueryCommandValue&&(this.queryCommandValue=this.bkqueryCommandValue,delete this.bkqueryCommandValue);this.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(a){var c=this;a=a?n.isArray(a)?a:[a]:[];"true"==c.body.contentEditable&&(c.lastBk||(c.lastBk=c.selection.getRange().createBookmark(!0)),c.body.contentEditable=!1,c.bkqueryCommandState=
c.queryCommandState,c.bkqueryCommandValue=c.queryCommandValue,c.queryCommandState=function(b){return-1!=n.indexOf(a,b)?c.bkqueryCommandState.apply(c,arguments):-1},c.queryCommandValue=function(b){return-1!=n.indexOf(a,b)?c.bkqueryCommandValue.apply(c,arguments):null},c.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},_setDefaultContent:function(){function a(){var c=this;c.document.getElementById("initContent")&&(c.body.innerHTML="<p>"+(I?"":"<br/>")+"</p>",c.removeListener("firstBeforeExecCommand focus",
a),setTimeout(function(){c.focus();c._selectionChange()},0))}return function(c){this.body.innerHTML='<p id="initContent">'+c+"</p>";this.addListener("firstBeforeExecCommand focus",a)}}(),setShow:function(){var a=this.selection.getRange();if("none"==this.container.style.display){try{a.moveToBookmark(this.lastBk),delete this.lastBk}catch(c){a.setStartAtFirst(this.body).collapse(!0)}setTimeout(function(){a.select(!0)},100);this.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){this.lastBk||
(this.lastBk=this.selection.getRange().createBookmark(!0));this.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(a){var c=UE.I18N[this.options.lang];if(!c)throw Error("not import language file");a=(a||"").split(".");for(var b=0,f;(f=a[b++])&&(c=c[f],c););return c},getContentLength:function(a,c){var b=this.getContent(!1,!1,!0).length;if(a){c=(c||[]).concat(["hr","img","iframe"]);for(var b=this.getContentTxt().replace(/[\t\r\n]+/g,"").length,f=0,h;h=c[f++];)b+=
this.document.getElementsByTagName(h).length}return b},addInputRule:function(a){this.inputRules.push(a)},filterInputRule:function(a){for(var c=0,b;b=this.inputRules[c++];)b.call(this,a)},addOutputRule:function(a){this.outputRules.push(a)},filterOutputRule:function(a){for(var c=0,b;b=this.outputRules[c++];)b.call(this,a)},getActionUrl:function(a){a=this.getOpt(a)||a;var c=this.getOpt("imageUrl"),b=this.getOpt("serverUrl");!b&&c&&(b=c.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));return b?(b=b+
(-1==b.indexOf("?")?"?":"&")+"action="+(a||""),n.formatUrl(b)):""}};n.inherits(k,aa)})();UE.Editor.defaultOptions=function(e){e=e.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:e+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:e+"lang/",theme:"default",themePath:e+"themes/",allHtmlEnabled:!1,
scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){function e(a){console&&console.error(a)}var a=this;setTimeout(function(){try{a.options.imageUrl&&a.setOpt("serverUrl",a.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var d=a.getActionUrl("config"),b=n.isCrossDomainUrl(d);a._serverConfigLoaded=!1;d&&UE.ajax.request(d,{method:"GET",dataType:b?"jsonp":"",onsuccess:function(f){try{var d=
b?f:eval("("+f.responseText+")");n.extend(a.options,d);a.fireEvent("serverConfigLoaded");a._serverConfigLoaded=!0}catch(h){e(a.getLang("loadconfigFormatError"))}},onerror:function(){e(a.getLang("loadconfigHttpError"))}})}catch(f){e(a.getLang("loadconfigError"))}})};UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1};UE.Editor.prototype.afterConfigReady=function(e){if(e&&n.isFunction(e)){var a=this,d=function(){e.apply(a,arguments);a.removeListener("serverConfigLoaded",
d)};a.isServerConfigLoaded()?e.call(a,"serverConfigLoaded"):a.addListener("serverConfigLoaded",d)}}})();UE.ajax=function(){function e(a){var b=[],c;for(c in a)if("method"!=c&&"timeout"!=c&&"async"!=c&&"dataType"!=c&&"callback"!=c&&void 0!=a[c]&&null!=a[c])if("function"!=(typeof a[c]).toLowerCase()&&"object"!=(typeof a[c]).toLowerCase())b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(n.isArray(a[c]))for(var f=0;f<a[c].length;f++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][f]));
return b.join("&")}function a(a,b){var c=f(),h=!1,d={method:"POST",timeout:5E3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};"object"===typeof a&&(b=a,a=b.url);if(c&&a){var k=b?n.extend(d,b):d,d=e(k);n.isEmptyObject(k.data)||(d+=(d?"&":"")+e(k.data));var g=setTimeout(function(){4!=c.readyState&&(h=!0,c.abort(),clearTimeout(g))},k.timeout),u=k.method.toUpperCase(),w=a+(-1==a.indexOf("?")?"?":"&")+("POST"==u?"":d+"&noCache="+ +new Date);c.open(u,w,k.async);c.onreadystatechange=function(){if(4==
c.readyState)if(h||200!=c.status)k.onerror(c);else k.onsuccess(c)};"POST"==u?(c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(d)):c.send(null)}}function d(a,b){function c(a){return function(){try{if(a)d.onerror&&d.onerror();else try{clearTimeout(x),f.apply(window,arguments)}catch(W){}}catch(W){d.onerror&&d.onerror.call(window,W)}finally{d.oncomplete&&d.oncomplete.apply(window,arguments);h.parentNode&&h.parentNode.removeChild(h);window[D]=null;try{delete window[D]}catch(W){}}}}
var f=b.onsuccess||function(){},h=document.createElement("SCRIPT"),d=b||{},k=d.charset,g=d.jsonp||"callback",w=d.timeOut||0,x,v=new RegExp("(\\?|&)"+g+"=([^&]*)"),H;if(n.isFunction(f)){var D="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36);window[D]=c(0)}else if(n.isString(f))D=f;else if(H=v.exec(a))D=H[2];a=a.replace(v,"$1"+g+"="+D);0>a.search(v)&&(a+=(0>a.indexOf("?")?"?":"&")+g+"="+D);g=e(b);n.isEmptyObject(b.data)||(g+=(g?"&":"")+e(b.data));g&&(a=a.replace(/\?/,"?"+g+"&"));h.onerror=
c(1);w&&(x=setTimeout(c(1),w));(function(a,c,b){a.setAttribute("type","text/javascript");a.setAttribute("defer","defer");b&&a.setAttribute("charset",b);a.setAttribute("src",c);document.getElementsByTagName("head")[0].appendChild(a)})(h,a,k)}var b="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),b="ActiveXObject('Msxml2.XMLHTTP')"}catch(k){try{new ActiveXObject("Microsoft.XMLHTTP"),b="ActiveXObject('Microsoft.XMLHTTP')"}catch(h){}}var f=new Function("return new "+b);return{request:function(b,
f){f&&"jsonp"==f.dataType?d(b,f):a(b,f)},getJSONP:function(a,b,c){d(a,{data:b,oncomplete:c})}}}();UE.filterWord=function(){function e(a){return a=a.replace(/[\d.]+\w+/g,function(a){return n.transUnitToPx(a)})}function a(a){return a.replace(/[\t\r\n]+/g," ").replace(/\x3c!--[\s\S]*?--\x3e/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(a){if(t.opera)return"";try{if(/Bitmap/i.test(a))return"";var b=a.match(/width:([ \d.]*p[tx])/i)[1],d=a.match(/height:([ \d.]*p[tx])/i)[1],h=a.match(/src=\s*"([^"]*)"/i)[1];
return'<img width="'+e(b)+'" height="'+e(d)+'" src="'+h+'" />'}catch(c){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(a,f,d,h){return"class"==f&&"MsoListParagraph"==h?a:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,
function(a,f,d){return d.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(a,f,d,h){a=[];h=h.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(a){return n.transUnitToPx(a)}).split(/;\s*/g);d=0;for(var c;c=h[d];d++){var b=c.split(":");if(2==b.length){c=b[0].toLowerCase();var k=b[1].toLowerCase();if(!(/^(background)\w*/.test(c)&&0==k.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(c)&&/^0\w+$/.test(k))){switch(c){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":/<table/.test(f)||
(a[d]=c.replace(/^mso-|-alt$/g,"")+":"+e(k));continue;case "horiz-align":a[d]="text-align:"+k;continue;case "vert-align":a[d]="vertical-align:"+k;continue;case "font-color":case "mso-foreground":a[d]="color:"+k;continue;case "mso-background":case "mso-highlight":a[d]="background:"+k;continue;case "mso-default-height":a[d]="min-height:"+e(k);continue;case "mso-default-width":a[d]="min-width:"+e(k);continue;case "mso-padding-between-alt":a[d]="border-collapse:separate;border-spacing:"+e(k);continue;
case "text-line-through":if("single"==k||"double"==k)a[d]="text-decoration:line-through";continue;case "mso-zero-height":"yes"==k&&(a[d]="display:none");continue;case "margin":if(!/[1-9]/.test(k))continue}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(c)||/text\-indent|padding|margin/.test(c)&&/\-[\d.]+/.test(k)||(a[d]=c+":"+b[1])}}}return f+(a.length?' style="'+a.join(";").replace(/;{2,}/g,
";")+'"':"")})}return function(d){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(d)?a(d):d}}();(function(){function e(a,c,b){a.push("\n");return c+(b?1:-1)}function a(a,c){for(var b=0;b<c;b++)a.push("    ")}function d(c,f,h,l){switch(c.type){case "root":for(var k=0,m;m=c.children[k++];)h&&"element"==m.type&&!z.$inlineWithA[m.tagName]&&1<k&&(e(f,l,!0),a(f,l)),d(m,f,h,l);break;case "text":"pre"==c.parentNode.tagName?f.push(c.data):f.push(p[c.parentNode.tagName]?n.html(c.data):
c.data.replace(/[ ]{2}/g," &nbsp;"));break;case "element":b(c,f,h,l);break;case "comment":f.push("\x3c!--"+c.data+"--\x3e")}return f}function b(c,b,f,h){var k="";if(c.attrs){var k=[],m=c.attrs,g;for(g in m)k.push(g+(void 0!==m[g]?'="'+(l[g]?n.html(m[g]).replace(/["]/g,function(a){return"&quot;"}):n.unhtml(m[g]))+'"':""));k=k.join(" ")}b.push("<"+c.tagName+(k?" "+k:"")+(z.$empty[c.tagName]?"/":"")+">");f&&!z.$inlineWithA[c.tagName]&&"pre"!=c.tagName&&c.children&&c.children.length&&(h=e(b,h,!0),a(b,
h));if(c.children&&c.children.length)for(k=0;m=c.children[k++];)f&&"element"==m.type&&!z.$inlineWithA[m.tagName]&&1<k&&(e(b,h),a(b,h)),d(m,b,f,h);z.$empty[c.tagName]||(f&&!z.$inlineWithA[c.tagName]&&"pre"!=c.tagName&&c.children&&c.children.length&&(h=e(b,h),a(b,h)),b.push("</"+c.tagName+">"))}function f(a,c){var b;if("element"==a.type&&a.getAttr("id")==c)return a;if(a.children&&a.children.length)for(var h=0;b=a.children[h++];)if(b=f(b,c))return b}function k(a,c,b){"element"==a.type&&a.tagName==c&&
b.push(a);if(a.children&&a.children.length)for(var f=0,h;h=a.children[f++];)k(h,c,b)}function h(a,c){if(a.children&&a.children.length)for(var b=0,f;f=a.children[b];)h(f,c),f.parentNode&&(f.children&&f.children.length&&c(f),f.parentNode&&b++);else c(a)}var c=UE.uNode=function(a){this.type=a.type;this.data=a.data;this.tagName=a.tagName;this.parentNode=a.parentNode;this.attrs=a.attrs||{};this.children=a.children},l={href:1,src:1,_src:1,_href:1,cdata_data:1},p={style:1,script:1};c.createElement=function(a){return/[<>]/.test(a)?
UE.htmlparser(a).children[0]:new c({type:"element",children:[],tagName:a})};c.createText=function(a,c){return new UE.uNode({type:"text",data:c?a:n.unhtml(a||"")})};c.prototype={toHtml:function(a){var c=[];d(this,c,a,0);return c.join("")},innerHTML:function(a){if("element"!=this.type||z.$empty[this.tagName])return this;if(n.isString(a)){if(this.children)for(var c=0,b;b=this.children[c++];)b.parentNode=null;this.children=[];a=UE.htmlparser(a);for(c=0;b=a.children[c++];)this.children.push(b),b.parentNode=
this;return this}a=new UE.uNode({type:"root",children:this.children});return a.toHtml()},innerText:function(a,b){if("element"!=this.type||z.$empty[this.tagName])return this;if(a){if(this.children)for(var f=0,h;h=this.children[f++];)h.parentNode=null;this.children=[];this.appendChild(c.createText(a,b));return this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?
this.children[this.children.length-1]:null},previousSibling:function(){for(var a=this.parentNode,c=0,b;b=a.children[c];c++)if(b===this)return 0==c?null:a.children[c-1]},nextSibling:function(){for(var a=this.parentNode,c=0,b;b=a.children[c++];)if(b===this)return a.children[c]},replaceChild:function(a,c){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var b=0,f;f=this.children[b];b++)if(f===c)return this.children.splice(b,1,a),c.parentNode=null,a.parentNode=this,a}},appendChild:function(a){if("root"==
this.type||"element"==this.type&&!z.$empty[this.tagName]){this.children||(this.children=[]);a.parentNode&&a.parentNode.removeChild(a);for(var c=0,b;b=this.children[c];c++)if(b===a){this.children.splice(c,1);break}this.children.push(a);a.parentNode=this;return a}},insertBefore:function(a,c){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var b=0,f;f=this.children[b];b++)if(f===c)return this.children.splice(b,0,a),a.parentNode=this,a}},insertAfter:function(a,c){if(this.children){a.parentNode&&
a.parentNode.removeChild(a);for(var b=0,f;f=this.children[b];b++)if(f===c)return this.children.splice(b+1,0,a),a.parentNode=this,a}},removeChild:function(a,c){if(this.children)for(var b=0,f;f=this.children[b];b++)if(f===a){this.children.splice(b,1);f.parentNode=null;if(c&&f.children&&f.children.length)for(var h=0,d;d=f.children[h];h++)this.children.splice(b+h,0,d),d.parentNode=this;return f}},getAttr:function(a){return this.attrs&&this.attrs[a.toLowerCase()]},setAttr:function(a,c){if(a)if(this.attrs||
(this.attrs={}),n.isObject(a))for(var b in a)a[b]?this.attrs[b.toLowerCase()]=a[b]:delete this.attrs[b];else c?this.attrs[a.toLowerCase()]=c:delete this.attrs[a];else delete this.attrs},getIndex:function(){for(var a=this.parentNode,c=0,b;b=a.children[c];c++)if(b===this)return c;return-1},getNodeById:function(a){var c;if(this.children&&this.children.length)for(var b=0;c=this.children[b++];)if(c=f(c,a))return c},getNodesByTagName:function(a){a=n.trim(a).replace(/[ ]{2,}/g," ").split(" ");var c=[],b=
this;n.each(a,function(a){if(b.children&&b.children.length)for(var f=0,h;h=b.children[f++];)k(h,a,c)});return c},getStyle:function(a){var c=this.getAttr("style");return c?(a=c.match(new RegExp("(^|;)\\s*"+a+":([^;]+)","i")))&&a[0]?a[2]:"":""},setStyle:function(a,c){function b(a,c){f=f.replace(new RegExp("(^|;)\\s*"+a+":([^;]+;?)","gi"),"$1");c&&(f=a+":"+n.unhtml(c)+";"+f)}var f=this.getAttr("style");f||(f="");if(n.isObject(a))for(var h in a)b(h,a[h]);else b(a,c);this.setAttr("style",n.trim(f))},traversal:function(a){this.children&&
this.children.length&&h(this,a);return this}}})();UE.htmlparser=function(g,a){function d(a,c){if(m[a.tagName]){var b=l.createElement(m[a.tagName]);a.appendChild(b);b.appendChild(l.createText(c))}else a.appendChild(l.createText(c))}function b(a,f,h){var d;if(d=p[f]){for(var e=a,m;"root"!=e.type;){if(n.isArray(d)?-1!=n.indexOf(d,e.tagName):d==e.tagName){a=e;m=!0;break}e=e.parentNode}m||(a=b(a,n.isArray(d)?d[0]:d))}d=new l({parentNode:a,type:"element",tagName:f.toLowerCase(),children:z.$empty[f]?null:
[]});if(h){for(e={};m=k.exec(h);)e[m[1].toLowerCase()]=c[m[1].toLowerCase()]?m[2]||m[3]||m[4]:n.unhtml(m[2]||m[3]||m[4]);d.attrs=e}a.children.push(d);return z.$empty[f]?a:d}var f=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,k=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,h={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};
g=g.replace(new RegExp(e.fillChar,"g"),"");a||(g=g.replace(new RegExp("[\\r\\t\\n"+(a?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(a?"":" ")+"]*","g"),function(c,b){return b&&h[b.toLowerCase()]?c.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):c.replace(new RegExp("^[\\r\\n"+(a?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(a?"":" ")+"]+$"),"")}));for(var c={href:1,src:1},l=UE.uNode,p={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",
dd:"dl",option:"select"},m={ol:"li",ul:"li"},q,u=0,w=0,x=new l({type:"root",children:[]}),v=x;q=f.exec(g);){u=q.index;try{if(u>w&&d(v,g.slice(w,u)),q[3])z.$cdata[v.tagName]?d(v,q[0]):v=b(v,q[3].toLowerCase(),q[4]);else if(q[1]){if("root"!=v.type)if(z.$cdata[v.tagName]&&!z.$cdata[q[1]])d(v,q[0]);else{for(u=v;"element"==v.type&&v.tagName!=q[1].toLowerCase();)if(v=v.parentNode,"root"==v.type)throw v=u,"break";v=v.parentNode}}else q[2]&&v.children.push(new l({type:"comment",data:q[2],parentNode:v}))}catch(H){}w=
f.lastIndex}w<g.length&&d(v,g.slice(w));return x};UE.filterNode=function(){function e(a,d){switch(a.type){case "element":var b;if(b=d[a.tagName])if("-"===b)a.parentNode.removeChild(a);else if(n.isFunction(b)){var f=a.parentNode;var k=a.getIndex();b(a);if(a.parentNode){if(a.children)for(b=0;k=a.children[b];)e(k,d),k.parentNode&&b++}else for(b=k;k=f.children[b];)e(k,d),k.parentNode&&b++}else{if((b=b.$)&&a.attrs){k={};for(f in b){var h=a.getAttr(f);if("style"==f&&n.isArray(b[f])){var c=[];n.each(b[f],
function(b){var f;(f=a.getStyle(b))&&c.push(b+":"+f)});h=c.join(";")}h&&(k[f]=h)}a.attrs=k}if(a.children)for(b=0;k=a.children[b];)e(k,d),k.parentNode&&b++}else if(z.$cdata[a.tagName])a.parentNode.removeChild(a);else for(f=a.parentNode,k=a.getIndex(),a.parentNode.removeChild(a,!0),b=k;k=f.children[b];)e(k,d),k.parentNode&&b++;break;case "comment":a.parentNode.removeChild(a)}}return function(a,d){if(n.isEmptyObject(d))return a;var b;(b=d["-"])&&n.each(b.split(" "),function(a){d[a]="-"});b=0;for(var f;f=
a.children[b];)e(f,d),f.parentNode&&b++;return a}}();UE.plugin=function(){var e={};return{register:function(a,d,b,f){b&&n.isFunction(b)&&(f=b,b=null);e[a]={optionName:b||a,execFn:d,afterDisabled:f}},load:function(a){n.each(e,function(d){var b=d.execFn.call(a);!1!==a.options[d.optionName]?b&&n.each(b,function(b,d){switch(d.toLowerCase()){case "shortcutkey":a.addshortcutkey(b);break;case "bindevents":n.each(b,function(b,c){a.addListener(c,b)});break;case "bindmultievents":n.each(n.isArray(b)?b:[b],
function(b){var c=n.trim(b.type).split(/\s+/);n.each(c,function(c){a.addListener(c,b.handler)})});break;case "commands":n.each(b,function(b,c){a.commands[c]=b});break;case "outputrule":a.addOutputRule(b);break;case "inputrule":a.addInputRule(b);break;case "defaultoptions":a.setOpt(b)}}):d.afterDisabled&&d.afterDisabled.call(a)});n.each(UE.plugins,function(d){d.call(a)})},run:function(a,d){var b=e[a];b&&b.exeFn.call(d)}}}();var S=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,
Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},O=UE.LocalStorage=function(){function e(){var a=document.createElement("div");a.style.display="none";if(!a.addBehavior)return null;a.addBehavior("#default#userdata");return{getItem:function(b){var f=null;try{document.body.appendChild(a),a.load(d),f=a.getAttribute(b),document.body.removeChild(a)}catch(h){}return f},setItem:function(b,
e){document.body.appendChild(a);a.setAttribute(b,e);a.save(d);document.body.removeChild(a)},removeItem:function(b){document.body.appendChild(a);a.removeAttribute(b);a.save(d);document.body.removeChild(a)}}}var a=window.localStorage||e()||null,d="localStorage";return{saveLocalData:function(b,f){return a&&f?(a.setItem(b,f),!0):!1},getLocalData:function(b){return a?a.getItem(b):null},removeItem:function(b){a&&a.removeItem(b)}}}();(function(){UE.Editor.prototype.setPreferences=function(e,a){var d={};
n.isString(e)?d[e]=a:d=e;var b=O.getLocalData("ueditor_preference");b&&(b=n.str2json(b))?n.extend(b,d):b=d;b&&O.saveLocalData("ueditor_preference",n.json2str(b))};UE.Editor.prototype.getPreferences=function(e){var a=O.getLocalData("ueditor_preference");return a&&(a=n.str2json(a))?e?a[e]:a:null};UE.Editor.prototype.removePreferences=function(e){var a=O.getLocalData("ueditor_preference");a&&(a=n.str2json(a))&&(a[e]=void 0,delete a[e]);a&&O.saveLocalData("ueditor_preference",n.json2str(a))}})();UE.plugins.defaultfilter=
function(){var e=this;e.setOpt({allowDivTransToP:!0,disabledTableInTable:!0});e.addInputRule(function(a){function d(a){for(;a&&"element"==a.type;){if("td"==a.tagName)return!0;a=a.parentNode}return!1}var b=this.options.allowDivTransToP,f;a.traversal(function(a){if("element"==a.type)if(z.$cdata[a.tagName]||!e.options.autoClearEmptyNode||!z.$inline[a.tagName]||z.$empty[a.tagName]||a.attrs&&!n.isEmptyObject(a.attrs))switch(a.tagName){case "style":case "script":a.setAttr({cdata_tag:a.tagName,cdata_data:a.innerHTML()||
"",_ue_custom_node_:"true"});a.tagName="div";a.innerHTML("");break;case "a":(f=a.getAttr("href"))&&a.setAttr("_href",f);break;case "img":if((f=a.getAttr("src"))&&/^data:/.test(f)){a.parentNode.removeChild(a);break}a.setAttr("_src",a.getAttr("src"));break;case "span":t.webkit&&(f=a.getStyle("white-space"))&&/nowrap|normal/.test(f)&&(a.setStyle("white-space",""),e.options.autoClearEmptyNode&&n.isEmptyObject(a.attrs)&&a.parentNode.removeChild(a,!0));(f=a.getAttr("id"))&&/^_baidu_bookmark_/i.test(f)&&
a.parentNode.removeChild(a);break;case "p":if(f=a.getAttr("align"))a.setAttr("align"),a.setStyle("text-align",f);n.each(a.children,function(c){if("element"==c.type&&"p"==c.tagName){var b=c.nextSibling();for(a.parentNode.insertAfter(c,a);b;){var f=b.nextSibling();a.parentNode.insertAfter(b,c);c=b;b=f}return!1}});a.firstChild()||a.innerHTML(t.ie?"&nbsp;":"<br/>");break;case "div":if(a.getAttr("cdata_tag"))break;if((f=a.getAttr("class"))&&/^line number\d+/.test(f))break;if(!b)break;for(var h,c=UE.uNode.createElement("p");h=
a.firstChild();)"text"!=h.type&&UE.dom.dtd.$block[h.tagName]?c.firstChild()?(a.parentNode.insertBefore(c,a),c=UE.uNode.createElement("p")):a.parentNode.insertBefore(h,a):c.appendChild(h);c.firstChild()&&a.parentNode.insertBefore(c,a);a.parentNode.removeChild(a);break;case "dl":a.tagName="ul";break;case "dt":case "dd":a.tagName="li";break;case "li":(h=a.getAttr("class"))&&/list\-/.test(h)||a.setAttr();h=a.getNodesByTagName("ol ul");UE.utils.each(h,function(c){a.parentNode.insertAfter(c,a)});break;
case "td":case "th":case "caption":a.children&&a.children.length||a.appendChild(t.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case "table":e.options.disabledTableInTable&&d(a)&&(a.parentNode.insertBefore(UE.uNode.createText(a.innerText()),a),a.parentNode.removeChild(a))}else a.firstChild()?"span"!=a.tagName||a.attrs&&!n.isEmptyObject(a.attrs)||a.parentNode.removeChild(a,!0):a.parentNode.removeChild(a)})});e.addOutputRule(function(a){var d;a.traversal(function(a){if("element"==
a.type)if(!e.options.autoClearEmptyNode||!z.$inline[a.tagName]||z.$empty[a.tagName]||a.attrs&&!n.isEmptyObject(a.attrs))switch(a.tagName){case "div":if(d=a.getAttr("cdata_tag"))a.tagName=d,a.appendChild(UE.uNode.createText(a.getAttr("cdata_data"))),a.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""});break;case "a":(d=a.getAttr("_href"))&&a.setAttr({href:n.html(d),_href:""});break;case "span":(d=a.getAttr("id"))&&/^_baidu_bookmark_/i.test(d)&&a.parentNode.removeChild(a);break;case "img":(d=
a.getAttr("_src"))&&a.setAttr({src:a.getAttr("_src"),_src:""})}else a.firstChild()?"span"!=a.tagName||a.attrs&&!n.isEmptyObject(a.attrs)||a.parentNode.removeChild(a,!0):a.parentNode.removeChild(a)})})};UE.commands.inserthtml={execCommand:function(g,a,d){var b,f=this;if(a&&!0!==f.fireEvent("beforeinserthtml",a)){var k=f.selection.getRange();g=k.document.createElement("div");g.style.display="inline";d||(d=UE.htmlparser(a),f.options.filterRules&&UE.filterNode(d,f.options.filterRules),f.filterInputRule(d),
a=d.toHtml());g.innerHTML=n.trim(a);if(!k.collapsed&&(d=k.startContainer,e.isFillChar(d)&&k.setStartBefore(d),d=k.endContainer,e.isFillChar(d)&&k.setEndAfter(d),k.txtToElmBoundary(),k.endContainer&&1==k.endContainer.nodeType&&(d=k.endContainer.childNodes[k.endOffset])&&e.isBr(d)&&k.setEndAfter(d),0==k.startOffset&&(d=k.startContainer,e.isBoundaryNode(d,"firstChild")&&(d=k.endContainer,k.endOffset==(3==d.nodeType?d.nodeValue.length:d.childNodes.length)&&e.isBoundaryNode(d,"lastChild")&&(f.body.innerHTML=
"<p>"+(t.ie?"":"<br/>")+"</p>",k.setStart(f.body.firstChild,0).collapse(!0)))),!k.collapsed&&k.deleteContents(),1==k.startContainer.nodeType&&(d=k.startContainer.childNodes[k.startOffset])&&e.isBlockElm(d)&&(b=d.previousSibling)&&e.isBlockElm(b))){for(k.setEnd(b,b.childNodes.length).collapse();d.firstChild;)b.appendChild(d.firstChild);e.remove(d)}var h,c=0;k.inFillChar()&&(d=k.startContainer,e.isFillChar(d)?(k.setStartBefore(d).collapse(!0),e.remove(d)):e.isFillChar(d,!0)&&(d.nodeValue=d.nodeValue.replace(R,
""),k.startOffset--,k.collapsed&&k.collapse(!0)));var l=e.findParentByTagName(k.startContainer,"li",!0);if(l){for(;d=g.firstChild;){for(;d&&(3==d.nodeType||!e.isBlockElm(d)||"HR"==d.tagName);){var p=d.nextSibling;k.insertNode(d).collapse();var m=d;d=p}if(d)if(/^(ol|ul)$/i.test(d.tagName)){for(;d.firstChild;)m=d.firstChild,e.insertAfter(l,d.firstChild),l=l.nextSibling;e.remove(d)}else p=d.nextSibling,b=f.document.createElement("li"),e.insertAfter(l,b),b.appendChild(d),m=d,d=p,l=b}l=e.findParentByTagName(k.startContainer,
"li",!0);e.isEmptyBlock(l)&&e.remove(l);m&&k.setStartAfter(m).collapse(!0).select(!0)}else{for(;d=g.firstChild;){if(c){for(m=f.document.createElement("p");d&&(3==d.nodeType||!z.$block[d.tagName]);){var q=d.nextSibling;m.appendChild(d);d=q}m.firstChild&&(d=m)}k.insertNode(d);q=d.nextSibling;if(!c&&d.nodeType==e.NODE_ELEMENT&&e.isBlockElm(d)&&(m=e.findParent(d,function(a){return e.isBlockElm(a)}))&&"body"!=m.tagName.toLowerCase()&&(!z[m.tagName][d.nodeName]||d.parentNode!==m)){if(z[m.tagName][d.nodeName])for(h=
d.parentNode;h!==m;)b=h,h=h.parentNode;else b=m;e.breakParent(d,b||h);b=d.previousSibling;e.trimWhiteTextNode(b);b.childNodes.length||e.remove(b);!t.ie&&(p=d.nextSibling)&&e.isBlockElm(p)&&p.lastChild&&!e.isBr(p.lastChild)&&p.appendChild(f.document.createElement("br"));c=1}p=d.nextSibling;if(!g.firstChild&&p&&e.isBlockElm(p)){k.setStart(p,0).collapse(!0);break}k.setEndAfter(d).collapse()}d=k.startContainer;q&&e.isBr(q)&&e.remove(q);if(e.isBlockElm(d)&&e.isEmptyNode(d))if(q=d.nextSibling)e.remove(d),
1==q.nodeType&&z.$block[q.tagName]&&k.setStart(q,0).collapse(!0).shrinkBoundary();else try{d.innerHTML=t.ie?e.fillChar:"<br/>"}catch(u){k.setStartBefore(d),e.remove(d)}try{k.select(!0)}catch(u){}}setTimeout(function(){k=f.selection.getRange();k.scrollToView(f.autoHeightEnabled,f.autoHeightEnabled?e.getXY(f.iframe).y:0);f.fireEvent("afterinserthtml",a)},200)}}};UE.plugins.autotypeset=function(){function g(a,b){if(!a||3==a.nodeType)return 0;if(e.isBr(a))return 1;if(a&&a.parentNode&&c[a.tagName.toLowerCase()])return l&&
l.contains(a)||a.getAttribute("pagebreak")?0:b?!e.isEmptyBlock(a):e.isEmptyBlock(a,new RegExp("[\\s"+e.fillChar+"]","g"))}function a(a){a.style.cssText||(e.removeAttributes(a,["style"]),"span"==a.tagName.toLowerCase()&&e.hasNoAttributes(a)&&e.remove(a,!0))}function d(c,b){if(b){if(!f.pasteFilter)return;var d=this.document.createElement("div");d.innerHTML=b.html}else d=this.document.body;for(var m=e.getElementsByTagName(d,"*"),p=0,x;x=m[p++];)if(!0!==this.fireEvent("excludeNodeinautotype",x)){f.clearFontSize&&
x.style.fontSize&&(e.removeStyle(x,"font-size"),a(x));f.clearFontFamily&&x.style.fontFamily&&(e.removeStyle(x,"font-family"),a(x));if(g(x)){if(f.mergeEmptyline){var v=x.nextSibling;for(var H=e.isBr(x);g(v);){var D=v;v=D.nextSibling;if(H&&(!v||v&&!e.isBr(v)))break;e.remove(D)}}if(f.removeEmptyline&&e.inDoc(x,d)&&!h[x.parentNode.tagName.toLowerCase()]){if(e.isBr(x)&&(v=x.nextSibling)&&!e.isBr(v))continue;e.remove(x);continue}}g(x,!0)&&"SPAN"!=x.tagName&&(f.indent&&(x.style.textIndent=f.indentValue),
f.textAlign&&(x.style.textAlign=f.textAlign));if(f.removeClass&&x.className&&!k[x.className.toLowerCase()]){if(l&&l.contains(x))continue;e.removeAttributes(x,["class"])}if(f.imageBlockLine&&"img"==x.tagName.toLowerCase()&&!x.getAttribute("emotion"))if(b)switch(H=x,f.imageBlockLine){case "left":case "right":case "none":v=H.parentNode;for(var r;z.$inline[v.tagName]||"A"==v.tagName;)v=v.parentNode;D=v;if("P"==D.tagName&&"center"==e.getStyle(D,"text-align")&&!e.isBody(D)&&1==e.getChildCount(D,function(a){return!e.isBr(a)&&
!e.isWhitespace(a)}))if(r=D.previousSibling,v=D.nextSibling,r&&v&&1==r.nodeType&&1==v.nodeType&&r.tagName==v.tagName&&e.isBlockElm(r)){for(r.appendChild(D.firstChild);v.firstChild;)r.appendChild(v.firstChild);e.remove(D);e.remove(v)}else e.setStyle(D,"text-align","");e.setStyle(H,"float",f.imageBlockLine);break;case "center":if("center"!=this.queryCommandValue("imagefloat")){v=H.parentNode;e.setStyle(H,"float","none");for(D=H;v&&1==e.getChildCount(v,function(a){return!e.isBr(a)&&!e.isWhitespace(a)})&&
(z.$inline[v.tagName]||"A"==v.tagName);)D=v,v=v.parentNode;v=this.document.createElement("p");e.setAttributes(v,{style:"text-align:center"});D.parentNode.insertBefore(v,D);v.appendChild(D);e.setStyle(D,"float","")}}else this.selection.getRange().selectNode(x).select(),this.execCommand("imagefloat",f.imageBlockLine);f.removeEmptyNode&&f.removeTagNames[x.tagName.toLowerCase()]&&e.hasNoAttributes(x)&&e.isEmptyBlock(x)&&e.remove(x)}f.tobdc&&(D=UE.htmlparser(d.innerHTML),D.traversal(function(a){if("text"==
a.type){for(var c=a.data,c=n.html(c),b="",f=0;f<c.length;f++)b=32==c.charCodeAt(f)?b+String.fromCharCode(12288):127>c.charCodeAt(f)?b+String.fromCharCode(c.charCodeAt(f)+65248):b+c.charAt(f);a.data=b}}),d.innerHTML=D.toHtml());f.bdc2sb&&(D=UE.htmlparser(d.innerHTML),D.traversal(function(a){if("text"==a.type){for(var c=a.data,b="",f=0;f<c.length;f++)var d=c.charCodeAt(f),b=65281<=d&&65373>=d?b+String.fromCharCode(c.charCodeAt(f)-65248):12288==d?b+String.fromCharCode(c.charCodeAt(f)-12288+32):b+c.charAt(f);
a.data=b}}),d.innerHTML=D.toHtml());b&&(b.html=d.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:n.extend({div:1},z.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var b=this,f=b.options.autotypeset,k={selectTdClass:1,pagebreak:1,anchorclass:1},h={li:1},c={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,
span:1},l;f&&(function(){var a=b.getPreferences("autotypeset");n.extend(b.options.autotypeset,a)}(),f.pasteFilter&&b.addListener("beforepaste",d),b.commands.autotypeset={execCommand:function(){b.removeListener("beforepaste",d);f.pasteFilter&&b.addListener("beforepaste",d);d.call(b)}})};UE.plugin.register("background",function(){function g(a){var c={};a=a.split(";");n.each(a,function(a){var b=a.indexOf(":"),f=n.trim(a.substr(0,b)).toLowerCase();f&&(c[f]=n.trim(a.substr(b+1)||""))});return c}function a(a){if(a){var c=
[],b;for(b in a)a.hasOwnProperty(b)&&c.push(b+":"+a[b]+"; ");n.cssRule("editor_background",c.length?"body{"+c.join("")+"}":"",d.document)}else n.cssRule("editor_background","",d.document)}var d=this,b,f=/body[\s]*\{(.+)\}/i,k=d.hasContents;d.hasContents=function(){return d.queryCommandValue("background")?!0:k.apply(d,arguments)};return{bindEvents:{getAllHtml:function(a,c){var b=this.body,f=e.getComputedStyle(b,"background-image");var h=0<f.indexOf(d.options.imagePath)?f.substring(f.indexOf(d.options.imagePath),
f.length-1).replace(/"|\(|\)/ig,""):"none"!=f?f.replace(/url\("?|"?\)/ig,""):"";var f='<style type="text/css">body{',b={"background-color":e.getComputedStyle(b,"background-color")||"#ffffff","background-image":h?"url("+h+")":"","background-repeat":e.getComputedStyle(b,"background-repeat")||"","background-position":t.ie?e.getComputedStyle(b,"background-position-x")+" "+e.getComputedStyle(b,"background-position-y"):e.getComputedStyle(b,"background-position"),height:e.getComputedStyle(b,"height")},k;
for(k in b)b.hasOwnProperty(k)&&(f+=k+":"+b[k]+"; ");c.push(f+"}</style> ")},aftersetcontent:function(){0==b&&a()}},inputRule:function(f){b=!1;n.each(f.getNodesByTagName("p"),function(c){var f=c.getAttr("data-background");f&&(b=!0,a(g(f)),c.parentNode.removeChild(c))})},outputRule:function(a){var c=(n.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(f);c&&a.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+n.trim(c[1].replace(/"/g,"").replace(/[\s]+/g,
" "))+'"><br/></p>'))},commands:{background:{execCommand:function(b,c){a(c)},queryCommandValue:function(){var a=(n.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(f);return a?g(a[1]):null},notNeedUndo:!0}}}});UE.plugins.justify=function(){var g=e.isBlockElm,a={left:1,right:1,center:1,justify:1},d=function(a,f){var b=a.createBookmark(),d=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!e.isBookmarkNode(a):!e.isWhitespace(a)};a.enlarge(!0);for(var c=a.createBookmark(),
l=e.getNextDomNode(c.start,!1,d),p=a.cloneRange(),m;l&&!(e.getPosition(l,c.end)&e.POSITION_FOLLOWING);)if(3!=l.nodeType&&g(l))l=e.getNextDomNode(l,!0,d);else{for(p.setStartBefore(l);l&&l!==c.end&&!g(l);)m=l,l=e.getNextDomNode(l,!1,null,function(a){return!g(a)});p.setEndAfter(m);l=p.getCommonAncestor();if(!e.isBody(l)&&g(l))e.setStyles(l,n.isString(f)?{"text-align":f}:f);else{l=a.document.createElement("p");e.setStyles(l,n.isString(f)?{"text-align":f}:f);var q=p.extractContents();l.appendChild(q);
p.insertNode(l)}l=e.getNextDomNode(l,!1,d)}return a.moveToBookmark(c).moveToBookmark(b)};UE.commands.justify={execCommand:function(a,f){var b=this.selection.getRange();if(b.collapsed){var h=this.document.createTextNode("p");b.insertNode(h)}d(b,f);h&&(b.setStartBefore(h).collapse(!0),e.remove(h));b.select();return!0},queryCommandValue:function(){var b=this.selection.getStart(),b=e.getComputedStyle(b,"text-align");return a[b]?b:"left"},queryCommandState:function(){var a=this.selection.getStart();return a&&
e.findParentByTagName(a,["td","th","caption"],!0)?-1:0}}};UE.plugins.font=function(){function g(a){for(var c;c=a.parentNode;)if("SPAN"==c.tagName&&1==e.getChildCount(c,function(a){return!e.isBookmarkNode(a)&&!e.isBr(a)}))c.style.cssText+=a.style.cssText,e.remove(a,!0),a=c;else break}function a(a,b,f){if(k[b]&&(a.adjustmentBoundary(),!a.collapsed&&1==a.startContainer.nodeType)){var c=a.startContainer.childNodes[a.startOffset];if(c&&e.isTagNode(c,"span")){var d=a.createBookmark();n.each(e.getElementsByTagName(c,
"span"),function(a){!a.parentNode||e.isBookmarkNode(a)||"backcolor"==b&&e.getComputedStyle(a,"background-color").toLowerCase()===f||(e.removeStyle(a,k[b]),0==a.style.cssText.replace(/^\s+$/,"").length&&e.remove(a,!0))});a.moveToBookmark(d)}}}function d(c,b,f){var d=c.collapsed,h=c.createBookmark();if(d)for(d=h.start.parentNode;z.$inline[d.tagName];)d=d.parentNode;else d=e.getCommonAncestor(h.start,h.end);n.each(e.getElementsByTagName(d,"span"),function(a){if(a.parentNode&&!e.isBookmarkNode(a))if(/\s*border\s*:\s*none;?\s*/i.test(a.style.cssText))/^\s*border\s*:\s*none;?\s*$/.test(a.style.cssText)?
e.remove(a,!0):e.removeStyle(a,"border");else{/border/i.test(a.style.cssText)&&"SPAN"==a.parentNode.tagName&&/border/i.test(a.parentNode.style.cssText)&&(a.style.cssText=a.style.cssText.replace(/border[^:]*:[^;]+;?/gi,""));if("fontborder"!=b||"none"!=f)for(var c=a.nextSibling;c&&1==c.nodeType&&"SPAN"==c.tagName;){if(e.isBookmarkNode(c)&&"fontborder"==b)a.appendChild(c);else if(c.style.cssText==a.style.cssText&&(e.moveChild(c,a),e.remove(c)),a.nextSibling===c)break;c=a.nextSibling}g(a);t.ie&&8<t.version&&
(c=e.findParent(a,function(a){return"SPAN"==a.tagName&&/background-color/.test(a.style.cssText)}))&&!/background-color/.test(a.style.cssText)&&(a.style.backgroundColor=c.style.backgroundColor)}});c.moveToBookmark(h);a(c,b,f)}var b={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},f={underline:1,strikethrough:1,fontborder:1},k={forecolor:"color",backcolor:"background-color",
fontsize:"font-size",fontfamily:"font-family"};this.setOpt({fontfamily:[{name:"songti",val:"\u5b8b\u4f53,SimSun"},{name:"yahei",val:"\u5fae\u8f6f\u96c5\u9ed1,Microsoft YaHei"},{name:"kaiti",val:"\u6977\u4f53,\u6977\u4f53_GB2312, SimKai"},{name:"heiti",val:"\u9ed1\u4f53, SimHei"},{name:"lishu",val:"\u96b6\u4e66, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",
val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});this.addInputRule(function(a){n.each(a.getNodesByTagName("u s del font strike"),function(a){if("font"==a.tagName){var c=[],b;for(b in a.attrs)switch(b){case "size":c.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[a.attrs[b]]||a.attrs[b])+"px");break;case "color":c.push("color:"+a.attrs[b]);break;case "face":c.push("font-family:"+a.attrs[b]);break;case "style":c.push(a.attrs[b])}a.attrs=
{style:c.join(";")}}else c="u"==a.tagName?"underline":"line-through",a.attrs={style:(a.getAttr("style")||"")+"text-decoration:"+c+";"};a.tagName="span"})});for(var h in b)(function(a,b){UE.commands[a]={execCommand:function(c,h){h=h||(this.queryCommandState(c)?"none":"underline"==c?"underline":"fontborder"==c?"1px solid #000":"line-through");var l=this.selection.getRange();if("default"==h){if(l.collapsed){var k=this.document.createTextNode("font");l.insertNode(k).select()}this.execCommand("removeFormat",
"span,a",b);k&&(l.setStartBefore(k).collapse(!0),e.remove(k));d(l,c,h);l.select()}else if(l.collapsed){var m=e.findParentByTagName(l.startContainer,"span",!0);k=this.document.createTextNode("font");if(!m||m.children.length||m[t.ie?"innerText":"textContent"].replace(R,"").length){l.insertNode(k);l.selectNode(k).select();m=l.document.createElement("span");if(f[a]){if(e.findParentByTagName(k,"a",!0)){l.setStartBefore(k).setCursor();e.remove(k);return}this.execCommand("removeFormat","span,a",b)}m.style.cssText=
b+":"+h;k.parentNode.insertBefore(m,k);if(!t.ie||t.ie&&9==t.version)for(var g=m.parentNode;!e.isBlockElm(g);)"SPAN"==g.tagName&&(m.style.cssText=g.style.cssText+";"+m.style.cssText),g=g.parentNode;la?setTimeout(function(){l.setStart(m,0).collapse(!0);d(l,c,h);l.select()}):(l.setStart(m,0).collapse(!0),d(l,c,h),l.select())}else l.insertNode(k),f[a]&&(l.selectNode(k).select(),this.execCommand("removeFormat","span,a",b,null),m=e.findParentByTagName(k,"span",!0),l.setStartBefore(k)),m&&(m.style.cssText+=
";"+b+":"+h),l.collapse(!0).select();e.remove(k)}else f[a]&&this.queryCommandValue(a)&&this.execCommand("removeFormat","span,a",b),l=this.selection.getRange(),l.applyInlineStyle("span",{style:b+":"+h}),d(l,c,h),l.select();return!0},queryCommandValue:function(a){var c,f=this.selection.getStart();if("underline"==a||"strikethrough"==a){for(c=f;c&&!e.isBlockElm(c)&&!e.isBody(c);){if(1==c.nodeType&&(a=e.getComputedStyle(c,b),"none"!=a))return a;c=c.parentNode}return"none"}if("fontborder"==a){for(a=f;a&&
z.$inline[a.tagName];){if((c=e.getComputedStyle(a,"border"))&&/1px/.test(c)&&/solid/.test(c))return c;a=a.parentNode}return""}return"FontSize"==a?(c=e.getComputedStyle(f,b),(a=/^([\d\.]+)(\w+)$/.exec(c))?Math.floor(a[1])+a[2]:c):e.getComputedStyle(f,b)},queryCommandState:function(a){if(!f[a])return 0;var c=this.queryCommandValue(a);return"fontborder"==a?/1px/.test(c)&&/solid/.test(c):"underline"==a?/underline/.test(c):/line\-through/.test(c)}}})(h,b[h])};UE.plugins.link=function(){function g(a){var d=
a.startContainer,b=a.endContainer;(d=e.findParentByTagName(d,"a",!0))&&a.setStartBefore(d);(b=e.findParentByTagName(b,"a",!0))&&a.setEndAfter(b)}UE.commands.unlink={execCommand:function(){var a=this.selection.getRange();if(!a.collapsed||e.findParentByTagName(a.startContainer,"a",!0)){var d=a.createBookmark();g(a);a.removeInlineStyle("a").moveToBookmark(d).select()}},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}};UE.commands.link={execCommand:function(a,d){new window.__ueditor_link({url:d,
showOff:-1!=location.pathname.indexOf("showcase")?"show":"hide",callback:function(a){function b(a,b){b._href&&(b._href=n.unhtml(b._href,/[<">]/g));b.href&&(b.href=n.unhtml(b.href,/[<">]/g));b.textValue&&(b.textValue=n.unhtml(b.textValue,/[<">]/g));var c=a,f=c.cloneRange(),d=this.queryCommandValue("link");g(c=c.adjustmentBoundary());var h=c.startContainer;1==h.nodeType&&d&&(h=h.childNodes[c.startOffset],/^(?:https?|ftp|file)\s*:\s*\/\//.test(b.textValue),h&&1==h.nodeType&&"A"==h.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(h[t.ie?
"innerText":"textContent"])&&(h[t.ie?"innerText":"textContent"]=n.html(b.textValue||b.href)));if(!f.collapsed||d)c.removeInlineStyle("a"),f=c.cloneRange();if(f.collapsed){var d=c.document.createElement("a");if(b.textValue){var l=n.html(b.textValue);delete b.textValue}else l=n.html(b.href);e.setAttributes(d,b);(h=e.findParentByTagName(f.startContainer,"a",!0))&&e.isInNodeEndBoundary(f,h)&&c.setStartAfter(h).collapse(!0);d[t.ie?"innerText":"textContent"]=l;c.insertNode(d).selectNode(d)}else c.applyInlineStyle("a",
b);a.collapse().select(!0)}var d=this.options||{},h=this.selection.getRange();d.plainLink?h.startOffset!==h.endOffset?b.call(this,h,{href:a.href}):this.execCommand("insertHtml",a.href):b.call(this,h,a)}.bind(this)})},queryCommandValue:function(){var a=this.selection.getRange();if(a.collapsed){var d=a.startContainer;if((d=1==d.nodeType?d:d.parentNode)&&(d=e.findParentByTagName(d,"a",!0))&&!e.isInNodeEndBoundary(a,d))return d}else{a.shrinkBoundary();var b=3!=a.startContainer.nodeType&&a.startContainer.childNodes[a.startOffset]?
a.startContainer.childNodes[a.startOffset]:a.startContainer,f=3==a.endContainer.nodeType||0==a.endOffset?a.endContainer:a.endContainer.childNodes[a.endOffset-1],a=a.getCommonAncestor();d=e.findParentByTagName(a,"a",!0);if(!d&&1==a.nodeType)for(var a=a.getElementsByTagName("a"),k,h,c=0,l;l=a[c++];)if(k=e.getPosition(l,b),h=e.getPosition(l,f),(k&e.POSITION_FOLLOWING||k&e.POSITION_CONTAINS)&&(h&e.POSITION_PRECEDING||h&e.POSITION_CONTAINS)){d=l;break}return d}},queryCommandState:function(){var a=this.selection.getRange().getClosedNode();
return!a||"edui-faked-video"!=a.className&&-1==a.className.indexOf("edui-upload-video")?0:-1}}};UE.plugins.insertframe=function(){var e=this;e.addListener("selectionchange",function(){e._iframe&&delete e._iframe})};UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});this.commands.removeformat={execCommand:function(g,a,d,b,
f){function k(a){if(3==a.nodeType||"span"!=a.tagName.toLowerCase())return 0;if(t.ie){var c=a.attributes;if(c.length){a=0;for(var b=c.length;a<b;a++)if(c[a].specified)return 0;return 1}}return!a.attributes.length}var h=new RegExp("^(?:"+(a||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),c=d?[]:(b||this.options.removeFormatAttributes).split(",");g=new E.Range(this.document);var l,p,m=function(a){return 1==a.nodeType};g=this.selection.getRange();(function(a){var b=a.createBookmark();a.collapsed&&
a.enlarge(!0);if(!f){var g=e.findParentByTagName(a.startContainer,"a",!0);g&&a.setStartBefore(g);(g=e.findParentByTagName(a.endContainer,"a",!0))&&a.setEndAfter(g)}l=a.createBookmark();for(g=l.start;(p=g.parentNode)&&!e.isBlockElm(p);)e.breakParent(g,p),e.clearEmptySibling(g);if(l.end){for(g=l.end;(p=g.parentNode)&&!e.isBlockElm(p);)e.breakParent(g,p),e.clearEmptySibling(g);for(var g=e.getNextDomNode(l.start,!1,m),q;g&&g!=l.end;)q=e.getNextDomNode(g,!0,m),z.$empty[g.tagName.toLowerCase()]||e.isBookmarkNode(g)||
(h.test(g.tagName)?d?(e.removeStyle(g,d),k(g)&&"text-decoration"!=d&&e.remove(g,!0)):e.remove(g,!0):z.$tableContent[g.tagName]||z.$list[g.tagName]||(e.removeAttributes(g,c),k(g)&&e.remove(g,!0))),g=q}g=l.start.parentNode;!e.isBlockElm(g)||z.$tableContent[g.tagName]||z.$list[g.tagName]||e.removeAttributes(g,c);g=l.end.parentNode;l.end&&e.isBlockElm(g)&&!z.$tableContent[g.tagName]&&!z.$list[g.tagName]&&e.removeAttributes(g,c);a.moveToBookmark(l).moveToBookmark(b);g=a.startContainer;for(q=a.collapsed;1==
g.nodeType&&e.isEmptyNode(g)&&z.$removeEmpty[g.tagName];)b=g.parentNode,a.setStartBefore(g),a.startContainer===a.endContainer&&a.endOffset--,e.remove(g),g=b;if(!q)for(g=a.endContainer;1==g.nodeType&&e.isEmptyNode(g)&&z.$removeEmpty[g.tagName];)b=g.parentNode,a.setEndBefore(g),e.remove(g),g=b})(g);g.select()}}};UE.plugins.blockquote=function(){this.commands.blockquote={execCommand:function(g,a){var d=this.selection.getRange(),b=e.filterNodeList(this.selection.getStartElementPath(),"blockquote"),f=
z.blockquote,k=d.createBookmark();if(b){var f=d.startContainer,f=e.isBlockElm(f)?f:e.findParent(f,function(a){return e.isBlockElm(a)}),h=d.endContainer,h=e.isBlockElm(h)?h:e.findParent(h,function(a){return e.isBlockElm(a)}),f=e.findParentByTagName(f,"li",!0)||f,h=e.findParentByTagName(h,"li",!0)||h;"LI"==f.tagName||"TD"==f.tagName||f===b||e.isBody(f)?e.remove(b,!0):e.breakParent(f,b);f!==h&&(b=e.findParentByTagName(h,"blockquote"))&&("LI"==h.tagName||"TD"==h.tagName||e.isBody(h)?b.parentNode&&e.remove(b,
!0):e.breakParent(h,b));for(var c=e.getElementsByTagName(this.document,"blockquote"),b=0,l;l=c[b++];)l.childNodes.length?e.getPosition(l,f)&e.POSITION_FOLLOWING&&e.getPosition(l,h)&e.POSITION_PRECEDING&&e.remove(l,!0):e.remove(l)}else{b=d.cloneRange();c=h=1==b.startContainer.nodeType?b.startContainer:b.startContainer.parentNode;for(l=1;;){if(e.isBody(h)){c!==h?d.collapsed?(b.selectNode(c),l=0):b.setStartBefore(c):b.setStart(h,0);break}if(!f[h.tagName]){d.collapsed?b.selectNode(c):b.setStartBefore(c);
break}c=h;h=h.parentNode}if(l)for(c=h=h=1==b.endContainer.nodeType?b.endContainer:b.endContainer.parentNode;;){if(e.isBody(h)){c!==h?b.setEndAfter(c):b.setEnd(h,h.childNodes.length);break}if(!f[h.tagName]){b.setEndAfter(c);break}c=h;h=h.parentNode}h=d.document.createElement("blockquote");e.setAttributes(h,a);h.appendChild(b.extractContents());b.insertNode(h);f=e.getElementsByTagName(h,"blockquote");for(b=0;h=f[b++];)h.parentNode&&e.remove(h,!0)}d.moveToBookmark(k).select()},queryCommandState:function(){return e.filterNodeList(this.selection.getStartElementPath(),
"blockquote")?1:0}}};UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(g){var a=this.selection.getRange();if(a.collapsed)return a;for(var d=a.createBookmark(),b=d.end,f=function(a){return!e.isBr(a)&&!e.isWhitespace(a)},k=e.getNextDomNode(d.start,!1,f);k&&e.getPosition(k,b)&e.POSITION_PRECEDING&&(3==k.nodeType&&(k.nodeValue=k.nodeValue["touppercase"==g?"toUpperCase":"toLowerCase"]()),k=e.getNextDomNode(k,!0,f),k!==b););a.moveToBookmark(d).select()}};UE.commands.indent={execCommand:function(){var e=
this.queryCommandState("indent")?"0em":this.options.indentValue||"2em";this.execCommand("Paragraph","p",{style:"text-indent:"+e})},queryCommandState:function(){var g=e.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return g&&g.style.textIndent&&parseInt(g.style.textIndent)?1:0}};UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var g=this.body,a=this.selection.getRange();a.selectNodeContents(g);e.isEmptyBlock(g)&&(t.opera&&g.firstChild&&1==
g.firstChild.nodeType&&a.setStartAtFirst(g.firstChild),a.collapse(!0));a.select(!0)},notNeedUndo:1};this.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins.paragraph=function(){var g=e.isBlockElm,a=["TD","LI","PRE"],d=function(b,f,d,h){var c=b.createBookmark(),l=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!e.isBookmarkNode(a):!e.isWhitespace(a)};b.enlarge(!0);var k=b.createBookmark();var m=e.getNextDomNode(k.start,!1,l);for(var q=b.cloneRange(),u;m&&!(e.getPosition(m,k.end)&e.POSITION_FOLLOWING);)if(3!=
m.nodeType&&g(m))m=e.getNextDomNode(m,!0,l);else{for(q.setStartBefore(m);m&&m!==k.end&&!g(m);)u=m,m=e.getNextDomNode(m,!1,null,function(a){return!g(a)});q.setEndAfter(u);m=b.document.createElement(f);d&&(e.setAttributes(m,d),h&&"customstyle"==h&&d.style&&(m.style.cssText=d.style));m.appendChild(q.extractContents());e.isEmptyNode(m)&&e.fillChar(b.document,m);q.insertNode(m);var w=m.parentNode;g(w)&&!e.isBody(m.parentNode)&&-1==n.indexOf(a,w.tagName)&&(h&&"customstyle"==h||(w.getAttribute("dir")&&m.setAttribute("dir",
w.getAttribute("dir")),w.style.cssText&&(m.style.cssText=w.style.cssText+";"+m.style.cssText),w.style.textAlign&&!m.style.textAlign&&(m.style.textAlign=w.style.textAlign),w.style.textIndent&&!m.style.textIndent&&(m.style.textIndent=w.style.textIndent),w.style.padding&&!m.style.padding&&(m.style.padding=w.style.padding)),d&&/h\d/i.test(w.tagName)&&!/h\d/i.test(m.tagName)?(e.setAttributes(w,d),h&&"customstyle"==h&&d.style&&(w.style.cssText=d.style),e.remove(m,!0),m=w):e.remove(m.parentNode,!0));m=-1!=
n.indexOf(a,w.tagName)?w:m;m=e.getNextDomNode(m,!1,l)}return b.moveToBookmark(k).moveToBookmark(c)};this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});this.commands.paragraph={execCommand:function(a,f,k,h){a=this.selection.getRange();if(a.collapsed){var c=this.document.createTextNode("p");a.insertNode(c);if(t.ie){var b=c.previousSibling;b&&e.isWhitespace(b)&&e.remove(b);(b=c.nextSibling)&&e.isWhitespace(b)&&e.remove(b)}}a=d(a,f,k,h);c&&(a.setStartBefore(c).collapse(!0),pN=c.parentNode,
e.remove(c),e.isBlockElm(pN)&&e.isEmptyNode(pN)&&e.fillNode(this.document,pN));t.gecko&&a.collapsed&&1==a.startContainer.nodeType&&(k=a.startContainer.childNodes[a.startOffset])&&1==k.nodeType&&k.tagName.toLowerCase()==f&&a.setStart(k,0).collapse(!0);a.select();return!0},queryCommandValue:function(){var a=e.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return a?a.tagName.toLowerCase():""}}};(function(){var g=e.isBlockElm,a=function(a){return e.filterNodeList(a.selection.getStartElementPath(),
function(a){return a&&1==a.nodeType&&a.getAttribute("dir")})},d=function(b,f,d){var h=function(a){return 1==a.nodeType?!e.isBookmarkNode(a):!e.isWhitespace(a)};if((f=a(f))&&b.collapsed)return f.setAttribute("dir",d),b;f=b.createBookmark();b.enlarge(!0);for(var c=b.createBookmark(),l=e.getNextDomNode(c.start,!1,h),k=b.cloneRange(),m;l&&!(e.getPosition(l,c.end)&e.POSITION_FOLLOWING);)if(3!=l.nodeType&&g(l))l=e.getNextDomNode(l,!0,h);else{for(k.setStartBefore(l);l&&l!==c.end&&!g(l);)m=l,l=e.getNextDomNode(l,
!1,null,function(a){return!g(a)});k.setEndAfter(m);l=k.getCommonAncestor();if(!e.isBody(l)&&g(l))l.setAttribute("dir",d);else{l=b.document.createElement("p");l.setAttribute("dir",d);var q=k.extractContents();l.appendChild(q);k.insertNode(l)}l=e.getNextDomNode(l,!1,h)}return b.moveToBookmark(c).moveToBookmark(f)};UE.commands.directionality={execCommand:function(a,f){var b=this.selection.getRange();if(b.collapsed){var h=this.document.createTextNode("d");b.insertNode(h)}d(b,this,f);h&&(b.setStartBefore(h).collapse(!0),
e.remove(h));b.select();return!0},queryCommandValue:function(){var b=a(this);return b?b.getAttribute("dir"):"ltr"}}})();UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(e){if(-1!==this.queryCommandState(e)){this.execCommand("insertHtml","<hr>");e=this.selection.getRange();var a=e.startContainer;if(1==a.nodeType&&!a.childNodes[e.startOffset]){var d;(d=a.childNodes[e.startOffset-1])&&1==d.nodeType&&"HR"==d.tagName&&("p"==this.options.enterTag?(d=this.document.createElement("p"),
e.insertNode(d),e.setStart(d,0).setCursor()):(d=this.document.createElement("br"),e.insertNode(d),e.setStartBefore(d).setCursor()))}return!0}},queryCommandState:function(){return e.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};this.addListener("delkeydown",function(g,a){var d=this.selection.getRange();d.txtToElmBoundary(!0);if(e.isStartInblock(d)){var b=d.startContainer.previousSibling;if(b&&e.isTagNode(b,"hr"))return e.remove(b),d.select(),e.preventDefault(a),!0}})};UE.plugins.rowspacing=
function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});this.commands.rowspacing={execCommand:function(e,a,d){this.execCommand("paragraph","p",{style:"margin-"+d+":"+a+"px"});return!0},queryCommandValue:function(g,a){var d=e.filterNodeList(this.selection.getStartElementPath(),function(a){return e.isBlockElm(a)});return d?(d=e.getComputedStyle(d,"margin-"+a).replace(/[^\d]/g,""))?d:0:0}}};UE.plugins.lineheight=function(){this.setOpt({lineheight:"1 1.5 1.75 2 3 4 5".split(" ")});
this.commands.lineheight={execCommand:function(e,a){this.execCommand("paragraph","p",{style:"line-height:"+("1"==a?"normal":a+"em")});return!0},queryCommandValue:function(){var g=e.filterNodeList(this.selection.getStartElementPath(),function(a){return e.isBlockElm(a)});if(g)return g=e.getComputedStyle(g,"line-height"),"normal"==g?1:g.replace(/[^\d.]*/ig,"")}}};UE.commands.cleardoc={execCommand:function(e){var a=this;e=a.options.enterTag;var d=a.selection.getRange();"br"==e?(a.body.innerHTML="<br/>",
d.setStart(a.body,0).setCursor()):(a.body.innerHTML="<p>"+(I?"":"<br/>")+"</p>",d.setStart(a.body.firstChild,0).setCursor(!1,!0));setTimeout(function(){a.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){n.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){n.each(e.getNodesByTagName("img"),
function(a){var d;if(d=a.getAttr("anchorname"))a.tagName="a",a.setAttr({anchorname:"",name:d,"class":""})})},inputRule:function(e){n.each(e.getNodesByTagName("a"),function(a){a.getAttr("name")&&!a.getAttr("href")&&(a.tagName="img",a.setAttr({anchorname:a.getAttr("name"),"class":"anchorclass"}),a.setAttr("name"))})},commands:{anchor:{execCommand:function(g,a){var d=this.selection.getRange(),b=d.getClosedNode();b&&b.getAttribute("anchorname")?a?b.setAttribute("anchorname",a):(d.setStartBefore(b).setCursor(),
e.remove(b)):a&&(b=this.document.createElement("img"),d.collapse(!0),e.setAttributes(b,{anchorname:a,"class":"anchorclass"}),d.insertNode(b).setStartAfter(b).setCursor(!1,!0))}}}}});UE.plugins.wordcount=function(){var g=this;g.setOpt("wordCount",!0);g.addListener("contentchange",function(){g.fireEvent("wordcount")});var a;g.addListener("ready",function(){var d=this;e.on(d.body,"keyup",function(b){(b.keyCode||b.which)in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout(a),a=setTimeout(function(){d.fireEvent("wordcount")},
200))})})};UE.plugins.pagebreak=function(){function g(a){if(e.isEmptyBlock(a)){for(var b=a.firstChild,f;b&&1==b.nodeType&&e.isEmptyBlock(b);)f=b,b=b.firstChild;!f&&(f=a);e.fillNode(d.document,f)}}function a(a){return a&&1==a.nodeType&&"HR"==a.tagName&&"pagebreak"==a.className}var d=this,b=["td"];d.setOpt("pageBreakTag","_ueditor_page_break_tag_");d.ready(function(){n.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",d.document)});
d.addInputRule(function(a){a.traversal(function(a){if("text"==a.type&&a.data==d.options.pageBreakTag){var b=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}})});d.addOutputRule(function(a){n.each(a.getNodesByTagName("hr"),function(a){if("pagebreak"==a.getAttr("class")){var b=UE.uNode.createText(d.options.pageBreakTag);a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}})});
d.commands.pagebreak={execCommand:function(){var f,k=d.selection.getRange(),h=d.document.createElement("hr");e.setAttributes(h,{"class":"pagebreak",noshade:"noshade",size:"5"});e.unSelectable(h);if(f=e.findParentByTagName(k.startContainer,b,!0))switch(f.tagName){case "TD":f=f.parentNode,f.previousSibling?(f.parentNode.insertBefore(h,f),k=e.findParents(h)):(k=e.findParentByTagName(f,"table"),k.parentNode.insertBefore(h,k),k=e.findParents(h,!0)),f=k[1],h!==f&&e.breakParent(h,f),d.fireEvent("afteradjusttable",
d.document)}else{if(!k.collapsed)for(k.deleteContents(),f=k.startContainer;!e.isBody(f)&&e.isBlockElm(f)&&e.isEmptyNode(f);)k.setStartBefore(f).collapse(!0),e.remove(f),f=k.startContainer;k.insertNode(h);for(f=h.parentNode;!e.isBody(f);)e.breakParent(h,f),(f=h.nextSibling)&&e.isEmptyBlock(f)&&e.remove(f),f=h.parentNode;f=h.nextSibling;var c=h.previousSibling;a(c)?e.remove(c):c&&g(c);f?(a(f)?e.remove(f):g(f),k.setEndAfter(h).collapse(!1)):(f=d.document.createElement("p"),h.parentNode.appendChild(f),
e.fillNode(d.document,f),k.setStart(f,0).collapse(!0));k.select(!0)}}}};UE.plugin.register("wordimage",function(){var g=this,a=[];return{commands:{wordimage:{execCommand:function(){for(var a=e.getElementsByTagName(g.body,"img"),b=[],f=0,k;k=a[f++];)(k=k.getAttribute("word_img"))&&b.push(k);return b},queryCommandState:function(){a=e.getElementsByTagName(g.body,"img");for(var d=0,b;b=a[d++];)if(b.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(a){n.each(a.getNodesByTagName("img"),
function(a){var b=a.attrs,d=128>parseInt(b.width)||43>parseInt(b.height),h=g.options,c=h.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";b.src&&/^(?:(file:\/+))/.test(b.src)&&a.setAttr({width:b.width,height:b.height,alt:b.alt,word_img:b.src,src:c,style:"background:url("+(d?h.themePath+h.theme+"/images/word.gif":h.langPath+h.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}});UE.plugins.undo=function(){function g(a,c){if(a.length!=c.length)return 0;for(var b=
0,f=a.length;b<f;b++)if(a[b]!=c[b])return 0;return 1}var a,d=this,b=d.options.maxUndoCount||20,f=d.options.maxInputCount||20,k=new RegExp(e.fillChar+"|</hr>","gi"),h={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},c=d.options.autoClearEmptyNode;d.undoManger=new function(){this.list=[];this.index=0;this.hasRedo=this.hasUndo=!1;this.undo=function(){if(this.hasUndo)if(this.list[this.index-1]||1!=this.list.length){for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);
this.restore(--this.index)}else this.reset()};this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}};this.restore=function(){var a=this.editor,b=this.list[this.index],f=UE.htmlparser(b.content.replace(k,""));a.options.autoClearEmptyNode=!1;a.filterInputRule(f);a.options.autoClearEmptyNode=c;a.document.body.innerHTML=f.toHtml();a.fireEvent("afterscencerestore");
t.ie&&n.each(e.getElementsByTagName(a.document,"td th caption p"),function(c){e.isEmptyNode(c)&&e.fillNode(a.document,c)});try{var d=(new E.Range(a.document)).moveToAddress(b.address);d.select(h[d.startContainer.nodeName.toLowerCase()])}catch(H){}this.update();this.clearKey();a.fireEvent("reset",!0)};this.getScene=function(){var a=this.editor,b=a.selection.getRange().createAddress(!1,!0);a.fireEvent("beforegetscene");var f=UE.htmlparser(a.body.innerHTML);a.options.autoClearEmptyNode=!1;a.filterOutputRule(f);
a.options.autoClearEmptyNode=c;f=f.toHtml();a.fireEvent("aftergetscene");return{address:b,content:f}};this.save=function(c,f){clearTimeout(a);var h=this.getScene(f),e=this.list[this.index];e&&e.content!=h.content&&d.trigger("contentchange");var l;if(l=e&&e.content==h.content)c?e=1:(e=e.address,l=h.address,e=e.collapsed!=l.collapsed?0:g(e.startAddress,l.startAddress)&&g(e.endAddress,l.endAddress)?1:0),l=e;l||(this.list=this.list.slice(0,this.index+1),this.list.push(h),this.list.length>b&&this.list.shift(),
this.index=this.list.length-1,this.clearKey(),this.update())};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasRedo=this.hasUndo=!1;this.clearKey()};this.clearKey=function(){p=0}};d.undoManger.editor=d;d.addListener("saveScene",function(){var a=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,a)});d.addListener("reset",function(a,c){c||this.undoManger.reset()});
d.commands.redo=d.commands.undo={execCommand:function(a){this.undoManger[a]()},queryCommandState:function(a){return this.undoManger["has"+("undo"==a.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var l={16:1,17:1,18:1,37:1,38:1,39:1,40:1},p=0,m=!1;d.addListener("ready",function(){e.on(this.body,"compositionstart",function(){m=!0});e.on(this.body,"compositionend",function(){m=!1})});d.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var q=!0;d.addListener("keydown",function(c,b){var d=this;if(!(l[b.keyCode||
b.which]||b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){var h=function(a){a.undoManger.save(!1,!0);a.fireEvent("selectionchange")};m||(d.selection.getRange().collapsed?(0==d.undoManger.list.length&&d.undoManger.save(!0),clearTimeout(a),a=setTimeout(function(){if(m)var a=setInterval(function(){m||(h(d),clearInterval(a))},300);else h(d)},200),p++,p>=f&&h(d)):(d.undoManger.save(!1,!0),q=!1))}});d.addListener("keyup",function(a,c){l[c.keyCode||c.which]||c.ctrlKey||c.metaKey||c.shiftKey||c.altKey||m||q||
(this.undoManger.save(!1,!0),q=!0)});d.stopCmdUndo=function(){d.__hasEnterExecCommand=!0};d.startCmdUndo=function(){d.__hasEnterExecCommand=!1}};UE.plugins.paste=function(){function g(a){var c=this.document;if(!c.getElementById("baidu_pastebin")){var b=this.selection.getRange(),f=b.createBookmark(),d=c.createElement("div");d.id="baidu_pastebin";t.webkit&&d.appendChild(c.createTextNode(e.fillChar+e.fillChar));c.body.appendChild(d);f.start.style.display="";d.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+
e.getXY(f.start).y+"px";b.selectNodeContents(d).select(!0);setTimeout(function(){if(t.webkit)for(var h=0,l=c.querySelectorAll("#baidu_pastebin"),k;k=l[h++];)if(e.isEmptyNode(k))e.remove(k);else{d=k;break}try{d.parentNode.removeChild(d)}catch(v){}b.moveToBookmark(f).select(!0);a(d)},0)}}function a(a){return a.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(a,c,b,f){b=b.toLowerCase();if({img:1}[b])return a;f=f.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(a,c,b){return{src:1,
href:1,name:1}[c.toLowerCase()]?c+"="+b+" ":""});return{span:1,div:1}[b]?"":"<"+c+b+" "+n.trim(f)+">"})}function d(c){if(c.firstChild){var d=e.getElementsByTagName(c,"span");var g=0;for(var m;m=d[g++];)"_baidu_cut_start"!=m.id&&"_baidu_cut_end"!=m.id||e.remove(m);if(t.webkit){m=c.querySelectorAll("div br");for(g=0;d=m[g++];)d=d.parentNode,"DIV"==d.tagName&&1==d.childNodes.length&&(d.innerHTML="<p><br/></p>",e.remove(d));d=c.querySelectorAll("#baidu_pastebin");for(g=0;m=d[g++];){var q=b.document.createElement("p");
for(m.parentNode.insertBefore(q,m);m.firstChild;)q.appendChild(m.firstChild);e.remove(m)}m=c.querySelectorAll("meta");for(g=0;d=m[g++];)e.remove(d);m=c.querySelectorAll("br");for(g=0;d=m[g++];)/^apple-/i.test(d.className)&&e.remove(d)}if(t.gecko)for(m=c.querySelectorAll("[_moz_dirty]"),g=0;d=m[g++];)d.removeAttribute("_moz_dirty");if(!t.ie)for(m=c.querySelectorAll("span.Apple-style-span"),g=0;d=m[g++];)e.remove(d,!0);g=c.innerHTML;g=UE.filterWord(g);c=UE.htmlparser(g);b.options.filterRules&&UE.filterNode(c,
b.options.filterRules);b.filterInputRule(c);t.webkit&&((g=c.lastChild())&&"element"==g.type&&"br"==g.tagName&&c.removeChild(g),n.each(b.body.querySelectorAll("div"),function(a){e.isEmptyBlock(a)&&e.remove(a,!0)}));g={html:c.toHtml()};b.fireEvent("beforepaste",g,c);g.html&&(c=UE.htmlparser(g.html,!0),1===b.queryCommandState("pasteplain")?b.execCommand("insertHtml",UE.filterNode(c,b.options.filterTxtRules).toHtml(),!0):(UE.filterNode(c,b.options.filterTxtRules),f=c.toHtml(),k=g.html,h=b.selection.getRange().createAddress(!0),
b.execCommand("insertHtml",!0===b.getOpt("retainOnlyLabelPasted")?a(k):k,!0)),b.fireEvent("afterpaste",g))}}var b=this;b.setOpt({retainOnlyLabelPasted:!1});var f,k,h;b.addListener("pasteTransfer",function(c,d){if(h&&f&&k&&f!=k){var l=b.selection.getRange();l.moveToAddress(h,!0);if(!l.collapsed){for(;!e.isBody(l.startContainer);){var g=l.startContainer;if(1==g.nodeType){g=g.childNodes[l.startOffset];if(!g){l.setStartBefore(l.startContainer);continue}(g=g.previousSibling)&&3==g.nodeType&&(new RegExp("^[\n\r\t "+
e.fillChar+"]*$")).test(g.nodeValue)&&l.setStartBefore(g)}if(0==l.startOffset)l.setStartBefore(l.startContainer);else break}for(;!e.isBody(l.endContainer);){g=l.endContainer;if(1==g.nodeType){g=g.childNodes[l.endOffset];if(!g){l.setEndAfter(l.endContainer);continue}(g=g.nextSibling)&&3==g.nodeType&&(new RegExp("^[\n\r\t"+e.fillChar+"]*$")).test(g.nodeValue)&&l.setEndAfter(g)}if(l.endOffset==l.endContainer[3==l.endContainer.nodeType?"nodeValue":"childNodes"].length)l.setEndAfter(l.endContainer);else break}}l.deleteContents();
l.select(!0);b.__hasEnterExecCommand=!0;l=k;2===d?l=a(l):d&&(l=f);b.execCommand("inserthtml",l,!0);b.__hasEnterExecCommand=!1;for(l=b.selection.getRange();!e.isBody(l.startContainer)&&!l.startOffset&&l.startContainer[3==l.startContainer.nodeType?"nodeValue":"childNodes"].length;)l.setStartBefore(l.startContainer);l=l.createAddress(!0);h.endAddress=l.startAddress}});b.addListener("ready",function(){e.on(b.body,"cut",function(){!b.selection.getRange().collapsed&&b.undoManger&&b.undoManger.save()});
e.on(b.body,t.ie||t.opera?"keydown":"paste",function(a){(!t.ie&&!t.opera||(a.ctrlKey||a.metaKey)&&"86"==a.keyCode)&&g.call(b,function(a){d(a)})})});b.commands.paste={execCommand:function(a){t.ie?(g.call(b,function(a){d(a)}),b.document.execCommand("paste")):alert(b.getLang("pastemsg"))}}};UE.plugins.pasteplain=function(){this.setOpt({pasteplain:!1,filterTxtRules:function(){function a(a){a.tagName="p";a.setStyle()}function d(a){a.parentNode.removeChild(a,!0)}return{"-":"script style object iframe embed input select",
p:{$:{}},br:{$:{}},div:function(a){for(var b,d=UE.uNode.createElement("p");b=a.firstChild();)"text"!=b.type&&UE.dom.dtd.$block[b.tagName]?d.firstChild()?(a.parentNode.insertBefore(d,a),d=UE.uNode.createElement("p")):a.parentNode.insertBefore(b,a):d.appendChild(b);d.firstChild()&&a.parentNode.insertBefore(d,a);a.parentNode.removeChild(a)},ol:d,ul:d,dl:d,dt:d,dd:d,li:d,caption:a,th:a,tr:a,h1:a,h2:a,h3:a,h4:a,h5:a,h6:a,td:function(a){a.innerText()&&a.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),
a);a.parentNode.removeChild(a,a.innerText())}}}()});var e=this.options.pasteplain;this.commands.pasteplain={queryCommandState:function(){return e?1:0},execCommand:function(){e=!e|0},notNeedUndo:1}};UE.plugins.list=function(){function g(a){var c=[],b;for(b in a)c.push(b);return c}function a(a){var c=a.className;return e.hasClass(a,/custom_/)?c.match(/custom_(\w+)/)[1]:e.getStyle(a,"list-style-type")}function d(c,d){n.each(e.getElementsByTagName(c,"ol ul"),function(h){if(e.inDoc(h,c)){var l=h.parentNode;
if(l.tagName==h.tagName){var k=a(h)||("OL"==h.tagName?"decimal":"disc"),g=a(l)||("OL"==l.tagName?"decimal":"disc");k==g&&(k=n.indexOf(m[h.tagName],k),k=k+1==m[h.tagName].length?0:k+1,f(h,m[h.tagName][k]))}var q=0,k=2;e.hasClass(h,/custom_/)?/[ou]l/i.test(l.tagName)&&e.hasClass(l,/custom_/)||(k=1):/[ou]l/i.test(l.tagName)&&e.hasClass(l,/custom_/)&&(k=3);(l=e.getStyle(h,"list-style-type"))&&(h.style.cssText="list-style-type:"+l);h.className=n.trim(h.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+
k;n.each(e.getElementsByTagName(h,"li"),function(c){c.style.cssText&&(c.style.cssText="");if(!c.firstChild)e.remove(c);else if(c.parentNode===h){q++;if(e.hasClass(h,/custom_/)){var b=1,f=a(h);if("OL"==h.tagName){if(f)switch(f){case "cn":case "cn1":case "cn2":10<q&&(0==q%10||10<q&&20>q)?b=2:20<q&&(b=3);break;case "num2":9<q&&(b=2)}c.className="list-"+p[f]+q+" list-"+f+"-paddingleft-"+b}else c.className="list-"+p[f]+" list-"+f+"-paddingleft"}else c.className=c.className.replace(/list-[\w\-]+/gi,"");
b=c.getAttribute("class");null===b||b.replace(/\s/g,"")||e.removeAttributes(c,"class")}});!d&&b(h,h.tagName.toLowerCase(),a(h)||e.getStyle(h,"list-style-type"),!0)}})}function b(c,b,f,h){var l=c.nextSibling;l&&1==l.nodeType&&l.tagName.toLowerCase()==b&&(a(l)||e.getStyle(l,"list-style-type")||("ol"==b?"decimal":"disc"))==f&&(e.moveChild(l,c),0==l.childNodes.length&&e.remove(l));l&&e.isFillChar(l)&&e.remove(l);(l=c.previousSibling)&&1==l.nodeType&&l.tagName.toLowerCase()==b&&(a(l)||e.getStyle(l,"list-style-type")||
("ol"==b?"decimal":"disc"))==f&&e.moveChild(c,l);l&&e.isFillChar(l)&&e.remove(l);!h&&e.isEmptyBlock(c)&&e.remove(c);a(c)&&d(c.ownerDocument,!0)}function f(a,c){p[c]&&(a.className="custom_"+c);try{e.setStyle(a,"list-style-type",c)}catch(v){}}function k(a){var c=a.previousSibling;c&&e.isEmptyBlock(c)&&e.remove(c);(c=a.nextSibling)&&e.isEmptyBlock(c)&&e.remove(c)}function h(a){for(;a&&!e.isBody(a);){if("TABLE"==a.nodeName)return null;if("LI"==a.nodeName)return a;a=a.parentNode}}var c=this,l={TD:1,PRE:1,
BLOCKQUOTE:1},p={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};c.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var m={OL:g(c.options.insertorderedlist),
UL:g(c.options.insertunorderedlist)},q=c.options.listiconpath,u;for(u in p)c.options.insertorderedlist.hasOwnProperty(u)||c.options.insertunorderedlist.hasOwnProperty(u)||delete p[u];c.ready(function(){var a=[],b;for(b in p){if("dash"==b||"dot"==b)a.push("li.list-"+p[b]+"{background-image:url("+q+p[b]+".gif)}"),a.push("ul.custom_"+b+"{list-style:none;}ul.custom_"+b+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var f=0;99>f;f++)a.push("li.list-"+p[b]+f+"{background-image:url("+
q+"list-"+p[b]+f+".gif)}");a.push("ol.custom_"+b+"{list-style:none;}ol.custom_"+b+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(b){case "cn":a.push("li.list-"+b+"-paddingleft-1{padding-left:25px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");a.push("li.list-"+b+"-paddingleft-3{padding-left:55px}");break;case "cn1":a.push("li.list-"+b+"-paddingleft-1{padding-left:30px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");a.push("li.list-"+b+"-paddingleft-3{padding-left:55px}");
break;case "cn2":a.push("li.list-"+b+"-paddingleft-1{padding-left:40px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:55px}");a.push("li.list-"+b+"-paddingleft-3{padding-left:68px}");break;case "num":case "num1":a.push("li.list-"+b+"-paddingleft-1{padding-left:25px}");break;case "num2":a.push("li.list-"+b+"-paddingleft-1{padding-left:35px}");a.push("li.list-"+b+"-paddingleft-2{padding-left:40px}");break;case "dash":a.push("li.list-"+b+"-paddingleft{padding-left:35px}");break;case "dot":a.push("li.list-"+
b+"-paddingleft{padding-left:20px}")}}a.push(".list-paddingleft-1{padding-left:0}");a.push(".list-paddingleft-2{padding-left:"+c.options.listDefaultPaddingLeft+"px}");a.push(".list-paddingleft-3{padding-left:"+2*c.options.listDefaultPaddingLeft+"px}");n.cssRule("list","ol,ul{margin:0;pading:0;"+(t.ie?"":"width:95%")+"}li{clear:both;}"+a.join("\n"),c.document)});c.ready(function(){e.on(c.body,"cut",function(){setTimeout(function(){var a=c.selection.getRange(),b;if(!a.collapsed&&(b=e.findParentByTagName(a.startContainer,
"li",!0))&&!b.nextSibling&&e.isEmptyBlock(b)){b=b.parentNode;var f;(f=b.previousSibling)?(e.remove(b),a.setStartAtLast(f).collapse(!0)):(f=b.nextSibling)?(e.remove(b),a.setStartAtFirst(f).collapse(!0)):(f=c.document.createElement("p"),e.fillNode(c.document,f),b.parentNode.insertBefore(f,b),e.remove(b),a.setStart(f,0).collapse(!0));a.select(!0)}})})});c.addListener("beforepaste",function(c,b){var f=this.selection.getRange(),d=UE.htmlparser(b.html,!0);if(f=e.findParentByTagName(f.startContainer,"li",
!0)){var h=f.parentNode;n.each(d.getNodesByTagName("OL"==h.tagName?"ul":"ol"),function(b){b.tagName=h.tagName;b.setAttr();if(b.parentNode===d)c=a(h)||("OL"==h.tagName?"decimal":"disc");else{var f=b.parentNode.getAttr("class");(c=f&&/custom_/.test(f)?f.match(/custom_(\w+)/)[1]:b.parentNode.getStyle("list-style-type"))||(c="OL"==h.tagName?"decimal":"disc")}f=n.indexOf(m[h.tagName],c);b.parentNode!==d&&(f=f+1==m[h.tagName].length?0:f+1);f=m[h.tagName][f];p[f]?b.setAttr("class","custom_"+f):b.setStyle("list-style-type",
f)})}b.html=d.toHtml()});!0===c.getOpt("disablePInList")&&c.addOutputRule(function(a){n.each(a.getNodesByTagName("li"),function(a){var c=[],b=0;n.each(a.children,function(f){if("p"==f.tagName){for(var d;d=f.children.pop();)c.splice(b,0,d),d.parentNode=a,lastNode=d;d=c[c.length-1];d&&"element"==d.type&&"br"==d.tagName||(f=UE.uNode.createElement("br"),f.parentNode=a,c.push(f));b=c.length}});c.length&&(a.children=c)})});c.addInputRule(function(a){n.each(a.getNodesByTagName("li"),function(a){for(var c=
UE.uNode.createElement("p"),b=0,f;f=a.children[b];)"text"==f.type||z.p[f.tagName]?c.appendChild(f):c.firstChild()?(a.insertBefore(c,f),c=UE.uNode.createElement("p"),b+=2):b++;(c.firstChild()&&!c.parentNode||!a.firstChild())&&a.appendChild(c);c.firstChild()||c.innerHTML(t.ie?"&nbsp;":"<br/>");a=a.firstChild();(c=a.lastChild())&&"text"==c.type&&/^\s*$/.test(c.data)&&a.removeChild(c)});if(c.options.autoTransWordToList){var b=function(a,c){var b=c.firstChild();if(b&&"element"==b.type&&"span"==b.tagName&&
/Wingdings|Symbol/.test(b.getStyle("font-family"))){for(var h in d)if(d[h]==b.data)return h;return"disc"}for(h in f)if(f[h].test(a))return h},f={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},d={square:"n"};n.each(a.getNodesByTagName("p"),function(a){if("MsoListParagraph"==a.getAttr("class")){a.setStyle("margin","");a.setStyle("margin-left",
"");a.setAttr("class","");var d,h,e=a;if("li"!=a.parentNode.tagName&&(h=b(a.innerText(),a))){var l=UE.uNode.createElement(c.options.insertorderedlist.hasOwnProperty(h)?"ol":"ul");for(p[h]?l.setAttr("class","custom_"+h):l.setStyle("list-style-type",h);a&&"li"!=a.parentNode.tagName&&b(a.innerText(),a);){(d=a.nextSibling())||a.parentNode.insertBefore(l,a);var k=l,g=h;if("ol"==k.tagName)if(t.ie){var m=a.firstChild();"element"==m.type&&"span"==m.tagName&&f[g].test(m.innerText())&&a.removeChild(m)}else a.innerHTML(a.innerHTML().replace(f[g],
""));else a.removeChild(a.firstChild());g=UE.uNode.createElement("li");g.appendChild(a);k.appendChild(g);a=d}!l.parentNode&&a&&a.parentNode&&a.parentNode.insertBefore(l,a)}(d=e.firstChild())&&"element"==d.type&&"span"==d.tagName&&/^\s*(&nbsp;)+\s*$/.test(d.innerText())&&d.parentNode.removeChild(d)}})}});c.addListener("contentchange",function(){d(c.document)});c.addListener("keydown",function(a,b){function f(){b.preventDefault?b.preventDefault():b.returnValue=!1;c.fireEvent("contentchange");c.undoManger&&
c.undoManger.save()}function d(a,c){for(;a&&!e.isBody(a)&&!c(a);){if(1==a.nodeType&&/[ou]l/i.test(a.tagName))return a;a=a.parentNode}return null}var h=b.keyCode||b.which;if(13==h&&!b.shiftKey){var l=c.selection.getRange();var g=e.findParent(l.startContainer,function(a){return e.isBlockElm(a)},!0);var m=e.findParentByTagName(l.startContainer,"li",!0);g&&"PRE"!=g.tagName&&!m&&(m=g.innerHTML.replace(new RegExp(e.fillChar,"g"),""),/^\s*1\s*\.[^\d]/.test(m)&&(g.innerHTML=m.replace(/^\s*1\s*\./,""),l.setStartAtLast(g).collapse(!0).select(),
c.__hasEnterExecCommand=!0,c.execCommand("insertorderedlist"),c.__hasEnterExecCommand=!1));l=c.selection.getRange();g=d(l.startContainer,function(a){return"TABLE"==a.tagName});m=l.collapsed?g:d(l.endContainer,function(a){return"TABLE"==a.tagName});if(g&&m&&g===m){if(!l.collapsed)if(g=e.findParentByTagName(l.startContainer,"li",!0),m=e.findParentByTagName(l.endContainer,"li",!0),g&&m&&g===m){if(l.deleteContents(),(m=e.findParentByTagName(l.startContainer,"li",!0))&&e.isEmptyBlock(m)){var p=m.previousSibling;
next=m.nextSibling;g=c.document.createElement("p");e.fillNode(c.document,g);var q=m.parentNode;p&&next?(l.setStart(next,0).collapse(!0).select(!0),e.remove(m)):((p||next)&&p?m.parentNode.parentNode.insertBefore(g,q.nextSibling):q.parentNode.insertBefore(g,q),e.remove(m),q.firstChild||e.remove(q),l.setStart(g,0).setCursor());f();return}}else{g=l.cloneRange();var u=g.collapse(!1).createBookmark();l.deleteContents();g.moveToBookmark(u);m=e.findParentByTagName(g.startContainer,"li",!0);k(m);g.select();
f();return}if(m=e.findParentByTagName(l.startContainer,"li",!0)){if(e.isEmptyBlock(m)){u=l.createBookmark();q=m.parentNode;m!==q.lastChild?(e.breakParent(m,q),k(m)):(q.parentNode.insertBefore(m,q.nextSibling),e.isEmptyNode(q)&&e.remove(q));if(!z.$list[m.parentNode.tagName])if(e.isBlockElm(m.firstChild))e.remove(m,!0);else{g=c.document.createElement("p");for(m.parentNode.insertBefore(g,m);m.firstChild;)g.appendChild(m.firstChild);e.remove(m)}l.moveToBookmark(u).select()}else{g=m.firstChild;if(!g||
!e.isBlockElm(g)){g=c.document.createElement("p");for(!m.firstChild&&e.fillNode(c.document,g);m.firstChild;)g.appendChild(m.firstChild);m.appendChild(g)}u=c.document.createElement("span");l.insertNode(u);e.breakParent(u,m);p=u.nextSibling;g=p.firstChild;g||(g=c.document.createElement("p"),e.fillNode(c.document,g),p.appendChild(g));e.isEmptyNode(g)&&(g.innerHTML="",e.fillNode(c.document,g));l.setStart(g,0).collapse(!0).shrinkBoundary().select();e.remove(u);(p=p.previousSibling)&&e.isEmptyBlock(p)&&
(p.innerHTML="<p></p>",e.fillNode(c.document,p.firstChild))}f()}}}if(8==h&&(l=c.selection.getRange(),l.collapsed&&e.isStartInblock(l)&&(g=l.cloneRange().trimBoundary(),(m=e.findParentByTagName(l.startContainer,"li",!0))&&e.isStartInblock(g))))if((g=e.findParentByTagName(l.startContainer,"p",!0))&&g!==m.firstChild)q=e.findParentByTagName(g,["ol","ul"]),e.breakParent(g,q),k(g),c.fireEvent("contentchange"),l.setStart(g,0).setCursor(!1,!0),c.fireEvent("saveScene"),e.preventDefault(b);else if(m&&(p=m.previousSibling)){if(46!=
h||!m.childNodes.length){z.$list[p.tagName]&&(p=p.lastChild);c.undoManger&&c.undoManger.save();g=m.firstChild;if(e.isBlockElm(g))if(e.isEmptyNode(g))for(p.appendChild(g),l.setStart(g,0).setCursor(!1,!0);m.firstChild;)p.appendChild(m.firstChild);else u=c.document.createElement("span"),l.insertNode(u),e.isEmptyBlock(p)&&(p.innerHTML=""),e.moveChild(m,p),l.setStartBefore(u).collapse(!0).select(!0),e.remove(u);else if(e.isEmptyNode(m))g=c.document.createElement("p"),p.appendChild(g),l.setStart(g,0).setCursor();
else for(l.setEnd(p,p.childNodes.length).collapse().select(!0);m.firstChild;)p.appendChild(m.firstChild);e.remove(m);c.fireEvent("contentchange");c.fireEvent("saveScene");e.preventDefault(b)}}else if(m&&!m.previousSibling){q=m.parentNode;u=l.createBookmark();if(e.isTagNode(q.parentNode,"ol ul"))q.parentNode.insertBefore(m,q);else{for(;m.firstChild;)q.parentNode.insertBefore(m.firstChild,q);e.remove(m)}e.isEmptyNode(q)&&e.remove(q);l.moveToBookmark(u).setCursor(!1,!0);c.fireEvent("contentchange");
c.fireEvent("saveScene");e.preventDefault(b)}});c.addListener("keyup",function(f,d){if(8==(d.keyCode||d.which)){var h=c.selection.getRange(),l;(l=e.findParentByTagName(h.startContainer,["ol","ul"],!0))&&b(l,l.tagName.toLowerCase(),a(l)||e.getComputedStyle(l,"list-style-type"),!0)}});c.addListener("tabkeydown",function(){function d(a){if(-1!=c.options.maxListLevel){a=a.parentNode;for(var b=0;/[ou]l/i.test(a.tagName);)b++,a=a.parentNode;if(b>=c.options.maxListLevel)return!0}}var h=c.selection.getRange(),
l=e.findParentByTagName(h.startContainer,"li",!0);if(l)if(h.collapsed){if(d(l))return!0;var k=l.parentNode;var g=c.document.createElement(k.tagName);var p=n.indexOf(m[g.tagName],a(k)||e.getComputedStyle(k,"list-style-type"));p=p+1==m[g.tagName].length?0:p+1;p=m[g.tagName][p];f(g,p);if(e.isStartInblock(h)){c.fireEvent("saveScene");var q=h.createBookmark();k.insertBefore(g,l);g.appendChild(l);b(g,g.tagName.toLowerCase(),p);c.fireEvent("contentchange");h.moveToBookmark(q).select(!0);return!0}}else{c.fireEvent("saveScene");
q=h.createBookmark();var u=0;for(g=e.findParents(l);k=g[u++];)if(e.isTagNode(k,"ol ul")){var r=k;break}u=l;if(q.end)for(;u&&!(e.getPosition(u,q.end)&e.POSITION_FOLLOWING);)if(d(u))u=e.getNextDomNode(u,!1,null,function(a){return a!==r});else{k=u.parentNode;g=c.document.createElement(k.tagName);p=n.indexOf(m[g.tagName],a(k)||e.getComputedStyle(k,"list-style-type"));p=p+1==m[g.tagName].length?0:p+1;p=m[g.tagName][p];f(g,p);for(k.insertBefore(g,u);u&&!(e.getPosition(u,q.end)&e.POSITION_FOLLOWING);){l=
u.nextSibling;g.appendChild(u);if(!l||e.isTagNode(l,"ol ul")){if(l)for(;(l=l.firstChild)&&"LI"!=l.tagName;);else l=e.getNextDomNode(u,!1,null,function(a){return a!==r});break}u=l}b(g,g.tagName.toLowerCase(),p);u=l}c.fireEvent("contentchange");h.moveToBookmark(q).select();return!0}});c.commands.insertorderedlist=c.commands.insertunorderedlist={execCommand:function(c,d){var k;d||(d="insertorderedlist"==c.toLowerCase()?"decimal":"disc");var g=this.selection.getRange();var m=function(a){return 1==a.nodeType?
"br"!=a.tagName.toLowerCase():!e.isWhitespace(a)};var p="insertorderedlist"==c.toLowerCase()?"ol":"ul",q=this.document.createDocumentFragment();g.adjustmentBoundary().shrinkBoundary();var u=g.createBookmark(!0),w=h(this.document.getElementById(u.start)),x=0;var n=h(this.document.getElementById(u.end));var r=0,t,A;if(w||n){w&&(t=w.parentNode);u.end||(n=w);n&&(A=n.parentNode);if(t===A){for(;w!==n;){var C=w;w=w.nextSibling;if(!e.isBlockElm(C.firstChild)){for(m=this.document.createElement("p");C.firstChild;)m.appendChild(C.firstChild);
C.appendChild(m)}q.appendChild(C)}C=this.document.createElement("span");t.insertBefore(C,n);if(!e.isBlockElm(n.firstChild)){for(m=this.document.createElement("p");n.firstChild;)m.appendChild(n.firstChild);n.appendChild(m)}q.appendChild(n);e.breakParent(C,t);e.isEmptyNode(C.previousSibling)&&e.remove(C.previousSibling);e.isEmptyNode(C.nextSibling)&&e.remove(C.nextSibling);m=a(t)||e.getComputedStyle(t,"list-style-type")||("insertorderedlist"==c.toLowerCase()?"decimal":"disc");if(t.tagName.toLowerCase()==
p&&m==d){n=0;for(n=this.document.createDocumentFragment();m=q.firstChild;)if(e.isTagNode(m,"ol ul"))n.appendChild(m);else for(;m.firstChild;)n.appendChild(m.firstChild),e.remove(m);C.parentNode.insertBefore(n,C)}else{var B=this.document.createElement(p);f(B,d);B.appendChild(q);C.parentNode.insertBefore(B,C)}e.remove(C);B&&b(B,p,d);g.moveToBookmark(u).select();return}if(w){for(;w;){C=w.nextSibling;if(e.isTagNode(w,"ol ul"))q.appendChild(w);else{B=this.document.createDocumentFragment();for(k=0;w.firstChild;)e.isBlockElm(w.firstChild)&&
(k=1),B.appendChild(w.firstChild);k?q.appendChild(B):(k=this.document.createElement("p"),k.appendChild(B),q.appendChild(k));e.remove(w)}w=C}t.parentNode.insertBefore(q,t.nextSibling);e.isEmptyNode(t)?(g.setStartBefore(t),e.remove(t)):g.setStartAfter(t);x=1}if(n&&e.inDoc(A,this.document)){for(w=A.firstChild;w&&w!==n;){C=w.nextSibling;if(e.isTagNode(w,"ol ul"))q.appendChild(w);else{B=this.document.createDocumentFragment();for(k=0;w.firstChild;)e.isBlockElm(w.firstChild)&&(k=1),B.appendChild(w.firstChild);
k?q.appendChild(B):(k=this.document.createElement("p"),k.appendChild(B),q.appendChild(k));e.remove(w)}w=C}C=e.createElement(this.document,"div",{tmpDiv:1});e.moveChild(n,C);q.appendChild(C);e.remove(n);A.parentNode.insertBefore(q,A);g.setEndBefore(A);e.isEmptyNode(A)&&e.remove(A);r=1}}x||g.setStartBefore(this.document.getElementById(u.start));u.end&&!r&&g.setEndAfter(this.document.getElementById(u.end));g.enlarge(!0,function(a){return l[a.tagName]});q=this.document.createDocumentFragment();t=g.createBookmark();
B=e.getNextDomNode(t.start,!1,m);w=g.cloneRange();for(x=e.isBlockElm;B&&B!==t.end&&e.getPosition(B,t.end)&e.POSITION_PRECEDING;)if(3==B.nodeType||z.li[B.tagName])if(1==B.nodeType&&z.$list[B.tagName]){for(;B.firstChild;)q.appendChild(B.firstChild);n=e.getNextDomNode(B,!1,m);e.remove(B);B=n}else{n=B;for(w.setStartBefore(B);B&&B!==t.end&&(!x(B)||e.isBookmarkNode(B));)n=B,B=e.getNextDomNode(B,!1,null,function(a){return!l[a.tagName]});B&&x(B)&&(C=e.getNextDomNode(n,!1,m))&&e.isBookmarkNode(C)&&(B=e.getNextDomNode(C,
!1,m),n=C);w.setEndAfter(n);B=e.getNextDomNode(n,!1,m);C=g.document.createElement("li");C.appendChild(w.extractContents());if(e.isEmptyNode(C)){for(n=g.document.createElement("p");C.firstChild;)n.appendChild(C.firstChild);C.appendChild(n)}q.appendChild(C)}else B=e.getNextDomNode(B,!0,m);g.moveToBookmark(t).collapse(!0);B=this.document.createElement(p);f(B,d);B.appendChild(q);g.insertNode(B);b(B,p,d);n=0;for(p=e.getElementsByTagName(B,"div");m=p[n++];)m.getAttribute("tmpDiv")&&e.remove(m,!0);g.moveToBookmark(u).select()},
queryCommandState:function(a){a="insertorderedlist"==a.toLowerCase()?"ol":"ul";for(var c=this.selection.getStartElementPath(),b=0,f;(f=c[b++])&&"TABLE"!=f.nodeName;)if(a==f.nodeName.toLowerCase())return 1;return 0},queryCommandValue:function(c){c="insertorderedlist"==c.toLowerCase()?"ol":"ul";for(var b=this.selection.getStartElementPath(),f,d=0,h;h=b[d++];){if("TABLE"==h.nodeName){f=null;break}if(c==h.nodeName.toLowerCase()){f=h;break}}return f?a(f)||e.getComputedStyle(f,"list-style-type"):null}}};
UE.plugins.enterkey=function(){var g,a=this,d=a.options.enterTag;a.addListener("keyup",function(b,f){if(13==(f.keyCode||f.which)){var d=a.selection.getRange(),h=d.startContainer;if(t.ie)a.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(g)){if(t.gecko){if(!e.findParentByTagName(h,"h1 h2 h3 h4 h5 h6 blockquote caption table".split(" "),!0)){a.document.execCommand("formatBlock",!1,"<p>");var c=1}}else if(1==h.nodeType){var h=a.document.createTextNode(""),l;d.insertNode(h);if(l=e.findParentByTagName(h,
"div",!0)){for(c=a.document.createElement("p");l.firstChild;)c.appendChild(l.firstChild);l.parentNode.insertBefore(c,l);e.remove(l);d.setStartBefore(h).setCursor();c=1}e.remove(h)}a.undoManger&&c&&a.undoManger.save()}t.opera&&d.select()}}});a.addListener("keydown",function(b,f){if(13==(f.keyCode||f.which))if(a.fireEvent("beforeenterkeydown"))e.preventDefault(f);else{a.fireEvent("saveScene",!0,!0);g="";var k=a.selection.getRange();if(!k.collapsed){var h=k.startContainer;var c=k.endContainer;h=e.findParentByTagName(h,
"td",!0);c=e.findParentByTagName(c,"td",!0);if(h&&c&&h!==c||!h&&c||h&&!c){f.preventDefault?f.preventDefault():f.returnValue=!1;return}}if("p"==d)t.ie||((h=e.findParentByTagName(k.startContainer,"ol ul p h1 h2 h3 h4 h5 h6 blockquote caption".split(" "),!0))||t.opera?(g=h.tagName,"p"==h.tagName.toLowerCase()&&t.gecko&&e.removeDirtyAttr(h)):(a.document.execCommand("formatBlock",!1,"<p>"),t.gecko&&(k=a.selection.getRange(),(h=e.findParentByTagName(k.startContainer,"p",!0))&&e.removeDirtyAttr(h))));else if(f.preventDefault?
f.preventDefault():f.returnValue=!1,k.collapsed)c=k.document.createElement("br"),k.insertNode(c),c.parentNode.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),k.setStartBefore(c)):k.setStartAfter(c),k.setCursor();else if(k.deleteContents(),h=k.startContainer,1==h.nodeType&&(h=h.childNodes[k.startOffset])){for(;1==h.nodeType;){if(z.$empty[h.tagName])return k.setStartBefore(h).setCursor(),a.undoManger&&a.undoManger.save(),!1;if(!h.firstChild)return c=k.document.createElement("br"),h.appendChild(c),
k.setStart(h,0).setCursor(),a.undoManger&&a.undoManger.save(),!1;h=h.firstChild}h===k.startContainer.childNodes[k.startOffset]?(c=k.document.createElement("br"),k.insertNode(c).setCursor()):k.setStart(h,0).setCursor()}else c=k.document.createElement("br"),k.insertNode(c).setStartAfter(c).setCursor()}})};UE.plugins.keystrokes=function(){var g=this,a=!0;g.addListener("keydown",function(d,b){var f=b.keyCode||b.which;var k=g.selection.getRange();if(!(k.collapsed||b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)&&
(65<=f&&90>=f||48<=f&&57>=f||96<=f&&111>=f||{13:1,8:1,46:1}[f])){var h=k.startContainer;e.isFillChar(h)&&k.setStartBefore(h);h=k.endContainer;e.isFillChar(h)&&k.setEndAfter(h);k.txtToElmBoundary();k.endContainer&&1==k.endContainer.nodeType&&(h=k.endContainer.childNodes[k.endOffset])&&e.isBr(h)&&k.setEndAfter(h);if(0==k.startOffset&&(h=k.startContainer,e.isBoundaryNode(h,"firstChild")&&(h=k.endContainer,k.endOffset==(3==h.nodeType?h.nodeValue.length:h.childNodes.length)&&e.isBoundaryNode(h,"lastChild")))){g.fireEvent("saveScene");
g.body.innerHTML="<p>"+(t.ie?"":"<br/>")+"</p>";k.setStart(g.body.firstChild,0).setCursor(!1,!0);g._selectionChange();return}}if(f==S.Backspace){k=g.selection.getRange();a=k.collapsed;if(g.fireEvent("delkeydown",b))return;if(k.collapsed&&k.inFillChar()){var c=k.startContainer;e.isFillChar(c)?(k.setStartBefore(c).shrinkBoundary(!0).collapse(!0),e.remove(c)):(c.nodeValue=c.nodeValue.replace(new RegExp("^"+e.fillChar),""),k.startOffset--,k.collapse(!0).select(!0))}if(c=k.getClosedNode()){g.fireEvent("saveScene");
k.setStartBefore(c);e.remove(c);k.setCursor();g.fireEvent("saveScene");e.preventDefault(b);return}if(!t.ie){c=e.findParentByTagName(k.startContainer,"table",!0);var l=e.findParentByTagName(k.endContainer,"table",!0);if(c&&!l||!c&&l||c!==l){b.preventDefault();return}}}if(f==S.Tab){var p={ol:1,ul:1,table:1};if(g.fireEvent("tabkeydown",b)){e.preventDefault(b);return}k=g.selection.getRange();g.fireEvent("saveScene");var h=0,m="";c=g.options.tabSize||4;for(l=g.options.tabNode||"&nbsp;";h<c;h++)m+=l;h=
g.document.createElement("span");h.innerHTML=m+e.fillChar;if(k.collapsed)k.insertNode(h.cloneNode(!0).firstChild).setCursor(!0);else if(m=function(a){return e.isBlockElm(a)&&!p[a.tagName.toLowerCase()]},c=e.findParent(k.startContainer,m,!0),l=e.findParent(k.endContainer,m,!0),c&&l&&c===l)k.deleteContents(),k.insertNode(h.cloneNode(!0).firstChild).setCursor(!0);else{c=k.createBookmark();k.enlarge(!0);l=k.createBookmark();for(var q=e.getNextDomNode(l.start,!1,m);q&&!(e.getPosition(q,l.end)&e.POSITION_FOLLOWING);)q.insertBefore(h.cloneNode(!0).firstChild,
q.firstChild),q=e.getNextDomNode(q,!1,m);k.moveToBookmark(l).moveToBookmark(c).select()}e.preventDefault(b)}if(t.gecko&&46==f&&(k=g.selection.getRange(),k.collapsed&&(c=k.startContainer,e.isEmptyBlock(c)))){for(f=c.parentNode;1==e.getChildCount(f)&&!e.isBody(f);)c=f,f=f.parentNode;c===f.lastChild&&b.preventDefault()}});g.addListener("keyup",function(d,b){var f;if((b.keyCode||b.which)==S.Backspace&&!this.fireEvent("delkeyup")){var k=this.selection.getRange();if(k.collapsed){if((f=e.findParentByTagName(k.startContainer,
"h1 h2 h3 h4 h5 h6".split(" "),!0))&&e.isEmptyBlock(f)){var h=f.previousSibling;if(h&&"TABLE"!=h.nodeName){e.remove(f);k.setStartAtLast(h).setCursor(!1,!0);return}if((h=f.nextSibling)&&"TABLE"!=h.nodeName){e.remove(f);k.setStartAtFirst(h).setCursor(!1,!0);return}}e.isBody(k.startContainer)&&(f=e.createElement(this.document,"p",{innerHTML:t.ie?e.fillChar:"<br/>"}),k.insertNode(f).setStart(f,0).setCursor(!1,!0))}!a&&(3==k.startContainer.nodeType||1==k.startContainer.nodeType&&e.isEmptyBlock(k.startContainer))&&
(t.ie?(f=k.document.createElement("span"),k.insertNode(f).setStartBefore(f).collapse(!0),k.select(),e.remove(f)):k.select())}})};UE.plugin.register("autolink",function(){return t.ie?{}:{bindEvents:{reset:function(){},keydown:function(g,a){var d;var b=a.keyCode||a.which;if(!1!==this.options.autoLink&&(32==b||13==b)){b=this.selection.getNative();var f=b.getRangeAt(0).cloneRange();for(d=f.startContainer;1==d.nodeType&&0<f.startOffset;){d=f.startContainer.childNodes[f.startOffset-1];if(!d)break;f.setStart(d,
1==d.nodeType?d.childNodes.length:d.nodeValue.length);f.collapse(!0);d=f.startContainer}do{if(0==f.startOffset){for(d=f.startContainer.previousSibling;d&&1==d.nodeType;)d=d.lastChild;if(!d||e.isFillChar(d))break;var k=d.nodeValue.length}else d=f.startContainer,k=f.startOffset;f.setStart(d,k-1);d=f.toString().charCodeAt(0)}while(160!=d&&32!=d);if(f.toString().replace(new RegExp(e.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;f.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(f.toString());)try{f.setStart(f.startContainer,
f.startOffset+1)}catch(c){for(d=f.startContainer;!(next=d.nextSibling);){if(e.isBody(d))return;d=d.parentNode}f.setStart(next,0)}if(!e.findParentByTagName(f.startContainer,"a",!0)){d=this.document.createElement("a");k=this.document.createTextNode(" ");this.undoManger&&this.undoManger.save();d.appendChild(f.extractContents());d.href=d.innerHTML=d.innerHTML.replace(/<[^>]+>/g,"");var h=d.getAttribute("href").replace(new RegExp(e.fillChar,"g"),"");h=/^(?:https?:\/\/)/ig.test(h)?h:"http://"+h;d.setAttribute("_src",
n.html(h));d.href=n.html(h);f.insertNode(d);d.parentNode.insertBefore(k,d.nextSibling);f.setStart(k,0);f.collapse(!0);b.removeAllRanges();b.addRange(f);this.undoManger&&this.undoManger.save()}}}}}}},function(){function g(a){if(3==a.nodeType)return null;if("A"==a.nodeName)return a;for(a=a.lastChild;a;){if("A"==a.nodeName)return a;if(3==a.nodeType){if(e.isWhitespace(a)){a=a.previousSibling;continue}return null}a=a.lastChild}}var a={37:1,38:1,39:1,40:1,13:1,32:1};t.ie&&this.addListener("keyup",function(d,
b){var f=b.keyCode;if(a[f]){var k=this.selection.getRange();var h=k.startContainer;if(13==f){for(;h&&!e.isBody(h)&&!e.isBlockElm(h);)h=h.parentNode;h&&!e.isBody(h)&&"P"==h.nodeName&&(k=h.previousSibling)&&1==k.nodeType&&(k=g(k))&&!k.getAttribute("_href")&&e.remove(k,!0)}else 32==f?3==h.nodeType&&/^\s$/.test(h.nodeValue)&&(h=h.previousSibling)&&"A"==h.nodeName&&!h.getAttribute("_href")&&e.remove(h,!0):(h=e.findParentByTagName(h,"a",!0))&&!h.getAttribute("_href")&&(f=k.createBookmark(),e.remove(h,!0),
k.moveToBookmark(f).select(!0))}})});UE.plugins.autoheight=function(){function g(){var a=this;clearTimeout(h);c||a.queryCommandState&&(!a.queryCommandState||1==a.queryCommandState("source"))||(h=setTimeout(function(){for(var c=a.body.lastChild;c&&1!=c.nodeType;)c=c.previousSibling;c&&1==c.nodeType&&(c.style.clear="both",k=Math.max(e.getXY(c).y+c.offsetHeight+25,Math.max(f.minFrameHeight,f.initialFrameHeight)),k!=b&&(k!==parseInt(a.iframe.parentNode.style.height)&&(a.iframe.parentNode.style.height=
k+"px"),a.body.style.height=k+"px",b=k),e.removeStyle(c,"clear"))},50))}var a=this;a.autoHeightEnabled=!1!==a.options.autoHeightEnabled;if(a.autoHeightEnabled){var d,b=0,f=a.options,k,h,c;a.addListener("fullscreenchanged",function(a,b){c=b});a.addListener("destroy",function(){a.removeListener("contentchange afterinserthtml keyup mouseup",g)});a.enableAutoHeight=function(){var a=this;if(a.autoHeightEnabled){var c=a.document;a.autoHeightEnabled=!0;d=c.body.style.overflowY;c.body.style.overflowY="hidden";
a.addListener("contentchange afterinserthtml keyup mouseup",g);setTimeout(function(){g.call(a)},t.gecko?100:0);a.fireEvent("autoheightchanged",a.autoHeightEnabled)}};a.disableAutoHeight=function(){a.body.style.overflowY=d||"";a.removeListener("contentchange",g);a.removeListener("keyup",g);a.removeListener("mouseup",g);a.autoHeightEnabled=!1;a.fireEvent("autoheightchanged",a.autoHeightEnabled)};a.on("setHeight",function(){a.disableAutoHeight()});a.addListener("ready",function(){a.enableAutoHeight();
var c;e.on(t.ie?a.body:a.document,t.webkit?"dragover":"drop",function(){clearTimeout(c);c=setTimeout(function(){g.call(a)},100)});var b;window.onscroll=function(){null===b?b=this.scrollY:0==this.scrollY&&0!=b&&(a.window&&a.window.scrollTo(0,0),b=null)}})}};UE.plugins.autofloat=function(){function g(){var a=document.body.style;a.backgroundImage='url("about:blank")';a.backgroundAttachment="fixed"}function a(){x=!0;m.parentNode&&m.parentNode.removeChild(m);q.style.cssText=p}function d(){var f=w(b.container),
d=b.options.toolbarTopOffset||0;if(0>f.top&&f.bottom-q.offsetHeight>d){var f=e.getXY(q),d=e.getComputedStyle(q,"position"),h=e.getComputedStyle(q,"left");q.style.width=q.offsetWidth+"px";q.style.zIndex=1*b.options.zIndex+1;q.parentNode.insertBefore(m,q);c||l&&t.ie?("absolute"!=q.style.position&&(q.style.position="absolute"),q.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-u+k+"px"):(t.ie7Compat&&x&&(x=!1,q.style.left=e.getXY(q).x-document.documentElement.getBoundingClientRect().left+
2+"px"),"fixed"!=q.style.position&&(q.style.position="fixed",q.style.top=k+"px",("absolute"==d||"relative"==d)&&parseFloat(h)&&(q.style.left=f.x+"px")))}else a()}var b=this,f=b.getLang();b.setOpt({topOffset:0});var k=b.options.topOffset;if(!1!==b.options.autoFloatEnabled){var h=UE.ui.uiUtils,c=t.ie&&6>=t.version,l=t.quirks,p,m=document.createElement("div"),q,u,w,x=!0,v=n.defer(function(){d()},t.ie?200:100,!0);b.addListener("destroy",function(){e.un(window,["scroll","resize"],d);b.removeListener("keydown",
v)});b.addListener("ready",function(){if(UE.ui)var l=1;else alert(f.autofloatMsg),l=0;l&&b.ui&&(w=h.getClientRect,q=b.ui.getDom("toolbarbox"),u=w(q).top,p=q.style.cssText,m.style.height=q.offsetHeight+"px",c&&g(),e.on(window,["scroll","resize"],d),b.addListener("keydown",v),b.addListener("beforefullscreenchange",function(c,b){b&&a()}),b.addListener("fullscreenchanged",function(a,c){c||d()}),b.addListener("sourcemodechanged",function(a,c){setTimeout(function(){d()},0)}),b.addListener("clearDoc",function(){setTimeout(function(){d()},
0)}))})}};UE.plugins.video=function(){function e(a,f,e,h,c,l){return l?'<iframe class="edui-faked-video" src="'+a+'" width="'+f+'" height="'+e+'"'+(c?' style="float:'+c+'"':"")+' allowfullscreen="true" ></ifame>':"<img "+(h?'id="'+h+'"':"")+' width="'+f+'" height="'+e+'" _url="'+a+'" class="edui-faked-video" src="'+d.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+d.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+
(c?"float:"+c+";":"")+'" />'}function a(a,f){n.each(a.getNodesByTagName(f?"img":"embed"),function(a){if("edui-faked-video"==a.getAttr("class")){var b=e(f?a.getAttr("_url"):a.getAttr("src"),a.getAttr("width"),a.getAttr("height"),null,a.getStyle("float")||"",f);a.parentNode.replaceChild(UE.uNode.createElement(b),a)}})}var d=this;d.addOutputRule(function(b){a(b,!0)});d.addInputRule(function(b){a(b)});d.commands.insertvideo={execCommand:function(a,f){var b=window.__ueditor_video;b?new b({callback:function(a){a.html?
d.execCommand("inserthtml",a.html,!0):(a=e(a.url,a.width||300,a.height||225,null,null,!1),d.execCommand("inserthtml",a,!0))}}):console.warn("\u4f60\u9700\u8981\u5728\u9875\u9762\u4e2d\u5f15\u5165\u5bcc\u6587\u672c\u7684\u63d2\u4ef6\u3002require\uff08'components/ueditor_plugins/app')")},queryCommandState:function(){var a=d.selection.getRange().getClosedNode();return a&&"edui-faked-video"==a.className?1:0}}};(function(){var g=UE.UETable=function(a){this.table=a;this.indexTable=[];this.selectedTds=[];
this.cellsRange={};this.update(a)};g.removeSelectedClass=function(a){n.each(a,function(a){e.removeClasses(a,"selectTdClass")})};g.addSelectedClass=function(a){n.each(a,function(a){e.addClass(a,"selectTdClass")})};g.isEmptyBlock=function(a){var d=new RegExp(e.fillChar,"g");if(0<a[t.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(d,"").length)return 0;for(var b in z.$isNotEmpty)if(z.$isNotEmpty.hasOwnProperty(b)&&a.getElementsByTagName(b).length)return 0;return 1};g.getWidth=function(a){return a?
parseInt(e.getComputedStyle(a,"width"),10):0};g.getTableCellAlignState=function(a){!n.isArray(a)&&(a=[a]);var d={},b=["align","valign"],f=null,e=!0;n.each(a,function(a){n.each(b,function(c){f=a.getAttribute(c);if(!d[c]&&f)d[c]=f;else if(!d[c]||f!==d[c])return e=!1});return e});return e?d:null};g.getTableItemsByRange=function(a){var d=a.selection.getStart();d&&d.id&&0===d.id.indexOf("_baidu_bookmark_start_")&&d.nextSibling&&(d=d.nextSibling);var b=(a=d&&e.findParentByTagName(d,["td","th"],!0))&&a.parentNode,
d=d&&e.findParentByTagName(d,"caption",!0);return{cell:a,tr:b,table:d?d.parentNode:b&&b.parentNode.parentNode,caption:d}};g.getUETableBySelected=function(a){return(a=g.getTableItemsByRange(a).table)&&a.ueTable&&a.ueTable.selectedTds.length?a.ueTable:null};g.getDefaultValue=function(a,d){var b={thin:"0px",medium:"1px",thick:"2px"};if(d){var f=d.getElementsByTagName("td")[0];var g=e.getComputedStyle(d,"border-left-width");var h=parseInt(b[g]||g,10);g=e.getComputedStyle(f,"padding-left");var c=parseInt(b[g]||
g,10);g=e.getComputedStyle(f,"border-left-width");f=parseInt(b[g]||g,10)}else d=a.document.createElement("table"),d.insertRow(0).insertCell(0).innerHTML="xxx",a.body.appendChild(d),f=d.getElementsByTagName("td")[0],g=e.getComputedStyle(d,"border-left-width"),h=parseInt(b[g]||g,10),g=e.getComputedStyle(f,"padding-left"),c=parseInt(b[g]||g,10),g=e.getComputedStyle(f,"border-left-width"),f=parseInt(b[g]||g,10),e.remove(d);return{tableBorder:h,tdPadding:c,tdBorder:f}};g.getUETable=function(a){var d=a.tagName.toLowerCase();
a="td"==d||"th"==d||"caption"==d?e.findParentByTagName(a,"table",!0):a;a.ueTable||(a.ueTable=new g(a));return a.ueTable};g.cloneCell=function(a,d,b){if(!a||n.isString(a))return this.table.ownerDocument.createElement(a||"td");var f=e.hasClass(a,"selectTdClass");f&&e.removeClasses(a,"selectTdClass");var g=a.cloneNode(!0);d&&(g.rowSpan=g.colSpan=1);!b&&e.removeAttributes(g,"width height");!b&&e.removeAttributes(g,"style");g.style.borderLeftStyle="";g.style.borderTopStyle="";g.style.borderLeftColor=a.style.borderRightColor;
g.style.borderLeftWidth=a.style.borderRightWidth;g.style.borderTopColor=a.style.borderBottomColor;g.style.borderTopWidth=a.style.borderBottomWidth;f&&e.addClass(a,"selectTdClass");return g};g.prototype={getMaxRows:function(){for(var a=this.table.rows,d=1,b=0,f;f=a[b];b++){for(var e=1,h=0,c;c=f.cells[h++];)e=Math.max(c.rowSpan||1,e);d=Math.max(e+b,d)}return d},getMaxCols:function(){for(var a=this.table.rows,d=0,b={},f=0,e;e=a[f];f++){for(var h=0,c=0,l;l=e.cells[c++];)if(h+=l.colSpan||1,l.rowSpan&&
1<l.rowSpan)for(var g=1;g<l.rowSpan;g++)b["row_"+(f+g)]?b["row_"+(f+g)]++:b["row_"+(f+g)]=l.colSpan||1;h+=b["row_"+f]||0;d=Math.max(h,d)}return d},getCellColIndex:function(a){},getHSideCell:function(a,d){try{var b=this.getCellInfo(a),f=this.selectedTds.length,e=this.cellsRange;if(!d&&(f?!e.beginColIndex:!b.colIndex)||d&&(f?e.endColIndex==this.colsNum-1:b.colIndex==this.colsNum-1))return null;var h=f?e.beginRowIndex:b.rowIndex;var c=d?f?e.endColIndex+1:b.colIndex+1:f?e.beginColIndex-1:1>b.colIndex?
0:b.colIndex-1;return this.getCell(this.indexTable[h][c].rowIndex,this.indexTable[h][c].cellIndex)}catch(l){}},getTabNextCell:function(a,d){var b=this.getCellInfo(a),f=d||b.rowIndex,b=b.colIndex+1+(b.colSpan-1);try{var e=this.getCell(this.indexTable[f][b].rowIndex,this.indexTable[f][b].cellIndex)}catch(h){try{f=1*f+1,b=0,e=this.getCell(this.indexTable[f][b].rowIndex,this.indexTable[f][b].cellIndex)}catch(c){}}return e},getVSideCell:function(a,d,b){try{var f=this.getCellInfo(a),e=this.selectedTds.length&&
!b,h=this.cellsRange;if(!d&&0==f.rowIndex||d&&(e?h.endRowIndex==this.rowsNum-1:f.rowIndex+f.rowSpan>this.rowsNum-1))return null;var c=d?e?h.endRowIndex+1:f.rowIndex+f.rowSpan:e?h.beginRowIndex-1:f.rowIndex-1;var l=e?h.beginColIndex:f.colIndex;return this.getCell(this.indexTable[c][l].rowIndex,this.indexTable[c][l].cellIndex)}catch(p){}},getSameEndPosCells:function(a,d){try{for(var b="x"===d.toLowerCase(),f=e.getXY(a)[b?"x":"y"]+a["offset"+(b?"Width":"Height")],g=this.table.rows,h=null,c=[],l=0;l<
this.rowsNum;l++)for(var h=g[l].cells,p=0,m;m=h[p++];){var q=e.getXY(m)[b?"x":"y"]+m["offset"+(b?"Width":"Height")];if(q>f&&b)break;if(a==m||f==q)if(1==m[b?"colSpan":"rowSpan"]&&c.push(m),b)break}return c}catch(u){}},setCellContent:function(a,d){a.innerHTML=d||(t.ie?e.fillChar:"<br />")},cloneCell:g.cloneCell,getSameStartPosXCells:function(a){try{var d=e.getXY(a).x+a.offsetWidth,b=this.table.rows;a=[];for(var f=0;f<this.rowsNum;f++){var g=b[f].cells;for(var h=0,c;c=g[h++];){var l=e.getXY(c).x;if(l>
d)break;if(l==d&&1==c.colSpan){a.push(c);break}}}return a}catch(p){}},update:function(a){this.table=a||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];a=this.table.rows;for(var d=this.getMaxRows(),b=d-a.length,f=this.getMaxCols();b--;)this.table.insertRow(a.length);this.rowsNum=d;this.colsNum=f;for(var b=0,g=a.length;b<g;b++)this.indexTable[b]=Array(f);for(var b=0,h;h=a[b];b++){var g=0,c;for(h=h.cells;c=h[g];g++){c.rowSpan>d&&(c.rowSpan=d);var l=g,p=c.rowSpan||1;for(c=c.colSpan||
1;this.indexTable[b][l];)l++;for(var m=0;m<p;m++)for(var q=0;q<c;q++)this.indexTable[b+m][l+q]={rowIndex:b,cellIndex:g,colIndex:l,rowSpan:p,colSpan:c}}}for(m=0;m<d;m++)for(q=0;q<f;q++)void 0===this.indexTable[m][q]&&(h=a[m],c=(c=h.cells[h.cells.length-1])?c.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(c),1!==c.colSpan&&(c.colSpan=1),1!==c.rowSpan&&(c.rowSpan=1),h.appendChild(c),this.indexTable[m][q]={rowIndex:m,cellIndex:c.cellIndex,colIndex:q,rowSpan:1,colSpan:1});
a=e.getElementsByTagName(this.table,"td");var u=[];n.each(a,function(a){e.hasClass(a,"selectTdClass")&&u.push(a)});u.length&&(d=u[u.length-1],a=this.getCellInfo(u[0]),d=this.getCellInfo(d),this.selectedTds=u,this.cellsRange={beginRowIndex:a.rowIndex,beginColIndex:a.colIndex,endRowIndex:d.rowIndex+d.rowSpan-1,endColIndex:d.colIndex+d.colSpan-1});if(!e.hasClass(this.table.rows[0],"firstRow"))for(e.addClass(this.table.rows[0],"firstRow"),b=1;b<this.table.rows.length;b++)e.removeClasses(this.table.rows[b],
"firstRow")},getCellInfo:function(a){if(a){var d=a.cellIndex;a=a.parentNode.rowIndex;for(var b=this.indexTable[a],f=this.colsNum,e=d;e<f;e++){var h=b[e];if(h.rowIndex===a&&h.cellIndex===d)return h}}},getCell:function(a,d){return a<this.rowsNum&&this.table.rows[a].cells[d]||null},deleteCell:function(a,d){d="number"==typeof d?d:a.parentNode.rowIndex;this.table.rows[d].deleteCell(a.cellIndex)},getCellsRange:function(a,d){function b(a,d,h,e){var c=a,l=d,g=h,m=e,k;if(0<a)for(k=d;k<e;k++){var p=f.indexTable[a][k];
var n=p.rowIndex;n<a&&(c=Math.min(n,c))}if(e<f.colsNum)for(n=a;n<h;n++)p=f.indexTable[n][e],k=p.colIndex+p.colSpan-1,k>e&&(m=Math.max(k,m));if(h<f.rowsNum)for(k=d;k<e;k++)p=f.indexTable[h][k],n=p.rowIndex+p.rowSpan-1,n>h&&(g=Math.max(n,g));if(0<d)for(n=a;n<h;n++)p=f.indexTable[n][d],k=p.colIndex,k<d&&(l=Math.min(p.colIndex,l));return c!=a||l!=d||g!=h||m!=e?b(c,l,g,m):{beginRowIndex:a,beginColIndex:d,endRowIndex:h,endColIndex:e}}try{var f=this;var e=f.getCellInfo(a);if(a===d)return{beginRowIndex:e.rowIndex,
beginColIndex:e.colIndex,endRowIndex:e.rowIndex+e.rowSpan-1,endColIndex:e.colIndex+e.colSpan-1};var h=f.getCellInfo(d);return b(Math.min(e.rowIndex,h.rowIndex),Math.min(e.colIndex,h.colIndex),Math.max(e.rowIndex+e.rowSpan-1,h.rowIndex+h.rowSpan-1),Math.max(e.colIndex+e.colSpan-1,h.colIndex+h.colSpan-1))}catch(c){}},getCells:function(a){this.clearSelected();for(var d=a.beginColIndex,b=a.endRowIndex,f=a.endColIndex,e,h,c={},l=[],g=a.beginRowIndex;g<=b;g++)for(var m=d;m<=f;m++){a=this.indexTable[g][m];
e=a.rowIndex;h=a.colIndex;var q=e+"|"+h;if(!c[q]){c[q]=1;if(e<g||h<m||e+a.rowSpan-1>b||h+a.colSpan-1>f)return null;l.push(this.getCell(e,a.cellIndex))}}return l},clearSelected:function(){g.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(a){var d=this.getCells(a);g.addSelectedClass(d);this.selectedTds=d;this.cellsRange=a},isFullRow:function(){var a=this.cellsRange;return a.endColIndex-a.beginColIndex+1==this.colsNum},isFullCol:function(){var a=this.cellsRange,
d=this.table.getElementsByTagName("th"),a=a.endRowIndex-a.beginRowIndex+1;return d.length?a==this.rowsNum||a==this.rowsNum-1:a==this.rowsNum},getNextCell:function(a,d,b){try{var f=this.getCellInfo(a),e=this.selectedTds.length&&!b,h=this.cellsRange;if(!d&&0==f.rowIndex||d&&(e?h.endRowIndex==this.rowsNum-1:f.rowIndex+f.rowSpan>this.rowsNum-1))return null;var c=d?e?h.endRowIndex+1:f.rowIndex+f.rowSpan:e?h.beginRowIndex-1:f.rowIndex-1;var l=e?h.beginColIndex:f.colIndex;return this.getCell(this.indexTable[c][l].rowIndex,
this.indexTable[c][l].cellIndex)}catch(p){}},getPreviewCell:function(a,d){try{var b=this.getCellInfo(a),f=this.selectedTds.length,e=this.cellsRange;if(!d&&(f?!e.beginColIndex:!b.colIndex)||d&&(f?e.endColIndex==this.colsNum-1:b.rowIndex>this.colsNum-1))return null;var h=d?f?e.beginRowIndex:1>b.rowIndex?0:b.rowIndex-1:f?e.beginRowIndex:b.rowIndex;var c=d?f?e.endColIndex+1:b.colIndex:f?e.beginColIndex-1:1>b.colIndex?0:b.colIndex-1;return this.getCell(this.indexTable[h][c].rowIndex,this.indexTable[h][c].cellIndex)}catch(l){}},
moveContent:function(a,d){if(!g.isEmptyBlock(d))if(g.isEmptyBlock(a))a.innerHTML=d.innerHTML;else{var b=a.lastChild;for(3!=b.nodeType&&z.$block[b.tagName]||a.appendChild(a.ownerDocument.createElement("br"));b=d.firstChild;)a.appendChild(b)}},mergeRight:function(a){var d=this.getCellInfo(a),b=this.indexTable[d.rowIndex][d.colIndex+d.colSpan],f=this.getCell(b.rowIndex,b.cellIndex);a.colSpan=d.colSpan+b.colSpan;a.removeAttribute("width");this.moveContent(a,f);this.deleteCell(f,b.rowIndex);this.update()},
mergeDown:function(a){var d=this.getCellInfo(a),b=this.indexTable[d.rowIndex+d.rowSpan][d.colIndex],f=this.getCell(b.rowIndex,b.cellIndex);a.rowSpan=d.rowSpan+b.rowSpan;a.removeAttribute("height");this.moveContent(a,f);this.deleteCell(f,b.rowIndex);this.update()},mergeRange:function(){var a=this.cellsRange,d=this.getCell(a.beginRowIndex,this.indexTable[a.beginRowIndex][a.beginColIndex].cellIndex);if("TH"==d.tagName&&a.endRowIndex!==a.beginRowIndex)var b=this.indexTable,a=this.getCellInfo(d),d=this.getCell(1,
b[1][a.colIndex].cellIndex),a=this.getCellsRange(d,this.getCell(b[this.rowsNum-1][a.colIndex].rowIndex,b[this.rowsNum-1][a.colIndex].cellIndex));for(var f=this.getCells(a),b=0,e;e=f[b++];)e!==d&&(this.moveContent(d,e),this.deleteCell(e));d.rowSpan=a.endRowIndex-a.beginRowIndex+1;1<d.rowSpan&&d.removeAttribute("height");d.colSpan=a.endColIndex-a.beginColIndex+1;1<d.colSpan&&d.removeAttribute("width");d.rowSpan==this.rowsNum&&1!=d.colSpan&&(d.colSpan=1);if(d.colSpan==this.colsNum&&1!=d.rowSpan){f=d.parentNode.rowIndex;
if(this.table.deleteRow)for(b=f+1,f+=1,a=d.rowSpan;b<a;b++)this.table.deleteRow(f);else for(b=0,a=d.rowSpan-1;b<a;b++)e=this.table.rows[f+1],e.parentNode.removeChild(e);d.rowSpan=1}this.update()},insertRow:function(a,d){function b(a,c,b){0==a?(a=(b.nextSibling||b.previousSibling).cells[a],"TH"==a.tagName&&(a=c.ownerDocument.createElement("th"),a.appendChild(c.firstChild),b.insertBefore(a,c),e.remove(c))):"TH"==c.tagName&&(a=c.ownerDocument.createElement("td"),a.appendChild(c.firstChild),b.insertBefore(a,
c),e.remove(c))}var f=this.colsNum,g=this.table.insertRow(a),h="string"==typeof d&&"TH"==d.toUpperCase();if(0==a||a==this.rowsNum)for(var c=0;c<f;c++){var l=this.cloneCell(d,!0);this.setCellContent(l);l.getAttribute("vAlign")&&l.setAttribute("vAlign",l.getAttribute("vAlign"));g.appendChild(l);h||b(c,l,g)}else for(var p=this.indexTable[a],c=0;c<f;c++){var m=p[c];m.rowIndex<a?(l=this.getCell(m.rowIndex,m.cellIndex),l.rowSpan=m.rowSpan+1):(l=this.cloneCell(d,!0),this.setCellContent(l),g.appendChild(l));
h||b(c,l,g)}this.update();return g},deleteRow:function(a){for(var d,b,f=this.table.rows[a],g=this.indexTable[a],h=this.colsNum,c=0,l=0;l<h;){d=g[l];b=this.getCell(d.rowIndex,d.cellIndex);if(1<b.rowSpan&&d.rowIndex==a){d=b.cloneNode(!0);d.rowSpan=b.rowSpan-1;d.innerHTML="";b.rowSpan=1;var p=a+1,m=this.table.rows[p],p=this.getPreviewMergedCellsNum(p,l)-c;p<l?(p=l-p-1,e.insertAfter(m.cells[p],d)):m.cells.length&&m.insertBefore(d,m.cells[0]);c+=1}l+=b.colSpan||1}a=[];c={};for(l=0;l<h;l++)b=g[l].rowIndex,
d=g[l].cellIndex,m=b+"_"+d,c[m]||(c[m]=1,b=this.getCell(b,d),a.push(b));var q=[];n.each(a,function(a){1==a.rowSpan?a.parentNode.removeChild(a):q.push(a)});n.each(q,function(a){a.rowSpan--});f.parentNode.removeChild(f);this.update()},insertCol:function(a,d,b){function f(a,c,b){0==a?(a=c.nextSibling||c.previousSibling,"TH"==a.tagName&&(a=c.ownerDocument.createElement("th"),a.appendChild(c.firstChild),b.insertBefore(a,c),e.remove(c))):"TH"==c.tagName&&(a=c.ownerDocument.createElement("td"),a.appendChild(c.firstChild),
b.insertBefore(a,c),e.remove(c))}var g=this.rowsNum,h=0,c=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),l="string"==typeof d&&"TH"==d.toUpperCase();if(0==a||a==this.colsNum)for(;h<g;h++){var p=this.table.rows[h];var m=p.cells[0==a?a:p.cells.length];var q=this.cloneCell(d,!0);this.setCellContent(q);q.setAttribute("vAlign",q.getAttribute("vAlign"));m&&q.setAttribute("width",m.getAttribute("width"));a?e.insertAfter(p.cells[p.cells.length-1],q):p.insertBefore(q,
p.cells[0]);l||f(h,q,p)}else for(;h<g;h++)m=this.indexTable[h][a],m.colIndex<a?(q=this.getCell(m.rowIndex,m.cellIndex),q.colSpan=m.colSpan+1):(p=this.table.rows[h],m=p.cells[m.cellIndex],q=this.cloneCell(d,!0),this.setCellContent(q),q.setAttribute("vAlign",q.getAttribute("vAlign")),m&&q.setAttribute("width",m.getAttribute("width")),m?p.insertBefore(q,m):p.appendChild(q)),l||f(h,q,p);this.update();this.updateWidth(c,b||{tdPadding:10,tdBorder:1})},updateWidth:function(a,d){var b=this.table,f=g.getWidth(b)-
2*d.tdPadding-d.tdBorder+a;f<b.ownerDocument.body.offsetWidth?b.setAttribute("width",f):(b=e.getElementsByTagName(this.table,"td th"),n.each(b,function(b){b.setAttribute("width",a)}))},deleteCol:function(a){for(var d=this.indexTable,b=this.table.rows,f=this.table.getAttribute("width"),e=0,h=this.rowsNum,c={},l=0;l<h;){var g=d[l][a],m=g.rowIndex+"_"+g.colIndex;c[m]||(c[m]=1,m=this.getCell(g.rowIndex,g.cellIndex),e||(e=m&&parseInt(m.offsetWidth/m.colSpan,10).toFixed(0)),1<m.colSpan?m.colSpan--:b[l].deleteCell(g.cellIndex),
l+=g.rowSpan||1)}this.table.setAttribute("width",f-e);this.update()},splitToCells:function(a){var d=this;a=this.splitToRows(a);n.each(a,function(a){d.splitToCols(a)})},splitToRows:function(a){var d=this.getCellInfo(a),b=d.rowIndex,f=d.colIndex,e=[];a.rowSpan=1;e.push(a);for(var h=b,c=b+d.rowSpan;h<c;h++)if(h!=b){var l=this.table.rows[h].insertCell(f-this.getPreviewMergedCellsNum(h,f));l.colSpan=d.colSpan;this.setCellContent(l);l.setAttribute("vAlign",a.getAttribute("vAlign"));l.setAttribute("align",
a.getAttribute("align"));a.style.cssText&&(l.style.cssText=a.style.cssText);e.push(l)}this.update();return e},getPreviewMergedCellsNum:function(a,d){for(var b=this.indexTable[a],f=0,e=0;e<d;)var h=b[e].colSpan,f=f+(h-(b[e].rowIndex==a?1:0)),e=e+h;return f},splitToCols:function(a){var d=(a.offsetWidth/a.colSpan-22).toFixed(0),b=this.getCellInfo(a),f=b.rowIndex,g=b.colIndex,h=[];a.colSpan=1;a.setAttribute("width",d);h.push(a);for(var c=g,l=g+b.colSpan;c<l;c++)if(c!=g){var p=this.table.rows[f],m=p.insertCell(this.indexTable[f][c].cellIndex+
1);m.rowSpan=b.rowSpan;this.setCellContent(m);m.setAttribute("vAlign",a.getAttribute("vAlign"));m.setAttribute("align",a.getAttribute("align"));m.setAttribute("width",d);a.style.cssText&&(m.style.cssText=a.style.cssText);if("TH"==a.tagName){var q=a.ownerDocument.createElement("th");q.appendChild(m.firstChild);q.setAttribute("vAlign",a.getAttribute("vAlign"));q.rowSpan=m.rowSpan;p.insertBefore(q,m);e.remove(m)}h.push(m)}this.update();return h},isLastCell:function(a,d,b){d=d||this.rowsNum;b=b||this.colsNum;
a=this.getCellInfo(a);return a.rowIndex+a.rowSpan==d&&a.colIndex+a.colSpan==b},getLastCell:function(a){a=a||this.table.getElementsByTagName("td");this.getCellInfo(a[0]);var d=this,b=a[0],f=b.parentNode,e=0,h=0;n.each(a,function(a){a.parentNode==f&&(h+=a.colSpan||1);e+=a.rowSpan*a.colSpan||1});var c=e/h;n.each(a,function(a){if(d.isLastCell(a,c,h))return b=a,!1});return b},selectRow:function(a){var d=this.indexTable[a];a=this.getCell(d[0].rowIndex,d[0].cellIndex);d=this.getCell(d[this.colsNum-1].rowIndex,
d[this.colsNum-1].cellIndex);a=this.getCellsRange(a,d);this.setSelected(a)},selectTable:function(){var a=this.table.getElementsByTagName("td"),a=this.getCellsRange(a[0],a[a.length-1]);this.setSelected(a)},setBackground:function(a,d){if("string"===typeof d)n.each(a,function(a){a.style.backgroundColor=d});else if("object"===typeof d){d=n.extend({repeat:!0,colorList:["#ddd","#fff"]},d);for(var b=this.getCellInfo(a[0]).rowIndex,f=0,e=d.colorList,h=function(a,c,b){return a[c]?a[c]:b?a[c%a.length]:""},
c=0,l;l=a[c++];){var g=this.getCellInfo(l);l.style.backgroundColor=h(e,b+f==g.rowIndex?f:++f,d.repeat)}}},removeBackground:function(a){n.each(a,function(a){a.style.backgroundColor=""})}}})();(function(){function g(f,c){var d=e.getElementsByTagName(f,"td th");n.each(d,function(a){a.removeAttribute("width")});f.setAttribute("width",a(c,!0,b.getDefaultValue(c,f)));var h=[];setTimeout(function(){n.each(d,function(a){1==a.colSpan&&h.push(a.offsetWidth)});n.each(d,function(a,c){1==a.colSpan&&a.setAttribute("width",
h[c]+"")})},0)}function a(a,c,b){var f=a.body;return f.offsetWidth-(c?2*parseInt(e.getComputedStyle(f,"margin-left"),10):0)-2*b.tableBorder-(a.options.offsetWidth||0)}function d(a){if(a=f(a).cell){var c=k(a);return c.selectedTds.length?c.selectedTds:[a]}return[]}var b=UE.UETable,f=function(a){return b.getTableItemsByRange(a)},k=function(a){return b.getUETable(a)};UE.commands.inserttable={queryCommandState:function(){return f(this).table?-1:0},execCommand:function(a,c){c||(c=n.extend({},{numCols:this.options.defaultCols,
numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var f=this.selection.getRange().startContainer,f=e.findParent(f,function(a){return e.isBlockElm(a)},!0)||this.body,d=b.getDefaultValue(this,void 0),f=Math.floor(f.offsetWidth/c.numCols-2*d.tdPadding-d.tdBorder);!c.tdvalign&&(c.tdvalign=this.options.tdvalign);this.execCommand("inserthtml",function(a,c){for(var b=[],f=a.numRows,d=a.numCols,h=0;h<f;h++){b.push("<tr"+(0==h?' class="firstRow"':"")+">");for(var l=0;l<d;l++)b.push('<td width="'+
c+'"  vAlign="'+a.tdvalign+'" >'+(t.ie&&11>t.version?e.fillChar:"<br/>")+"</td>");b.push("</tr>")}return"<table><tbody>"+b.join("")+"</tbody></table>"}(c,f))}};UE.commands.insertparagraphbeforetable={queryCommandState:function(){return f(this).cell?0:-1},execCommand:function(){var a=f(this).table;if(a){var c=this.document.createElement("p");c.innerHTML=t.ie?"&nbsp;":"<br />";a.parentNode.insertBefore(c,a);this.selection.getRange().setStart(c,0).setCursor()}}};UE.commands.deletetable={queryCommandState:function(){var a=
this.selection.getRange();return e.findParentByTagName(a.startContainer,"table",!0)?0:-1},execCommand:function(a,c){var b=this.selection.getRange();if(c=c||e.findParentByTagName(b.startContainer,"table",!0)){var f=c.nextSibling;f||(f=e.createElement(this.document,"p",{innerHTML:t.ie?e.fillChar:"<br/>"}),c.parentNode.insertBefore(f,c));e.remove(c);b=this.selection.getRange();3==f.nodeType?b.setStartBefore(f):b.setStart(f,0);b.setCursor(!1,!0);this.fireEvent("tablehasdeleted")}}};UE.commands.cellalign=
{queryCommandState:function(){return d(this).length?0:-1},execCommand:function(a,c){var b=d(this);if(b.length)for(var f=0,h;h=b[f++];)h.setAttribute("align",c)}};UE.commands.cellvalign={queryCommandState:function(){return d(this).length?0:-1},execCommand:function(a,c){var b=d(this);if(b.length)for(var f=0,h;h=b[f++];)h.setAttribute("vAlign",c)}};UE.commands.insertcaption={queryCommandState:function(){var a=f(this).table;return a?0==a.getElementsByTagName("caption").length?1:-1:-1},execCommand:function(){var a=
f(this).table;if(a){var c=this.document.createElement("caption");c.innerHTML=t.ie?e.fillChar:"<br/>";a.insertBefore(c,a.firstChild);this.selection.getRange().setStart(c,0).setCursor()}}};UE.commands.deletecaption={queryCommandState:function(){var a=this.selection.getRange();return(a=e.findParentByTagName(a.startContainer,"table"))?0==a.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var a=this.selection.getRange();if(a=e.findParentByTagName(a.startContainer,"table"))e.remove(a.getElementsByTagName("caption")[0]),
this.selection.getRange().setStart(a.rows[0].cells[0],0).setCursor()}};UE.commands.inserttitle={queryCommandState:function(){var a=f(this).table;return a?(a=a.rows[0],"th"!=a.cells[a.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var a=f(this).table;a&&k(a).insertRow(0,"th");a=a.getElementsByTagName("th")[0];this.selection.getRange().setStart(a,0).setCursor(!1,!0)}};UE.commands.deletetitle={queryCommandState:function(){var a=f(this).table;return a?(a=a.rows[0],"th"==a.cells[a.cells.length-
1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var a=f(this).table;a&&e.remove(a.rows[0]);a=a.getElementsByTagName("td")[0];this.selection.getRange().setStart(a,0).setCursor(!1,!0)}};UE.commands.inserttitlecol={queryCommandState:function(){var a=f(this).table;return a?a.rows[a.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(a){(a=f(this).table)&&k(a).insertCol(0,"th");g(a,this);a=a.getElementsByTagName("th")[0];this.selection.getRange().setStart(a,0).setCursor(!1,
!0)}};UE.commands.deletetitlecol={queryCommandState:function(){var a=f(this).table;return a?a.rows[a.rows.length-1].getElementsByTagName("th").length?0:-1:-1},execCommand:function(){var a=f(this).table;if(a)for(var c=0;c<a.rows.length;c++)e.remove(a.rows[c].children[0]);g(a,this);a=a.getElementsByTagName("td")[0];this.selection.getRange().setStart(a,0).setCursor(!1,!0)}};UE.commands.mergeright={queryCommandState:function(a){var c=f(this);a=c.table;c=c.cell;if(!a||!c)return-1;var b=k(a);if(b.selectedTds.length)return-1;
var d=b.getCellInfo(c),e=d.colIndex+d.colSpan;if(e>=b.colsNum)return-1;b=b.indexTable[d.rowIndex][e];return(a=a.rows[b.rowIndex].cells[b.cellIndex])&&c.tagName==a.tagName?b.rowIndex==d.rowIndex&&b.rowSpan==d.rowSpan?0:-1:-1},execCommand:function(a){a=this.selection.getRange();var c=a.createBookmark(!0),b=f(this).cell;k(b).mergeRight(b);a.moveToBookmark(c).select()}};UE.commands.mergedown={queryCommandState:function(a){var c=f(this);a=c.table;c=c.cell;if(!a||!c)return-1;var b=k(a);if(b.selectedTds.length)return-1;
var d=b.getCellInfo(c),e=d.rowIndex+d.rowSpan;if(e>=b.rowsNum)return-1;b=b.indexTable[e][d.colIndex];return(a=a.rows[b.rowIndex].cells[b.cellIndex])&&c.tagName==a.tagName?b.colIndex==d.colIndex&&b.colSpan==d.colSpan?0:-1:-1},execCommand:function(){var a=this.selection.getRange(),c=a.createBookmark(!0),b=f(this).cell;k(b).mergeDown(b);a.moveToBookmark(c).select()}};UE.commands.mergecells={queryCommandState:function(){return b.getUETableBySelected(this)?0:-1},execCommand:function(){var a=b.getUETableBySelected(this);
if(a&&a.selectedTds.length){var c=a.selectedTds[0];a.mergeRange();a=this.selection.getRange();e.isEmptyBlock(c)?a.setStart(c,0).collapse(!0):a.selectNodeContents(c);a.select()}}};UE.commands.insertrow={queryCommandState:function(){var a=f(this),c=a.cell;return c&&("TD"==c.tagName||"TH"==c.tagName&&a.tr!==a.table.rows[0])&&k(a.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var a=this.selection.getRange(),c=a.createBookmark(!0),b=f(this),d=b.cell,b=b.table,e=k(b),g=e.getCellInfo(d);
if(e.selectedTds.length)for(var g=e.cellsRange,u=0,w=g.endRowIndex-g.beginRowIndex+1;u<w;u++)e.insertRow(g.beginRowIndex,d);else e.insertRow(g.rowIndex,d);a.moveToBookmark(c).select();"enabled"===b.getAttribute("interlaced")&&this.fireEvent("interlacetable",b)}};UE.commands.insertrownext={queryCommandState:function(){var a=f(this),c=a.cell;return c&&"TD"==c.tagName&&k(a.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var a=this.selection.getRange(),c=a.createBookmark(!0),b=f(this),
d=b.cell,b=b.table,e=k(b),g=e.getCellInfo(d);if(e.selectedTds.length)for(var g=e.cellsRange,u=0,w=g.endRowIndex-g.beginRowIndex+1;u<w;u++)e.insertRow(g.endRowIndex+1,d);else e.insertRow(g.rowIndex+g.rowSpan,d);a.moveToBookmark(c).select();"enabled"===b.getAttribute("interlaced")&&this.fireEvent("interlacetable",b)}};UE.commands.deleterow={queryCommandState:function(){return f(this).cell?0:-1},execCommand:function(){var a=f(this).cell,c=k(a),b=c.cellsRange,d=c.getCellInfo(a),g=c.getVSideCell(a),q=
c.getVSideCell(a,!0),a=this.selection.getRange();if(n.isEmptyObject(b))c.deleteRow(d.rowIndex);else for(var u=b.beginRowIndex;u<b.endRowIndex+1;u++)c.deleteRow(b.beginRowIndex);u=c.table;u.getElementsByTagName("td").length?1==d.rowSpan||d.rowSpan==b.endRowIndex-b.beginRowIndex+1?(q||g)&&a.selectNodeContents(q||g).setCursor(!1,!0):(c=c.getCell(d.rowIndex,c.indexTable[d.rowIndex][d.colIndex].cellIndex))&&a.selectNodeContents(c).setCursor(!1,!0):(c=u.nextSibling,e.remove(u),c&&a.setStart(c,0).setCursor(!1,
!0));"enabled"===u.getAttribute("interlaced")&&this.fireEvent("interlacetable",u)}};UE.commands.insertcol={queryCommandState:function(a){a=f(this);var c=a.cell;return c&&("TD"==c.tagName||"TH"==c.tagName&&c!==a.tr.cells[0])&&k(a.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(a){var c=this.selection.getRange(),b=c.createBookmark(!0);if(-1!=this.queryCommandState(a)){a=f(this).cell;var d=k(a),e=d.getCellInfo(a);if(d.selectedTds.length)for(var e=d.cellsRange,h=0,g=e.endColIndex-e.beginColIndex+
1;h<g;h++)d.insertCol(e.beginColIndex,a);else d.insertCol(e.colIndex,a);c.moveToBookmark(b).select(!0)}}};UE.commands.insertcolnext={queryCommandState:function(){var a=f(this);return a.cell&&k(a.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var a=this.selection.getRange(),c=a.createBookmark(!0),b=f(this).cell,d=k(b),e=d.getCellInfo(b);if(d.selectedTds.length)for(var e=d.cellsRange,g=0,u=e.endColIndex-e.beginColIndex+1;g<u;g++)d.insertCol(e.endColIndex+1,b);else d.insertCol(e.colIndex+
e.colSpan,b);a.moveToBookmark(c).select()}};UE.commands.deletecol={queryCommandState:function(){return f(this).cell?0:-1},execCommand:function(){var a=f(this).cell,b=k(a),d=b.cellsRange,g=b.getCellInfo(a),m=b.getHSideCell(a),q=b.getHSideCell(a,!0);if(n.isEmptyObject(d))b.deleteCol(g.colIndex);else for(g=d.beginColIndex;g<d.endColIndex+1;g++)b.deleteCol(d.beginColIndex);b=b.table;d=this.selection.getRange();b.getElementsByTagName("td").length?e.inDoc(a,this.document)?d.setStart(a,0).setCursor(!1,!0):
q&&e.inDoc(q,this.document)?d.selectNodeContents(q).setCursor(!1,!0):m&&e.inDoc(m,this.document)&&d.selectNodeContents(m).setCursor(!0,!0):(a=b.nextSibling,e.remove(b),a&&d.setStart(a,0).setCursor(!1,!0))}};UE.commands.splittocells={queryCommandState:function(){var a=f(this),b=a.cell;return!b||0<k(a.table).selectedTds.length?-1:b&&(1<b.colSpan||1<b.rowSpan)?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),d=f(this).cell;k(d).splitToCells(d);a.moveToBookmark(b).select()}};
UE.commands.splittorows={queryCommandState:function(){var a=f(this),b=a.cell;return!b||0<k(a.table).selectedTds.length?-1:b&&1<b.rowSpan?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),d=f(this).cell;k(d).splitToRows(d);a.moveToBookmark(b).select()}};UE.commands.splittocols={queryCommandState:function(){var a=f(this),b=a.cell;return!b||0<k(a.table).selectedTds.length?-1:b&&1<b.colSpan?0:-1},execCommand:function(){var a=this.selection.getRange(),b=a.createBookmark(!0),
d=f(this).cell;k(d).splitToCols(d);a.moveToBookmark(b).select()}};UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return f(this).table?0:-1},execCommand:function(a){var b=f(this).table;b&&("adaptbywindow"==a?g(b,this):(a=e.getElementsByTagName(b,"td th"),n.each(a,function(a){a.removeAttribute("width")}),b.removeAttribute("width")))}};UE.commands.averagedistributecol={queryCommandState:function(){var a=b.getUETableBySelected(this);return a?a.isFullRow()||a.isFullCol()?
0:-1:-1},execCommand:function(a){function c(){var a=h.table,c=0,d=0,e=b.getDefaultValue(f,a);if(h.isFullRow())c=a.offsetWidth,d=h.colsNum;else for(var a=h.cellsRange.endColIndex,g,l=h.cellsRange.beginColIndex;l<=a;)g=h.selectedTds[l],c+=g.offsetWidth,l+=g.colSpan,d+=1;return Math.ceil(c/d)-2*e.tdBorder-2*e.tdPadding}function d(a){n.each(e.getElementsByTagName(h.table,"th"),function(a){a.setAttribute("width","")});var b=h.isFullRow()?e.getElementsByTagName(h.table,"td"):h.selectedTds;n.each(b,function(b){1==
b.colSpan&&b.setAttribute("width",a)})}var f=this,h=b.getUETableBySelected(f);h&&h.selectedTds.length&&d(c())}};UE.commands.averagedistributerow={queryCommandState:function(){var a=b.getUETableBySelected(this);return!a||a.selectedTds&&/th/ig.test(a.selectedTds[0].tagName)?-1:a.isFullRow()||a.isFullCol()?0:-1},execCommand:function(a){function c(){var a=0;var c=h.table;var d=b.getDefaultValue(f,c),g=parseInt(e.getComputedStyle(c.getElementsByTagName("td")[0],"padding-top"));if(h.isFullCol()){var a=
e.getElementsByTagName(c,"caption"),l=e.getElementsByTagName(c,"th");if(0<a.length)var k=a[0].offsetHeight;if(0<l.length)var m=l[0].offsetHeight;a=c.offsetHeight-(k||0)-(m||0);c=0==l.length?h.rowsNum:h.rowsNum-1}else{m=h.cellsRange.beginRowIndex;l=h.cellsRange.endRowIndex;k=0;for(c=e.getElementsByTagName(c,"tr");m<=l;m++)a+=c[m].offsetHeight,k+=1;c=k}return t.ie&&9>t.version?Math.ceil(a/c):Math.ceil(a/c)-2*d.tdBorder-2*g}function d(a){var b=h.isFullCol()?e.getElementsByTagName(h.table,"td"):h.selectedTds;
n.each(b,function(b){1==b.rowSpan&&b.setAttribute("height",a)})}var f=this,h=b.getUETableBySelected(f);h&&h.selectedTds.length&&d(c())}};UE.commands.cellalignment={queryCommandState:function(){return f(this).table?0:-1},execCommand:function(a,c){var d=b.getUETableBySelected(this);d?n.each(d.selectedTds,function(a){e.setAttributes(a,c)}):(d=(d=this.selection.getStart())&&e.findParentByTagName(d,["td","th","caption"],!0),/caption/ig.test(d.tagName)?(d.style.textAlign=c.align,d.style.verticalAlign=c.vAlign):
e.setAttributes(d,c),this.selection.getRange().setCursor(!0))},queryCommandValue:function(a){(a=f(this).cell)||(a=d(this)[0]);if(a){var b=UE.UETable.getUETable(a).selectedTds;!b.length&&(b=a);return UE.UETable.getTableCellAlignState(b)}return null}};UE.commands.tablealignment={queryCommandState:function(){return t.ie&&8>t.version?-1:f(this).table?0:-1},execCommand:function(a,b){var c=this.selection.getStart();(c=c&&e.findParentByTagName(c,["table"],!0))&&c.setAttribute("align",b)}};UE.commands.edittable=
{queryCommandState:function(){return f(this).table?0:-1},execCommand:function(a,b){var c=this.selection.getRange();if(c=e.findParentByTagName(c.startContainer,"table"))c=e.getElementsByTagName(c,"td").concat(e.getElementsByTagName(c,"th"),e.getElementsByTagName(c,"caption")),n.each(c,function(a){a.style.borderColor=b})}};UE.commands.edittd={queryCommandState:function(){return f(this).table?0:-1},execCommand:function(a,c){var d=b.getUETableBySelected(this);if(d)n.each(d.selectedTds,function(a){a.style.backgroundColor=
c});else if(d=(d=this.selection.getStart())&&e.findParentByTagName(d,["td","th","caption"],!0))d.style.backgroundColor=c}};UE.commands.settablebackground={queryCommandState:function(){return 1<d(this).length?0:-1},execCommand:function(a,b){var c=d(this);k(c[0]).setBackground(c,b)}};UE.commands.cleartablebackground={queryCommandState:function(){var a=d(this);if(!a.length)return-1;for(var b=0,f;f=a[b++];)if(""!==f.style.backgroundColor)return 0;return-1},execCommand:function(){var a=d(this);k(a[0]).removeBackground(a)}};
UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(a){var b=f(this).table;if(!b)return-1;b=b.getAttribute("interlaced");return"interlacetable"==a?"enabled"===b?-1:0:b&&"disabled"!==b?0:-1},execCommand:function(a,b){var c=f(this).table;"interlacetable"==a?(c.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",c,b)):(c.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",c))}};UE.commands.setbordervisible={queryCommandState:function(a){return f(this).table?
0:-1},execCommand:function(){var a=f(this).table;n.each(e.getElementsByTagName(a,"td"),function(a){a.style.borderWidth="1px";a.style.borderStyle="solid"})}}})();UE.plugins.table=function(){function g(b,c){a(b,"width",!0);a(b,"height",!0)}function a(a,b,c){a.style[b]&&(c&&a.setAttribute(b,parseInt(a.style[b],10)),a.style[b]="")}function d(a){if("TD"==a.tagName||"TH"==a.tagName)return a;var b;return(b=e.findParentByTagName(a,"td",!0)||e.findParentByTagName(a,"th",!0))?b:null}function b(a){var b=new RegExp(e.fillChar,
"g");if(0<a[t.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(b,"").length)return 0;for(var c in z.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1}function f(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+y.document.body.scrollLeft-y.document.body.clientLeft,y:a.clientY+y.document.body.scrollTop-y.document.body.clientTop}}function k(a){if(!I())try{var b=d(a.target||a.srcElement);ca&&(y.body.style.webkitUserSelect="none",10<Math.abs(fa.x-a.clientX)||10<Math.abs(fa.y-
a.clientY))&&(r(),ca=!1,P=0,ba(a));if(U&&Q){P=0;y.body.style.webkitUserSelect="none";y.selection.getNative()[t.ie9below?"empty":"removeAllRanges"]();var c=f(a);p(y,!0,U,c,b);if("h"==U){var g=T.style;b=Q;var k=M(b);if(k){var q=k.getSameEndPosCells(b,"x")[0],u=k.getSameStartPosXCells(b)[0],w=f(a).x,n=(q?e.getXY(q).x:e.getXY(k.table).x)+20,x=u?e.getXY(u).x+u.offsetWidth-20:y.body.offsetWidth+5||parseInt(e.getComputedStyle(y.body,"width"),10),n=n+5,x=x-5;var v=w<n?n:w>x?x:w}else v=void 0;g.left=v+"px"}else if("v"==
U){var D=T.style;a:{try{var ja=e.getXY(Q).y,H=f(a).y;var z=H<ja?ja:H;break a}catch(na){}z=void 0}D.top=z+"px"}}else if(b){if(!0!==y.fireEvent("excludetable",b)){c=f(a);var B=m(b,c);var A=e.findParentByTagName(b,"table",!0);l(A,b,a,!0)?!0!==y.fireEvent("excludetable",A)&&(y.body.style.cursor="url("+y.options.cursorpath+"h.png),pointer"):l(A,b,a)?!0!==y.fireEvent("excludetable",A)&&(y.body.style.cursor="url("+y.options.cursorpath+"v.png),pointer"):(y.body.style.cursor="text",/\d/.test(B)&&(B=B.replace(/\d/,
""),b=M(b).getPreviewCell(b,"v"==B)),p(y,b?!!B:!1,b?B:"",c,b))}}else h(!1,A,y)}catch(na){}}function h(a,b,d){a?c(b,d):ga||setTimeout(function(){!ga&&K&&K.parentNode&&K.parentNode.removeChild(K)},2E3)}function c(a,b){function c(c,d){clearTimeout(h);h=setTimeout(function(){b.fireEvent("tableClicked",a,d)},300)}var d=e.getXY(a),f=a.ownerDocument;if(K&&K.parentNode)return K;K=f.createElement("div");K.contentEditable=!1;K.innerHTML="";K.style.cssText="width:15px;height:15px;background-image:url("+b.options.UEDITOR_HOME_URL+
"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(d.y-15)+"px;left:"+d.x+"px;";e.unSelectable(K);K.onmouseover=function(a){ga=!0};K.onmouseout=function(a){ga=!1};e.on(K,"click",function(a,b){c(b,this)});e.on(K,"dblclick",function(c,d){clearTimeout(h);var f=M(a),e=a.rows[0].cells[0],g=f.getLastCell(),g=f.getCellsRange(e,g);b.selection.getRange().setStart(e,0).setCursor(!1,!0);f.setSelected(g)});e.on(K,"dragstart",function(a,b){e.preventDefault(b)});var h;f.body.appendChild(K)}function l(a,
b,c,d){c=f(c);b=m(b,c);return d?(d=(d=a.getElementsByTagName("caption")[0])?d.offsetHeight:0,"v1"==b&&8>c.y-e.getXY(a).y-d):"h1"==b&&8>c.x-e.getXY(a).x}function p(a,b,c,d,f){try{a.body.style.cursor="h"==c?"col-resize":"v"==c?"row-resize":"text",t.ie&&(!c||Z||F.getUETableBySelected(a)?Y(a):(B(a,a.document),ka(c,f))),ia=b}catch(pa){}}function m(a,b){var c=e.getXY(a);return c?5>c.x+a.offsetWidth-b.x?"h":5>b.x-c.x?"h1":5>c.y+a.offsetHeight-b.y?"v":5>b.y-c.y?"v1":"":""}function q(a,b){if(!I())if(fa={x:b.clientX,
y:b.clientY},2==b.button){var c=F.getUETableBySelected(y),d=!1;if(c){var f=S(y,b);n.each(c.selectedTds,function(a){a===f&&(d=!0)});d?(f=c.selectedTds[0],setTimeout(function(){y.selection.getRange().setStart(f,0).setCursor(!1,!0)},0)):(F.removeSelectedClass(e.getElementsByTagName(y.body,"th td")),c.clearSelected())}}else w(b)}function u(a){P=0;a=a||y.window.event;var b=d(a.target||a.srcElement);if(b){var c;if(c=m(b,f(a)))if(Y(y),"h1"==c&&(c="h",l(e.findParentByTagName(b,"table"),b,a)?y.execCommand("adaptbywindow"):
(b=M(b).getPreviewCell(b))&&y.selection.getRange().selectNodeContents(b).setCursor(!0,!0)),"h"==c){a=M(b);var h=J(b,a.table,!0),h=v(h,"left");a.width=a.offsetWidth;var g=[],k=[];n.each(h,function(a){g.push(a.offsetWidth)});n.each(h,function(a){a.removeAttribute("width")});window.setTimeout(function(){var a=!0;n.each(h,function(b,c){var d=b.offsetWidth;if(d>g[c])return a=!1;k.push(d)});var b=a?k:g;n.each(h,function(a,c){a.width=b[c]-C()})},0)}}}function w(a){F.removeSelectedClass(e.getElementsByTagName(y.body,
"td th"));n.each(y.document.getElementsByTagName("table"),function(a){a.ueTable=null});if(L=S(y,a)){var b=e.findParentByTagName(L,"table",!0);(ut=M(b))&&ut.clearSelected();ia?x(a):(y.document.body.style.webkitUserSelect="",Z=!0,y.addListener("mouseover",da))}}function x(a){t.ie&&(a=D(a));r();ca=!0;ha=setTimeout(function(){ba(a)},360)}function v(a,b){for(var c=[],d,f=0,e=a.length;f<e;f++)(d=a[f][b])&&c.push(d);return c}function r(){ha&&clearTimeout(ha);ha=null}function D(a){var b="pageX pageY clientX clientY srcElement target".split(" "),
c={};if(a)for(var d=0,f,e;f=b[d];d++)(e=a[f])&&(c[f]=e);return c}function ba(a){ca=!1;if(L=a.target||a.srcElement)a=m(L,f(a)),/\d/.test(a)&&(a=a.replace(/\d/,""),L=M(L).getPreviewCell(L,"v"==a)),Y(y),B(y,y.document),y.fireEvent("saveScene"),ka(a,L),Z=!0,U=a,Q=L}function A(a,b){if(!I()){r();ca=!1;if(ia&&(P=++P%3,fa={x:b.clientX,y:b.clientY},setTimeout(function(){0<P&&P--},360),2===P)){P=0;u(b);return}if(2!=b.button){var c=this.selection.getRange();var d=e.findParentByTagName(c.startContainer,"table",
!0);var f=e.findParentByTagName(c.endContainer,"table",!0);if(d||f)d===f?(d=e.findParentByTagName(c.startContainer,["td","th","caption"],!0),f=e.findParentByTagName(c.endContainer,["td","th","caption"],!0),d!==f&&this.selection.clearRange()):this.selection.clearRange();Z=!1;this.document.body.style.webkitUserSelect="";if(U&&Q&&(this.selection.getNative()[t.ie9below?"empty":"removeAllRanges"](),P=0,T=this.document.getElementById("ue_tableDragLine"))){c=e.getXY(Q);f=e.getXY(T);switch(U){case "h":G(Q,
f.x-c.x);break;case "v":R(Q,f.y-c.y-Q.offsetHeight)}U="";Q=null;Y(this);this.fireEvent("saveScene");return}if(L)(f=(c=M(L))?c.selectedTds[0]:null)?(c=new E.Range(this.document),e.isEmptyBlock(f)?c.setStart(f,0).setCursor(!1,!0):c.selectNodeContents(f).shrinkBoundary().setCursor(!1,!0)):(c=this.selection.getRange().shrinkBoundary(),c.collapsed||(d=e.findParentByTagName(c.startContainer,["td","th"],!0),f=e.findParentByTagName(c.endContainer,["td","th"],!0),(d&&!f||!d&&f||d&&f&&d!==f)&&c.setCursor(!1,
!0))),L=null,this.removeListener("mouseover",da);else if((f=e.findParentByTagName(b.target||b.srcElement,"td",!0))||(f=e.findParentByTagName(b.target||b.srcElement,"th",!0)),f&&("TD"==f.tagName||"TH"==f.tagName)){if(!0===this.fireEvent("excludetable",f))return;c=new E.Range(this.document);c.setStart(f,0).setCursor(!1,!0)}this._selectionChange(250,b)}}}function da(a,b){if(!I()){var c=b.target||b.srcElement;V=e.findParentByTagName(c,"td",!0)||e.findParentByTagName(c,"th",!0);if(L&&V&&("TD"==L.tagName&&
"TD"==V.tagName||"TH"==L.tagName&&"TH"==V.tagName)&&e.findParentByTagName(L,"table")==e.findParentByTagName(V,"table"))if(c=M(V),L!=V){this.document.body.style.webkitUserSelect="none";this.selection.getNative()[t.ie9below?"empty":"removeAllRanges"]();var d=c.getCellsRange(L,V);c.setSelected(d)}else this.document.body.style.webkitUserSelect="",c.clearSelected();b.preventDefault?b.preventDefault():b.returnValue=!1}}function G(a,b){var c=M(a);if(c){var c=c.table,d=J(a,c);c.style.width="";c.removeAttribute("width");
b=N(b,a,d);a.nextSibling?n.each(d,function(a){a.left.width=+a.left.width+b;a.right&&(a.right.width=+a.right.width-b)}):n.each(d,function(a){a.left.width-=-b})}}function I(){return"false"===y.body.contentEditable}function R(a,b){if(!(10>Math.abs(b))){var c=M(a);if(c)for(var c=c.getSameEndPosCells(a,"y"),d=c[0]?c[0].offsetHeight:0,f=0,h;h=c[f++];){var g=b,l=d,k=parseInt(e.getComputedStyle(h,"line-height"),10),g=l+g;h.style.height&&(h.style.height="");1==h.rowSpan?h.setAttribute("height",g<k?k:g):h.removeAttribute&&
h.removeAttribute("height")}}}function J(a,b,c){b||(b=e.findParentByTagName(a,"table"));if(!b)return null;e.getNodeIndex(a);b=b.rows;for(var d=0;a;)1===a.nodeType&&(d+=a.colSpan||1),a=a.previousSibling;a=null;var f=[];n.each(b,function(a){var b=0;n.each(a.cells,function(a){b+=a.colSpan||1;if(b===d)return f.push({left:a,right:a.nextSibling||null}),!1;if(b>d)return c&&f.push({left:a}),!1})});return f}function N(a,b,c){a-=C();if(0>a)return 0;a-=X(b);var d=0>a?"left":"right";a=Math.abs(a);n.each(c,function(b){(b=
b[d])&&(a=Math.min(a,X(b)-5))});a=0>a?0:a;return"left"===d?-a:a}function X(a){var b=a.offsetWidth-C();if(!a.nextSibling){tab=e.findParentByTagName(a,"table",!1);if(void 0===tab.offsetVal){var c=a.previousSibling;tab.offsetVal=c?a.offsetWidth-c.offsetWidth===F.borderWidth?F.borderWidth:0:0}b-=tab.offsetVal}b=0>b?0:b;try{a.width=b}catch(oa){}return b}function C(){if(void 0===F.tabcellSpace){var a=y.document.createElement("table"),b=y.document.createElement("tbody"),c=y.document.createElement("tr"),
d=y.document.createElement("td"),f=null;d.style.cssText="border: 0;";d.width=1;c.appendChild(d);c.appendChild(f=d.cloneNode(!1));b.appendChild(c);a.appendChild(b);a.style.cssText="visibility: hidden;";y.body.appendChild(a);F.paddingSpace=d.offsetWidth-1;b=a.offsetWidth;d.style.cssText="";f.style.cssText="";F.borderWidth=(a.offsetWidth-b)/3;F.tabcellSpace=F.paddingSpace+F.borderWidth;y.body.removeChild(a)}C=function(){return F.tabcellSpace};return F.tabcellSpace}function B(a,b){Z||(T=a.document.createElement("div"),
e.setAttributes(T,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),a.body.appendChild(T))}function Y(a){if(!Z)for(var b;b=a.document.getElementById("ue_tableDragLine");)e.remove(b)}function ka(a,b){if(b){var c=e.findParentByTagName(b,"table"),d=c.getElementsByTagName("caption"),
f=c.offsetWidth,h=c.offsetHeight-(0<d.length?d[0].offsetHeight:0),c=e.getXY(c),g=e.getXY(b);switch(a){case "h":d="height:"+h+"px;top:"+(c.y+(0<d.length?d[0].offsetHeight:0))+"px;left:"+(g.x+b.offsetWidth);T.style.cssText=d+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case "v":d="width:"+f+"px;left:"+c.x+"px;top:"+(g.y+b.offsetHeight),T.style.cssText=d+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}
function O(a,b){for(var c=e.getElementsByTagName(a.body,"table"),d,f=0,h;h=c[f++];)d=e.getElementsByTagName(h,"td"),d[0]&&(b?(d=d[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/ig.test(d)&&e.addClass(h,"noBorderTable")):e.removeClasses(h,"noBorderTable"))}function aa(a,b,c){var d=a.body;return d.offsetWidth-(b?2*parseInt(e.getComputedStyle(d,"margin-left"),10):0)-2*c.tableBorder-(a.options.offsetWidth||0)}function S(a,b){var c=e.findParentByTagName(b.target||b.srcElement,["td",
"th"],!0);if(!c)return null;var d=m(c,f(b));if(!c)return null;if("h1"===d&&c.previousSibling){d=e.getXY(c);var h=c.offsetWidth;Math.abs(d.x+h-b.clientX)>h/3&&(c=c.previousSibling)}else"v1"===d&&c.parentNode.previousSibling&&(d=e.getXY(c),h=c.offsetHeight,Math.abs(d.y+h-b.clientY)>h/3&&(c=c.parentNode.previousSibling.firstChild));return c&&!0!==a.fireEvent("excludetable",c)?c:null}var y=this,ha=null,ca=!1,P=0,fa=null,F=UE.UETable,M=function(a){return F.getUETable(a)};y.ready(function(){var a=this,
b=a.selection.getText;a.selection.getText=function(){var c=F.getUETableBySelected(a);if(c){var d="";n.each(c.selectedTds,function(a){d+=a[t.ie?"innerText":"textContent"]});return d}return b.call(a.selection)}});var L=null,V=null,U="",ia=!1,K=null,ga=!1,T=null,Q=null,Z=!1;y.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:y.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});
y.getUETable=M;var ea={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};y.ready(function(){n.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",
y.document);var a,c,f;y.addListener("keydown",function(d,h){var g;var l=h.keyCode||h.which;if(8==l){(g=F.getUETableBySelected(this))&&g.selectedTds.length&&(g.isFullCol()?this.execCommand("deletecol"):g.isFullRow()?this.execCommand("deleterow"):this.fireEvent("delcells"),e.preventDefault(h));var k=e.findParentByTagName(this.selection.getStart(),"caption",!0);var m=this.selection.getRange();m.collapsed&&k&&b(k)&&(this.fireEvent("saveScene"),g=k.parentNode,e.remove(k),g&&m.setStart(g.rows[0].cells[0],
0).setCursor(!1,!0),this.fireEvent("saveScene"))}if(46==l&&(g=F.getUETableBySelected(this))){this.fireEvent("saveScene");for(k=0;m=g.selectedTds[k++];)e.fillNode(this.document,m);this.fireEvent("saveScene");e.preventDefault(h)}if(13==l){l=this.selection.getRange();if(k=e.findParentByTagName(l.startContainer,"caption",!0)){g=e.findParentByTagName(k,"table");l.collapsed?k&&l.setStart(g.rows[0].cells[0],0).setCursor(!1,!0):(l.deleteContents(),this.fireEvent("saveScene"));e.preventDefault(h);return}l.collapsed&&
(g=e.findParentByTagName(l.startContainer,"table"))&&(m=g.rows[0].cells[0],k=e.findParentByTagName(this.selection.getStart(),["td","th"],!0),g=g.previousSibling,m===k&&(!g||1==g.nodeType&&"TABLE"==g.tagName)&&e.isStartInblock(l)&&(g=e.findParent(this.selection.getStart(),function(a){return e.isBlockElm(a)},!0))&&(/t(h|d)/i.test(g.tagName)||g===k.firstChild)&&(this.execCommand("insertparagraphbeforetable"),e.preventDefault(h)))}if((h.ctrlKey||h.metaKey)&&"67"==h.keyCode&&(a=null,g=F.getUETableBySelected(this)))for(l=
g.selectedTds,c=g.isFullCol(),f=g.isFullRow(),a=[[g.cloneCell(l[0],null,!0)]],k=1;m=l[k];k++)m.parentNode!==l[k-1].parentNode?a.push([g.cloneCell(m,null,!0)]):a[a.length-1].push(g.cloneCell(m,null,!0))});y.addListener("tablehasdeleted",function(){p(this,!1,"",null);K&&e.remove(K)});y.addListener("beforepaste",function(d,h){var l,k=this;var m=k.selection.getRange();if(e.findParentByTagName(m.startContainer,"caption",!0))m=k.document.createElement("div"),m.innerHTML=h.html,h.html=m[t.ie9below?"innerText":
"textContent"];else{var q=F.getUETableBySelected(k);if(a){k.fireEvent("saveScene");m=k.selection.getRange();if(l=e.findParentByTagName(m.startContainer,["td","th"],!0)){q=M(l);if(f){var p=q.getCellInfo(l).rowIndex;"TH"==l.tagName&&p++;m=0;for(var u;u=a[m++];){var w=q.insertRow(p++,"td");for(var x=0,v;v=u[x];x++)(l=w.cells[x])||(l=w.insertCell(x)),l.innerHTML=v.innerHTML,v.getAttribute("width")&&l.setAttribute("width",v.getAttribute("width")),v.getAttribute("vAlign")&&l.setAttribute("vAlign",v.getAttribute("vAlign")),
v.getAttribute("align")&&l.setAttribute("align",v.getAttribute("align")),v.style.cssText&&(l.style.cssText=v.style.cssText);for(x=0;(v=w.cells[x])&&u[x];x++)v.innerHTML=u[x].innerHTML,u[x].getAttribute("width")&&v.setAttribute("width",u[x].getAttribute("width")),u[x].getAttribute("vAlign")&&v.setAttribute("vAlign",u[x].getAttribute("vAlign")),u[x].getAttribute("align")&&v.setAttribute("align",u[x].getAttribute("align")),u[x].style.cssText&&(v.style.cssText=u[x].style.cssText)}}else{if(c){p=q.getCellInfo(l);
x=l=0;for(u=a[0];v=u[x++];)l+=v.colSpan||1;k.__hasEnterExecCommand=!0;for(m=0;m<l;m++)k.execCommand("insertcol");k.__hasEnterExecCommand=!1;l=q.table.rows[0].cells[p.cellIndex];"TH"==l.tagName&&(l=q.table.rows[1].cells[p.cellIndex])}for(m=0;u=a[m++];){var r=l;for(x=0;v=u[x++];)l?(l.innerHTML=v.innerHTML,v.getAttribute("width")&&l.setAttribute("width",v.getAttribute("width")),v.getAttribute("vAlign")&&l.setAttribute("vAlign",v.getAttribute("vAlign")),v.getAttribute("align")&&l.setAttribute("align",
v.getAttribute("align")),v.style.cssText&&(l.style.cssText=v.style.cssText),w=l,l=l.nextSibling):(p=v.cloneNode(!0),e.removeAttributes(p,["class","rowSpan","colSpan"]),w.parentNode.appendChild(p));l=q.getNextCell(r,!0,!0);if(!a[m])break;l||(p=q.getCellInfo(r),q.table.insertRow(q.table.rows.length),q.update(),l=q.getVSideCell(r,!0))}}q.update()}else{q=k.document.createElement("table");for(m=0;u=a[m++];){w=q.insertRow(q.rows.length);for(x=0;v=u[x++];)p=F.cloneCell(v,null,!0),e.removeAttributes(p,["class"]),
w.appendChild(p);2==x&&1<p.rowSpan&&(p.rowSpan=1)}m=F.getDefaultValue(k,void 0);m=k.body.offsetWidth-2*parseInt(e.getComputedStyle(k.body,"margin-left"),10)-2*m.tableBorder-(k.options.offsetWidth||0);k.execCommand("insertHTML","<table  "+(c&&f?'width="'+m+'"':"")+">"+q.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}k.fireEvent("contentchange");k.fireEvent("saveScene");h.html="";return!0}m=k.document.createElement("div");m.innerHTML=h.html;u=m.getElementsByTagName("table");e.findParentByTagName(k.selection.getStart(),
"table")?(n.each(u,function(a){e.remove(a)}),e.findParentByTagName(k.selection.getStart(),"caption",!0)&&(m.innerHTML=m[t.ie?"innerText":"textContent"])):n.each(u,function(a){g(a,!0);e.removeAttributes(a,["style","border"]);n.each(e.getElementsByTagName(a,"td"),function(a){b(a)&&e.fillNode(k.document,a);g(a,!0)})});h.html=m.innerHTML}});y.addListener("afterpaste",function(){n.each(e.getElementsByTagName(y.body,"table"),function(a){if(a.offsetWidth>y.body.offsetWidth){var b=F.getDefaultValue(y,a);
a.style.width=y.body.offsetWidth-2*parseInt(e.getComputedStyle(y.body,"margin-left"),10)-2*b.tableBorder-(y.options.offsetWidth||0)+"px"}})});y.addListener("blur",function(){a=null});var m;y.addListener("keydown",function(){clearTimeout(m);m=setTimeout(function(){var a=y.selection.getRange();if(a=e.findParentByTagName(a.startContainer,["th","td"],!0)){var b=a.parentNode.parentNode.parentNode;b.offsetWidth>b.getAttribute("width")&&(a.style.wordBreak="break-all")}},100)});y.addListener("selectionchange",
function(){p(y,!1,"",null)});y.addListener("contentchange",function(){var a=this;Y(a);if(!F.getUETableBySelected(a)){var b=a.selection.getRange().startContainer,b=e.findParentByTagName(b,["td","th"],!0);n.each(e.getElementsByTagName(a.document,"table"),function(b){!0!==a.fireEvent("excludetable",b)&&(b.ueTable=new F(b),b.onmouseover=function(){a.fireEvent("tablemouseover",b)},b.onmousemove=function(){a.fireEvent("tablemousemove",b);a.options.tableDragable&&h(!0,this,a);n.defer(function(){a.fireEvent("contentchange",
50)},!0)},b.onmouseout=function(){a.fireEvent("tablemouseout",b);p(a,!1,"",null);Y(a)},b.onclick=function(b){b=a.window.event||b;var c=d(b.target||b.srcElement);if(c){var f=M(c),e=f.table,h=f.getCellInfo(c),g=a.selection.getRange();l(e,c,b,!0)?(e=f.getCell(f.indexTable[f.rowsNum-1][h.colIndex].rowIndex,f.indexTable[f.rowsNum-1][h.colIndex].cellIndex),b.shiftKey&&f.selectedTds.length?f.selectedTds[0]!==e?(b=f.getCellsRange(f.selectedTds[0],e),f.setSelected(b)):g&&g.selectNodeContents(e).select():c!==
e?(b=f.getCellsRange(c,e),f.setSelected(b)):g&&g.selectNodeContents(e).select()):l(e,c,b)&&(e=f.getCell(f.indexTable[h.rowIndex][f.colsNum-1].rowIndex,f.indexTable[h.rowIndex][f.colsNum-1].cellIndex),b.shiftKey&&f.selectedTds.length?f.selectedTds[0]!==e?(b=f.getCellsRange(f.selectedTds[0],e),f.setSelected(b)):g&&g.selectNodeContents(e).select():c!==e?(b=f.getCellsRange(c,e),f.setSelected(b)):g&&g.selectNodeContents(e).select())}})});O(a,!0)}});e.on(y.document,"mousemove",k);e.on(y.document,"mouseout",
function(a){"TABLE"==(a.target||a.srcElement).tagName&&p(y,!1,"",null)});y.addListener("interlacetable",function(a,b,c){if(b){a=b.rows;b=a.length;for(var d=0;d<b;d++){var f=c||this.options.classList;a[d].className=f[d]?f[d]:f[d%f.length]}}});y.addListener("uninterlacetable",function(a,b){if(b)for(var c=b.rows,d=this.options.classList,f=c.length,h=0;h<f;h++)e.removeClasses(c[h],d)});y.addListener("mousedown",q);y.addListener("mouseup",A);e.on(y.body,"dragstart",function(a){A.call(y,"dragstart",a)});
y.addOutputRule(function(a){n.each(a.getNodesByTagName("div"),function(a){"ue_tableDragLine"==a.getAttr("id")&&a.parentNode.removeChild(a)})});var u=0;y.addListener("mousedown",function(){u=0});y.addListener("tabkeydown",function(){var a=this.selection.getRange();var c=a.getCommonAncestor(!0,!0);var d=e.findParentByTagName(c,"table");if(d){if(e.findParentByTagName(c,"caption",!0))(c=e.getElementsByTagName(d,"th td"))&&c.length&&a.setStart(c[0],0).setCursor(!1,!0);else{c=e.findParentByTagName(c,["td",
"th"],!0);var f=M(c);u=1<c.rowSpan?u:f.getCellInfo(c).rowIndex;(c=f.getTabNextCell(c,u))?b(c)?a.setStart(c,0).setCursor(!1,!0):a.selectNodeContents(c).select():(y.fireEvent("saveScene"),y.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),y.__hasEnterExecCommand=!1,a=this.selection.getRange(),a.setStart(d.rows[d.rows.length-1].cells[0],0).setCursor(),y.fireEvent("saveScene"))}return!0}});t.ie&&y.addListener("selectionchange",function(){p(this,!1,"",null)});y.addListener("keydown",function(a,
b){var c=b.keyCode||b.which;if(8!=c&&46!=c){(c=!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&!b.altKey)&&F.removeSelectedClass(e.getElementsByTagName(this.body,"td"));var d=F.getUETableBySelected(this);d&&c&&d.clearSelected()}});y.addListener("beforegetcontent",function(){O(this,!1);t.ie&&n.each(this.document.getElementsByTagName("caption"),function(a){e.isEmptyNode(a)&&(a.innerHTML="&nbsp;")})});y.addListener("aftergetcontent",function(){O(this,!0)});y.addListener("getAllHtml",function(){F.removeSelectedClass(y.document.getElementsByTagName("td"))});
y.addListener("fullscreenchanged",function(a,b){if(!b){var c=this.body.offsetWidth/document.body.offsetWidth,d=e.getElementsByTagName(this.body,"table");n.each(d,function(a){if(a.offsetWidth<y.body.offsetWidth)return!1;var b=e.getElementsByTagName(a,"td"),d=[];n.each(b,function(a){d.push(a.offsetWidth)});for(var f=0,h;h=b[f];f++)h.setAttribute("width",Math.floor(d[f]*c));a.setAttribute("width",Math.floor(aa(y,!0,F.getDefaultValue(y,void 0))))})}});var w=y.execCommand;y.execCommand=function(a,c){a=
a.toLowerCase();var d=F.getUETableBySelected(this),f=new E.Range(this.document),h=this.commands[a]||UE.commands[a];if(h){if(!d||ea[a]||h.notNeedUndo||this.__hasEnterExecCommand)var g=w.apply(this,arguments);else{this.__hasEnterExecCommand=!0;this.fireEvent("beforeexeccommand",a);for(var d=d.selectedTds,l=h=-2,k,m,q=0,p;p=d[q];q++)if(b(p)?f.setStart(p,0).setCursor(!1,!0):f.selectNode(p).select(!0),m=this.queryCommandState(a),k=this.queryCommandValue(a),-1!=m){if(h!==m||l!==k)this._ignoreContentChange=
!0,g=w.apply(this,arguments),this._ignoreContentChange=!1;h=this.queryCommandState(a);l=this.queryCommandValue(a);e.isEmptyBlock(p)&&e.fillNode(this.document,p)}f.setStart(d[0],0).shrinkBoundary(!0).setCursor(!1,!0);this.fireEvent("contentchange");this.fireEvent("afterexeccommand",a);this.__hasEnterExecCommand=!1;this._selectionChange()}return g}}})};UE.UETable.prototype.sortTable=function(e,a){var d=this.table,b=d.rows,f=[],g="TH"===b[0].cells[0].tagName,h=0;if(this.selectedTds.length){var c=this.cellsRange;
var l=c.endRowIndex+1;for(var p=c.beginRowIndex;p<l;p++)f[p]=b[p];f.splice(0,c.beginRowIndex);h=c.endRowIndex+1===this.rowsNum?0:c.endRowIndex+1}else for(p=0,l=b.length;p<l;p++)f[p]=b[p];var m={reversecurrent:function(a,b){return 1},orderbyasc:function(a,b){return(a.innerText||a.textContent).localeCompare(b.innerText||b.textContent)},reversebyasc:function(a,b){return b.innerHTML.localeCompare(a.innerHTML)},orderbynum:function(a,b){var c=a[t.ie?"innerText":"textContent"].match(/\d+/),d=b[t.ie?"innerText":
"textContent"].match(/\d+/);c&&(c=+c[0]);d&&(d=+d[0]);return(c||0)-(d||0)},reversebynum:function(a,b){var c=a[t.ie?"innerText":"textContent"].match(/\d+/),d=b[t.ie?"innerText":"textContent"].match(/\d+/);c&&(c=+c[0]);d&&(d=+d[0]);return(d||0)-(c||0)}};d.setAttribute("data-sort-type",a&&"string"===typeof a&&m[a]?a:"");g&&f.splice(0,1);f=n.sort(f,function(b,c){return a&&"function"===typeof a?a.call(this,b.cells[e],c.cells[e]):a&&"number"===typeof a?1:a&&"string"===typeof a&&m[a]?m[a].call(this,b.cells[e],
c.cells[e]):m.orderbyasc.call(this,b.cells[e],c.cells[e])});g=d.ownerDocument.createDocumentFragment();p=0;for(l=f.length;p<l;p++)g.appendChild(f[p]);l=d.getElementsByTagName("tbody")[0];h?l.insertBefore(g,b[h-c.endRowIndex+c.beginRowIndex-1]):l.appendChild(g)};UE.plugins.tablesort=function(){var g=this,a=UE.UETable;g.ready(function(){n.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+
g.options.themePath+g.options.theme+"/images/sortable.png);}",g.document);g.addListener("afterexeccommand",function(a,b){"mergeright"!=b&&"mergedown"!=b&&"mergecells"!=b||this.execCommand("disablesort")})});UE.commands.sorttable={queryCommandState:function(){var d=a.getTableItemsByRange(this);if(!d.cell)return-1;for(var d=d.table.getElementsByTagName("td"),b=0,f;f=d[b++];)if(1!=f.rowSpan||1!=f.colSpan)return-1;return 0},execCommand:function(d,b){var f=this.selection.getRange(),e=f.createBookmark(!0),
h=a.getTableItemsByRange(this),c=h.cell,h=a.getUETable(h.table),c=h.getCellInfo(c);h.sortTable(c.cellIndex,b);f.moveToBookmark(e);try{f.select()}catch(l){}}};UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(d){var b=a.getTableItemsByRange(this).table;if(b&&"enablesort"==d)for(var f=e.getElementsByTagName(b,"th td"),g=0;g<f.length;g++)if(1<f[g].getAttribute("colspan")||1<f[g].getAttribute("rowspan"))return-1;return b?"enablesort"==d^"sortEnabled"!=b.getAttribute("data-sort")?
-1:0:-1},execCommand:function(d){var b=a.getTableItemsByRange(this).table;b.setAttribute("data-sort","enablesort"==d?"sortEnabled":"sortDisabled");"enablesort"==d?e.addClass(b,"sortEnabled"):e.removeClasses(b,"sortEnabled")}}};UE.plugins.contextmenu=function(){var g=this;g.setOpt("enableContextMenu",!0);if(!1!==g.getOpt("enableContextMenu")){var a=g.getLang("contextMenu"),d,b=g.options.contextMenu||[{label:a.selectall,cmdName:"selectall"},{label:a.cleardoc,cmdName:"cleardoc",exec:function(){confirm(a.confirmclear)&&
this.execCommand("cleardoc")}},"-",{label:a.unlink,cmdName:"unlink"},"-",{group:a.paragraph,icon:"justifyjustify",subMenu:[{label:a.justifyleft,cmdName:"justify",value:"left"},{label:a.justifyright,cmdName:"justify",value:"right"},{label:a.justifycenter,cmdName:"justify",value:"center"},{label:a.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:a.table,icon:"table",subMenu:[{label:a.inserttable,cmdName:"inserttable"},{label:a.deletetable,cmdName:"deletetable"},"-",{label:a.deleterow,
cmdName:"deleterow"},{label:a.deletecol,cmdName:"deletecol"},{label:a.insertcol,cmdName:"insertcol"},{label:a.insertcolnext,cmdName:"insertcolnext"},{label:a.insertrow,cmdName:"insertrow"},{label:a.insertrownext,cmdName:"insertrownext"},"-",{label:a.insertcaption,cmdName:"insertcaption"},{label:a.deletecaption,cmdName:"deletecaption"},{label:a.inserttitle,cmdName:"inserttitle"},{label:a.deletetitle,cmdName:"deletetitle"},{label:a.inserttitlecol,cmdName:"inserttitlecol"},{label:a.deletetitlecol,cmdName:"deletetitlecol"},
"-",{label:a.mergecells,cmdName:"mergecells"},{label:a.mergeright,cmdName:"mergeright"},{label:a.mergedown,cmdName:"mergedown"},"-",{label:a.splittorows,cmdName:"splittorows"},{label:a.splittocols,cmdName:"splittocols"},{label:a.splittocells,cmdName:"splittocells"},"-",{label:a.averageDiseRow,cmdName:"averagedistributerow"},{label:a.averageDisCol,cmdName:"averagedistributecol"},"-",{label:a.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this);this.getDialog("edittd").open()}},
{label:a.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this);this.getDialog("edittable").open()}},{label:a.setbordervisible,cmdName:"setbordervisible"}]},{group:a.tablesort,icon:"tablesort",subMenu:[{label:a.enablesort,cmdName:"enablesort"},{label:a.disablesort,cmdName:"disablesort"},"-",{label:a.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:a.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:a.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},
{label:a.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:a.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:a.borderbk,icon:"borderBack",subMenu:[{label:a.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:a.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:a.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb",
"#ccc"]})}},{label:a.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:a.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:a.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:a.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",
vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",
vAlign:"bottom"}}]},{group:a.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:a.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:a.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:a.tableright,value:"right"}]},"-",{label:a.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:a.insertparagraphafter,cmdName:"insertparagraph"},{label:a.copy,cmdName:"copy"},{label:a.paste,cmdName:"paste"}];if(b.length){var f=
UE.ui.uiUtils;g.addListener("contextmenu",function(k,h){var c=f.getViewportOffsetByEvent(h);g.fireEvent("beforeselectionchange");d&&d.destroy();for(var l=0,p,m=[];p=b[l];l++){var q;(function(b){if("-"==b)(q=m[m.length-1])&&"-"!==q&&m.push("-");else if(b.hasOwnProperty("group")){for(var c=0,d,f=[];d=b.subMenu[c];c++)(function(a){"-"==a?(q=f[f.length-1])&&"-"!==q?f.push("-"):f.splice(f.length-1):(g.commands[a.cmdName]||UE.commands[a.cmdName]||a.query)&&-1<(a.query?a.query():g.queryCommandState(a.cmdName))&&
f.push({label:a.label||g.getLang("contextMenu."+a.cmdName+(a.value||""))||"",className:"edui-for-"+a.cmdName+(a.className?" edui-for-"+a.cmdName+"-"+a.className:""),onclick:a.exec?function(){a.exec.call(g)}:function(){g.execCommand(a.cmdName,a.value)}})})(d);f.length&&m.push({label:function(){switch(b.icon){case "table":return g.getLang("contextMenu.table");case "justifyjustify":return g.getLang("contextMenu.paragraph");case "aligntd":return g.getLang("contextMenu.aligntd");case "aligntable":return g.getLang("contextMenu.aligntable");
case "tablesort":return a.tablesort;case "borderBack":return a.borderbk;default:return""}}(),className:"edui-for-"+b.icon,subMenu:{items:f,editor:g}})}else(g.commands[b.cmdName]||UE.commands[b.cmdName]||b.query)&&-1<(b.query?b.query.call(g):g.queryCommandState(b.cmdName))&&m.push({label:b.label||g.getLang("contextMenu."+b.cmdName),className:"edui-for-"+(b.icon?b.icon:b.cmdName+(b.value||"")),onclick:b.exec?function(){b.exec.call(g)}:function(){g.execCommand(b.cmdName,b.value)}})})(p)}"-"==m[m.length-
1]&&m.pop();d=new UE.ui.Menu({items:m,className:"edui-contextmenu",editor:g});d.render();d.showAt(c);g.fireEvent("aftershowcontextmenu",d);e.preventDefault(h);if(t.ie){try{var u=g.selection.getNative().createRange()}catch(w){return}u.item&&(new E.Range(g.document)).selectNode(u.item(0)).select(!0,!0)}});g.addListener("aftershowcontextmenu",function(a,b){if(g.zeroclipboard){var c=b.items,d;for(d in c)"edui-for-copy"==c[d].className&&g.zeroclipboard.clip(c[d].getDom())}})}}};UE.plugins.shortcutmenu=
function(){var g,a=this.options.shortcutMenu||[];a.length&&(this.addListener("contextmenu mouseup",function(d,b){var f=this,k={type:d,target:b.target||b.srcElement,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY};setTimeout(function(){if(!1===f.selection.getRange().collapsed||"contextmenu"==d)g||(g=new r.editor.ui.ShortCutMenu({editor:f,items:a,theme:f.options.theme,className:"edui-shortcutmenu"}),g.render(),f.fireEvent("afterrendershortcutmenu",g)),g.show(k,!!UE.plugins.contextmenu)});
if("contextmenu"==d&&(e.preventDefault(b),t.ie9below)){try{var h=f.selection.getNative().createRange()}catch(c){return}h.item&&(new E.Range(f.document)).selectNode(h.item(0)).select(!0,!0)}}),this.addListener("keydown",function(a){"keydown"==a&&g&&!g.isHidden&&g.hide()}))};UE.plugins.basestyle=function(){var g={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},a=function(a,b){return e.filterNodeList(a.selection.getStartElementPath(),b)},d=this;d.addshortcutkey({Bold:"ctrl+66",
Italic:"ctrl+73",Underline:"ctrl+85"});d.addInputRule(function(a){n.each(a.getNodesByTagName("b i"),function(a){switch(a.tagName){case "b":a.tagName="strong";break;case "i":a.tagName="em"}})});for(var b in g)(function(b,g){d.commands[b]={execCommand:function(b){var c=d.selection.getRange(),f=a(this,g);if(c.collapsed){if(f)b=d.document.createTextNode(""),c.insertNode(b).removeInlineStyle(g),c.setStartBefore(b),e.remove(b);else{f=c.document.createElement(g[0]);if("superscript"==b||"subscript"==b)b=
d.document.createTextNode(""),c.insertNode(b).removeInlineStyle(["sub","sup"]).setStartBefore(b).collapse(!0);c.insertNode(f).setStart(f,0)}c.collapse(!0)}else{if("superscript"==b||"subscript"==b)f&&f.tagName.toLowerCase()==b||c.removeInlineStyle(["sub","sup"]);f?c.removeInlineStyle(g):c.applyInlineStyle(g[0])}c.select()},queryCommandState:function(){return a(this,g)?1:0}}})(b,g[b])};UE.plugins.elementpath=function(){var e,a,d=this;d.setOpt("elementPathEnabled",!0);d.options.elementPathEnabled&&(d.commands.elementpath=
{execCommand:function(b,f){var g=a[f],h=d.selection.getRange();e=1*f;h.selectNode(g).select()},queryCommandValue:function(){var b=[].concat(this.selection.getStartElementPath()).reverse(),d=[];a=b;for(var g=0,h;h=b[g];g++)if(3!=h.nodeType){var c=h.tagName.toLowerCase();"img"==c&&h.getAttribute("anchorname")&&(c="anchor");d[g]=c;if(e==g){e=-1;break}}return d}})};UE.plugins.formatmatch=function(){function g(k,h){var c;t.webkit&&(c="IMG"==h.target.tagName?h.target:null);a.undoManger&&a.undoManger.save();
var l=a.selection.getRange();c=c||l.getClosedNode();if(b&&c&&"IMG"==c.tagName)c.style.cssText+=";float:"+(b.style.cssFloat||b.style.styleFloat||"none")+";display:"+(b.style.display||"inline"),b=null;else if(!b){if(l.collapsed){var p=a.document.createTextNode("match");l.insertNode(p).select()}a.__hasEnterExecCommand=!0;l=a.options.removeFormatAttributes;a.options.removeFormatAttributes="";a.execCommand("removeformat");a.options.removeFormatAttributes=l;a.__hasEnterExecCommand=!1;l=a.selection.getRange();
d.length&&(c=l,p&&c.selectNode(p),c.applyInlineStyle(d[d.length-1].tagName,null,d));p&&l.setStartBefore(p).collapse(!0);l.select();p&&e.remove(p)}a.undoManger&&a.undoManger.save();a.removeListener("mouseup",g);f=0}var a=this,d=[],b,f=0;a.addListener("reset",function(){d=[];f=0});a.commands.formatmatch={execCommand:function(k){if(f)f=0,d=[],a.removeListener("mouseup",g);else{k=a.selection.getRange();b=k.getClosedNode();if(!b||"IMG"!=b.tagName){k.collapse(!0).shrinkBoundary();d=e.findParents(k.startContainer,
!0,function(a){return!e.isBlockElm(a)&&1==a.nodeType});k=0;for(var h;h=d[k];k++)if("A"==h.tagName){d.splice(k,1);break}}a.addListener("mouseup",g);f=1}},queryCommandState:function(){return f},notNeedUndo:1}};UE.plugins.customstyle=function(){var g=this;g.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},
{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});g.commands.customstyle={execCommand:function(a,d){var b=d.tag,f=e.findParent(this.selection.getStart(),function(a){return a.getAttribute("label")},!0),g={};for(h in d)void 0!==d[h]&&(g[h]=d[h]);delete g.tag;if(f&&f.getAttribute("label")==d.label){var h=this.selection.getRange();
var c=h.createBookmark();if(h.collapsed)if(z.$block[f.tagName]){var l=this.document.createElement("p");e.moveChild(f,l);f.parentNode.insertBefore(l,f);e.remove(f)}else e.remove(f,!0);else{f=e.getCommonAncestor(c.start,c.end);g=e.getElementsByTagName(f,b);(new RegExp(b,"i")).test(f.tagName)&&g.push(f);for(var p=0,m;m=g[p++];)if(m.getAttribute("label")==d.label){l=e.getPosition(m,c.start);var q=e.getPosition(m,c.end);(l&e.POSITION_FOLLOWING||l&e.POSITION_CONTAINS)&&(q&e.POSITION_PRECEDING||q&e.POSITION_CONTAINS)&&
z.$block[b]&&(l=this.document.createElement("p"),e.moveChild(m,l),m.parentNode.insertBefore(l,m));e.remove(m,!0)}(f=e.findParent(f,function(a){return a.getAttribute("label")==d.label},!0))&&e.remove(f,!0)}h.moveToBookmark(c).select()}else z.$block[b]?(this.execCommand("paragraph",b,g,"customstyle"),h=this.selection.getRange(),h.collapsed||(h.collapse(),f=e.findParent(this.selection.getStart(),function(a){return a.getAttribute("label")==d.label},!0),b=this.document.createElement("p"),e.insertAfter(f,
b),e.fillNode(this.document,b),h.setStart(b,0).setCursor())):(h=this.selection.getRange(),h.collapsed?(f=this.document.createElement(b),e.setAttributes(f,g),h.insertNode(f).setStart(f,0).setCursor()):(c=h.createBookmark(),h.applyInlineStyle(b,g).moveToBookmark(c).select()))},queryCommandValue:function(){var a=e.filterNodeList(this.selection.getStartElementPath(),function(a){return a.getAttribute("label")});return a?a.getAttribute("label"):""}};g.addListener("keyup",function(a,d){var b=d.keyCode||
d.which;if(32==b||13==b)if(b=g.selection.getRange(),b.collapsed){var f=e.findParent(g.selection.getStart(),function(a){return a.getAttribute("label")},!0);if(f&&z.$block[f.tagName]&&e.isEmptyNode(f)){var k=g.document.createElement("p");e.insertAfter(f,k);e.fillNode(g.document,k);e.remove(f);b.setStart(k,0).setCursor()}}})};UE.commands.insertparagraph={execCommand:function(g,a){for(var d=this.selection.getRange(),b=d.startContainer,f;b&&!e.isBody(b);)f=b,b=b.parentNode;f&&(b=this.document.createElement("p"),
a?f.parentNode.insertBefore(b,f):f.parentNode.insertBefore(b,f.nextSibling),e.fillNode(this.document,b),d.setStart(b,0).setCursor(!1,!0))}};UE.plugin.register("section",function(){function g(a){this.tag="";this.level=-1;this.parentSection=this.previousSection=this.nextSection=this.dom=null;this.startAddress=[];this.endAddress=[];this.children=[]}function a(a){var b=new g;return n.extend(b,a)}function d(a,b){for(var d=b,c=0;c<a.length;c++){if(!d.childNodes)return null;d=d.childNodes[a[c]]}return d}
var b=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){b.fireEvent("updateSections")}},bindEvents:{ready:function(){b.fireEvent("updateSections");e.on(b.body,"drop paste",function(){b.fireEvent("updateSections")})},afterexeccommand:function(a,d){"paragraph"==d&&b.fireEvent("updateSections")},keyup:function(a,b){if(1!=this.selection.getRange().collapsed)this.fireEvent("updateSections");else{var d=b.keyCode||b.which;13!=d&&8!=d&&46!=d||this.fireEvent("updateSections")}}},
commands:{getsections:{execCommand:function(b,d){function f(b,d){for(var e,h=null,l,k=b.childNodes,p=0,q=k.length;p<q;p++){l=k[p];a:{e=l;for(var u=0;u<c.length;u++)if(c[u](e)){e=u;break a}e=-1}if(0<=e){h=g.selection.getRange().selectNode(l).createAddress(!0).startAddress;h=a({tag:l.tagName,title:l.innerText||l.textContent||"",level:e,dom:l,startAddress:n.clone(h,[]),endAddress:n.clone(h,[]),children:[]});m.nextSection=h;for(l=h.previousSection=m;e<=l.level;)l=l.parentSection;h.parentSection=l;l.children.push(h);
h=m=h}else 1===l.nodeType&&f(l,d),h&&h.endAddress[h.endAddress.length-1]++}}for(var c=d||"h1 h2 h3 h4 h5 h6".split(" "),e=0;e<c.length;e++)"string"==typeof c[e]?c[e]=function(a){return function(b){return b.tagName==a.toUpperCase()}}(c[e]):"function"!=typeof c[e]&&(c[e]=function(a){return null});var g=this,m=e=a({level:-1,title:"root"});f(g.body,e);return e},notNeedUndo:!0},movesection:{execCommand:function(a,b,h,c){if(b&&h&&-1!=h.level){h=c?h.endAddress:h.startAddress;a=d(h,this.body);var f;if(!(f=
!h||!a)){f=b.startAddress;for(var g=!1,m=!1,k=0;k<f.length&&!(k>=h.length);k++)if(h[k]>f[k]){g=!0;break}else if(h[k]<f[k])break;for(k=0;k<b.endAddress.length&&!(k>=h.length);k++)if(h[k]<f[k]){m=!0;break}else if(h[k]>f[k])break;f=g&&m}if(!f){h=d(b.startAddress,this.body);b=d(b.endAddress,this.body);if(c)for(c=b;c&&!(e.getPosition(h,c)&e.POSITION_FOLLOWING);){f=c.previousSibling;e.insertAfter(a,c);if(c==h)break;c=f}else for(c=h;c&&!(e.getPosition(c,b)&e.POSITION_FOLLOWING);){f=c.nextSibling;a.parentNode.insertBefore(c,
a);if(c==b)break;c=f}this.fireEvent("updateSections")}}}},deletesection:{execCommand:function(a,b,d){function c(a){for(var b=f.body,c=0;c<a.length;c++){if(!b.childNodes)return null;b=b.childNodes[a[c]]}return b}var f=this;if(b){a=c(b.startAddress);b=c(b.endAddress);if(d)e.remove(a);else for(;a&&e.inDoc(b,f.document)&&!(e.getPosition(a,b)&e.POSITION_FOLLOWING);)d=a.nextSibling,e.remove(a),a=d;f.fireEvent("updateSections")}}},selectsection:{execCommand:function(a,b){if(!b&&!b.dom)return!1;var d=this.selection.getRange(),
c={startAddress:n.clone(b.startAddress,[]),endAddress:n.clone(b.endAddress,[])};c.endAddress[c.endAddress.length-1]++;d.moveToAddress(c).select().scrollToView();return!0},notNeedUndo:!0},scrolltosection:{execCommand:function(a,b){if(!b&&!b.dom)return!1;var d=this.selection.getRange(),c={startAddress:b.startAddress,endAddress:b.endAddress};c.endAddress[c.endAddress.length-1]++;d.moveToAddress(c).scrollToView();return!0},notNeedUndo:!0}}}});UE.commands.uploadimage={execCommand:function(){function e(d){var b=
d.attachment_url;var f=a.options.uploadImageRule||"";if(b){for(var e=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/],f=f||"",h=0;h<e.length;h++)b=b.replace(e[h],a.options.UEDITOR_QNCDN_URL);b=b.replace("imgqntest.koudaitong.com","dn-kdt-img-test.qbox.me");if(!b.match(/^(https?:)?\/\//i))b=a.options.UEDITOR_QNCDN_URL+"/"+b+f;else if(b.match(a.options.UEDITOR_QNCDN_URL)||b.match("dn-kdt-img-test.qbox.me"))b.match("!")||
(b+=f)}else b=void 0;a.execCommand("insertImage",{src:b,_src:b,_width:d.width,_height:d.height})}var a=this;window.__ueditor_image.initialize({callback:function(a){if("[object Array]"==Object.prototype.toString.call(a))for(var b=0;b<a.length;b++)e(a[b]);else e(a)}})}};UE.commands.chooseimage={execCommand:function(){var e=window.__ueditor_image;e||console.warn("\u4f60\u9700\u8981\u5728\u9875\u9762\u4e2d\u5f15\u5165\u5bcc\u6587\u672c\u7684\u63d2\u4ef6\u3002require\uff08'components/ueditor_plugins/app')");
e.initialize({multiChoose:!1,callback:function(a){window.NC.trigger("ueditorChooseImage",a)}})}};UE.commands.insertgood={execCommand:function(){$(".goods-list").trigger("click")}};UE.commands.imagefloat={execCommand:function(g,a){var d=this.selection.getRange();if(!d.collapsed){var b=d.getClosedNode();if(b&&"IMG"==b.tagName)switch(a){case "left":case "right":case "none":for(var f=b.parentNode,k,h;z.$inline[f.tagName]||"A"==f.tagName;)f=f.parentNode;k=f;if("P"==k.tagName&&"center"==e.getStyle(k,"text-align")){if(!e.isBody(k)&&
1==e.getChildCount(k,function(a){return!e.isBr(a)&&!e.isWhitespace(a)}))if(f=k.previousSibling,h=k.nextSibling,f&&h&&1==f.nodeType&&1==h.nodeType&&f.tagName==h.tagName&&e.isBlockElm(f)){for(f.appendChild(k.firstChild);h.firstChild;)f.appendChild(h.firstChild);e.remove(k);e.remove(h)}else e.setStyle(k,"text-align","");d.selectNode(b).select()}e.setStyle(b,"float","none"==a?"":a);"none"==a&&e.removeAttributes(b,"align");break;case "center":if("center"!=this.queryCommandValue("imagefloat")){f=b.parentNode;
e.setStyle(b,"float","");e.removeAttributes(b,"align");for(k=b;f&&1==e.getChildCount(f,function(a){return!e.isBr(a)&&!e.isWhitespace(a)})&&(z.$inline[f.tagName]||"A"==f.tagName);)k=f,f=f.parentNode;d.setStartBefore(k).setCursor(!1);f=this.document.createElement("div");f.appendChild(k);e.setStyle(k,"float","");this.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+f.innerHTML+"</p>");k=this.document.getElementById("_img_parent_tmp");k.removeAttribute("id");k=k.firstChild;
d.selectNode(k).select();(h=k.parentNode.nextSibling)&&e.isEmptyNode(h)&&e.remove(h)}}}},queryCommandValue:function(){var g=this.selection.getRange();if(g.collapsed)return"none";if((g=g.getClosedNode())&&1==g.nodeType&&"IMG"==g.tagName){var a=e.getComputedStyle(g,"float")||g.getAttribute("align");"none"==a&&(a="center"==e.getComputedStyle(g.parentNode,"text-align")?"center":a);return{left:1,right:1,center:1}[a]?a:"none"}return"none"},queryCommandState:function(){var e=this.selection.getRange();return e.collapsed?
-1:(e=e.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?0:-1}};UE.commands.insertimage={execCommand:function(g,a){a=n.isArray(a)?a:[a];if(a.length){var d=this.selection.getRange(),b=d.getClosedNode();if(!0!==this.fireEvent("beforeinsertimage",a)){if(!b||!/img/i.test(b.tagName)||"edui-faked-video"==b.className&&-1==b.className.indexOf("edui-upload-video")||b.getAttribute("word_img")){var d=[];var f=a[0];if(1==a.length)b="<img"+(f._width?' data-origin-width="'+f._width+'" ':"")+(f._height?' data-origin-height="'+
f._height+'" ':"")+' src="'+f.src+'" '+(f._src?' _src="'+f._src+'" ':"")+(f.width?'width="'+f.width+'" ':"")+(f.height?' height="'+f.height+'" ':"")+("left"==f.floatStyle||"right"==f.floatStyle?' style="float:'+f.floatStyle+';"':"")+(f.title&&""!=f.title?' title="'+f.title+'"':"")+(f.border&&"0"!=f.border?' border="'+f.border+'"':"")+(f.alt&&""!=f.alt?' alt="'+f.alt+'"':"")+(f.hspace&&"0"!=f.hspace?' hspace = "'+f.hspace+'"':"")+(f.vspace&&"0"!=f.vspace?' vspace = "'+f.vspace+'"':"")+"/>","center"==
f.floatStyle&&(b='<p style="text-align: center">'+b+"</p>"),d.push(b);else for(var k=0;f=a[k++];)b="<p "+("center"==f.floatStyle?'style="text-align: center" ':"")+"><img"+(f._width?' data-origin-width="'+f._width+'" ':"")+(f._height?' data-origin-height="'+f._height+'" ':"")+' src="'+f.src+'" '+(f.width?'width="'+f.width+'" ':"")+(f._src?' _src="'+f._src+'" ':"")+(f.height?' height="'+f.height+'" ':"")+' style="'+(f.floatStyle&&"center"!=f.floatStyle?"float:"+f.floatStyle+";":"")+(f.border||"")+'" '+
(f.title?' title="'+f.title+'"':"")+" /></p>",d.push(b);this.execCommand("insertHtml",d.join(""))}else f=a.shift(),k=f.floatStyle,delete f.floatStyle,e.setAttributes(b,f),this.execCommand("imagefloat",k),0<a.length&&(d.setStartAfter(b).setCursor(!1,!0),this.execCommand("insertimage",a));this.fireEvent("afterinsertimage",a)}}}};UE.commands.emotion={execCommand:function(){var e=null,a=this,d=window.__ueditor_emotion;d?(-1!=(location.pathname||"").indexOf("menu")&&(e=["Qq"]),new d({tabs:e,of:a.document.querySelector(".edui-for-emotion"),
arrow:"top-center",callback:function(b){a.execCommand("insertImage",{src:b,_src:b})}})):console.warn("\u4f60\u9700\u8981\u5728\u9875\u9762\u4e2d\u5f15\u5165\u5bcc\u6587\u672c\u7684\u63d2\u4ef6\u3002require\uff08'components/ueditor_plugins/app')")}};r=r||{};r.editor=r.editor||{};UE.ui=r.editor.ui={};(function(){function e(){var a=document.getElementById("edui_fixedlayer");k.setViewportOffset(a,{left:0,top:0})}var a=r.editor.browser,d=r.editor.dom.domUtils,b=window.$EDITORUI={},f=0,k=r.editor.ui.uiUtils=
{uid:function(a){return a?a.ID$EDITORUI||(a.ID$EDITORUI=++f):++f},hook:function(a,b){if(a&&a._callbacks)var c=a;else c=function(){var b;a&&(b=a.apply(this,arguments));for(var d=c._callbacks,f=d.length;f--;){var e=d[f].apply(this,arguments);void 0===b&&(b=e)}return b},c._callbacks=[];c._callbacks.push(b);return c},createElementByHtml:function(a){var b=document.createElement("div");b.innerHTML=a;b=b.firstChild;b.parentNode.removeChild(b);return b},getViewportElement:function(){return a.ie&&a.quirks?
document.body:document.documentElement},getClientRect:function(a){try{var b=a.getBoundingClientRect()}catch(m){b={left:0,top:0,height:0,width:0}}for(var f={left:Math.round(b.left),top:Math.round(b.top),height:Math.round(b.bottom-b.top),width:Math.round(b.right-b.left)},e;(e=a.ownerDocument)!==document&&(a=d.getWindow(e).frameElement);)b=a.getBoundingClientRect(),f.left+=b.left,f.top+=b.top;f.bottom=f.top+f.height;f.right=f.left+f.width;return f},getViewportRect:function(){var a=k.getViewportElement(),
b=(window.innerWidth||a.clientWidth)|0,a=(window.innerHeight||a.clientHeight)|0;return{left:0,top:0,height:a,width:b,bottom:a,right:b}},setViewportOffset:function(a,b){var c=k.getFixedLayer();a.parentNode===c?(a.style.left=b.left+"px",a.style.top=b.top+"px"):d.setViewportOffset(a,b)},getEventOffset:function(a){var b=k.getClientRect(a.target||a.srcElement);a=k.getViewportOffsetByEvent(a);return{left:a.left-b.left,top:a.top-b.top}},getViewportOffsetByEvent:function(a){var b=a.target||a.srcElement,f=
d.getWindow(b).frameElement;a={left:a.clientX,top:a.clientY};f&&b.ownerDocument!==document&&(b=k.getClientRect(f),a.left+=b.left,a.top+=b.top);return a},setGlobal:function(a,c){b[a]=c;return'$EDITORUI["'+a+'"]'},unsetGlobal:function(a){delete b[a]},copyAttributes:function(b,c){for(var f=c.attributes,e=f.length;e--;){var h=f[e];"style"==h.nodeName||"class"==h.nodeName||a.ie&&!h.specified||b.setAttribute(h.nodeName,h.nodeValue)}c.className&&d.addClass(b,c.className);c.style.cssText&&(b.style.cssText+=
";"+c.style.cssText)},removeStyle:function(a,b){if(a.style.removeProperty)a.style.removeProperty(b);else if(a.style.removeAttribute)a.style.removeAttribute(b);else throw"";},contains:function(a,b){return a&&b&&(a===b?!1:a.contains?a.contains(b):a.compareDocumentPosition(b)&16)},startDrag:function(a,b,d){function c(a){b.ondragmove(a.clientX-f,a.clientY-e,a);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}d=d||document;var f=a.clientX,e=a.clientY;if(d.addEventListener){var g=function(a){d.removeEventListener("mousemove",
c,!0);d.removeEventListener("mouseup",g,!0);window.removeEventListener("mouseup",g,!0);b.ondragstop()};d.addEventListener("mousemove",c,!0);d.addEventListener("mouseup",g,!0);window.addEventListener("mouseup",g,!0);a.preventDefault()}else{var h=function(){l.releaseCapture();l.detachEvent("onmousemove",c);l.detachEvent("onmouseup",h);l.detachEvent("onlosecaptrue",h);b.ondragstop()},l=a.srcElement;l.setCapture();l.attachEvent("onmousemove",c);l.attachEvent("onmouseup",h);l.attachEvent("onlosecaptrue",
h);a.returnValue=!1}b.ondragstart()},getFixedLayer:function(){var b=document.getElementById("edui_fixedlayer");null==b&&(b=document.createElement("div"),b.id="edui_fixedlayer",document.body.appendChild(b),a.ie&&8>=a.version?(b.style.position="absolute",d.on(window,"scroll",e),d.on(window,"resize",r.editor.utils.defer(e,0,!0)),setTimeout(e)):b.style.position="fixed",b.style.left="0",b.style.top="0",b.style.width="0",b.style.height="0");return b},makeUnselectable:function(b){if(a.opera||a.ie&&9>a.version){if(b.unselectable=
"on",b.hasChildNodes())for(var c=0;c<b.childNodes.length;c++)1==b.childNodes[c].nodeType&&k.makeUnselectable(b.childNodes[c])}else void 0!==b.style.MozUserSelect?b.style.MozUserSelect="none":void 0!==b.style.WebkitUserSelect?b.style.WebkitUserSelect="none":void 0!==b.style.KhtmlUserSelect&&(b.style.KhtmlUserSelect="none")}}})();(function(){var g=r.editor.utils,a=r.editor.ui.uiUtils,d=r.editor.EventBase,b=r.editor.ui.UIBase=function(){};b.prototype={className:"",uiName:"",initOptions:function(b){for(var d in b)this[d]=
b[d];this.id=this.id||"edui"+a.uid()},initUIBase:function(){this._globalKey=g.unhtml(a.setGlobal(this.id,this))},render:function(b){for(var d=this.renderHtml(),d=a.createElementByHtml(d),f=e.getElementsByTagName(d,"*"),c="edui-"+(this.theme||this.editor.options.theme),g=document.getElementById("edui_fixedlayer"),p=0,m;m=f[p++];)e.addClass(m,c);e.addClass(d,c);g&&(g.className="",e.addClass(g,c));f=this.getDom();null!=f?(f.parentNode.replaceChild(d,f),a.copyAttributes(d,f)):("string"==typeof b&&(b=
document.getElementById(b)),b=b||a.getFixedLayer(),e.addClass(b,c),b.appendChild(d));this.postRender()},getDom:function(a){return a?document.getElementById(this.id+"_"+a):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(a){var b="edui-"+this.uiName;return a.replace(/##/g,this.id).replace(/%%-/g,this.uiName?b+"-":"").replace(/%%/g,(this.uiName?b:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},
dispose:function(){var b=this.getDom();b&&r.editor.dom.domUtils.remove(b);a.unsetGlobal(this.id)}};g.inherits(b,d)})();(function(){var e=r.editor.utils,a=r.editor.ui.UIBase,d=r.editor.ui.Separator=function(a){this.initOptions(a);this.initSeparator()};d.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};e.inherits(d,a)})();(function(){var e=r.editor.utils,a=r.editor.dom.domUtils,d=r.editor.ui.UIBase,b=r.editor.ui.uiUtils,
f=r.editor.ui.Mask=function(a){this.initOptions(a);this.initUIBase()};f.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var b=this;a.on(window,"resize",function(){setTimeout(function(){b.isHidden()||b._fill()})})},show:function(a){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=a},hide:function(){this.getDom().style.display="none";
this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(a,b){this.fireEvent("click",a,b)},_fill:function(){var a=this.getDom(),d=b.getViewportRect();a.style.width=d.width+"px";a.style.height=d.height+"px"}};e.inherits(f,d)})();(function(){function e(a,b){for(var c,d=0;d<h.length;d++)if(c=h[d],!c.isHidden()&&!1!==c.queryAutoHide(b)){if(a&&/scroll/ig.test(a.type)&&"edui-wordpastepop"==c.className)return;c.hide()}h.length&&
c.editor.fireEvent("afterhidepop")}var a=r.editor.utils,d=r.editor.ui.uiUtils,b=r.editor.dom.domUtils,f=r.editor.ui.UIBase,k=r.editor.ui.Popup=function(a){this.initOptions(a);this.initPopup()},h=[];k.postHide=e;var c=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];k.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase();h.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+
this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:f.prototype.postRender,postRender:function(){this.content instanceof f&&this.content.postRender();if(this.captureWheel&&!this.captured){this.captured=!0;var a=(document.documentElement.clientHeight||document.body.clientHeight)-80,c=this.getDom().offsetHeight,e=d.getClientRect(this.combox.getDom()).top,g=this.getDom("content"),
h=this.getDom("body").getElementsByTagName("iframe"),k=this;for(h.length&&(h=h[0]);e+c>a;)c-=30;g.style.height=c+"px";h&&(h.style.height=c+"px");if(window.XMLHttpRequest)b.on(g,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;g.scrollTop=a.wheelDelta?g.scrollTop-a.wheelDelta/120*60:g.scrollTop-a.detail/-3*60});else b.on(this.getDom(),"mousewheel",function(a){a.returnValue=!1;k.getDom("content").scrollTop-=a.wheelDelta/120*
60})}this.fireEvent("postRenderAfter");this.hide(!0);this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var a=this.getDom("content");return d.getClientRect(a)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var a=this.getDom("body");a.style.width="";a.style.height="";var b=this.mesureSize();if(this.captureWheel){a.style.width=-(-20-b.width)+"px";var c=parseInt(this.getDom("content").style.height,
10);!window.isNaN(c)&&(b.height=c)}else a.style.width=b.width+"px";a.style.height=b.height+"px";this.__size=b;this.captureWheel&&(this.getDom("content").style.overflow="auto");return b},showAnchor:function(a,b){this.showAnchorRect(d.getClientRect(a),b)},showAnchorRect:function(a,f,e){this._doAutoRender();var g=d.getViewportRect();this.getDom().style.visibility="hidden";this._show();e=this.fitSize();if(f){f=this.canSideLeft&&a.right+e.width>g.right&&a.left>e.width;g=this.canSideUp&&a.top+e.height>
g.bottom&&a.bottom>e.height;var h=f?a.left-e.width:a.right;a=g?a.bottom-e.height:a.top}else f=this.canSideLeft&&a.right+e.width>g.right&&a.left>e.width,g=this.canSideUp&&a.top+e.height>g.bottom&&a.bottom>e.height,h=f?a.right-e.width:a.left,a=g?a.top-e.height:a.bottom;e=this.getDom();d.setViewportOffset(e,{left:h,top:a});b.removeClasses(e,c);e.className+=" "+c[2*(g?1:0)+(f?1:0)];this.editor&&(e.style.zIndex=1*this.editor.container.style.zIndex+10,r.editor.ui.uiUtils.getFixedLayer().style.zIndex=e.style.zIndex-
1);this.getDom().style.visibility="visible"},showAt:function(a){var b=a.left;a=a.top;this.showAnchorRect({left:b,top:a,right:b,bottom:a,height:0,width:0},!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(a){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,a||this.fireEvent("hide"))},queryAutoHide:function(a){return!a||
!d.contains(this.getDom(),a)}};a.inherits(k,f);b.on(document,"mousedown",function(a){e(a,a.target||a.srcElement)});b.on(window,"scroll",function(a,b){e(a,b)})})();(function(){var e=r.editor.utils,a=r.editor.ui.UIBase,d=r.editor.ui.ColorPicker=function(a){this.initOptions(a);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};d.prototype={getHtmlTpl:function(){for(var a=this.editor,d='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+
this.noColorText+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+a.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',e=0;e<b.length;e++)e&&0===e%10&&(d+="</tr>"+
(60==e?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+a.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==e?' class="edui-colorpicker-tablefirstrow"':"")+">"),d+=70>e?'<td style="padding: 0 2px;"><a hidefocus title="'+b[e]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+b[e]+'" style="background-color:#'+b[e]+";border:solid #ccc;"+(10>e||60<=e?"border-width:1px;":
10<=e&&20>e?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return d+"</tr></table></div>"},_onTableClick:function(a){(a=(a.target||a.srcElement).getAttribute("data-color"))&&this.fireEvent("pickcolor",a)},_onTableOver:function(a){if(a=(a.target||a.srcElement).getAttribute("data-color"))this.getDom("preview").style.backgroundColor=a},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};e.inherits(d,
a);var b="ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646 f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806 c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0 ".split(" ")})();
(function(){var e=r.editor.utils,a=r.editor.ui.uiUtils,d=r.editor.ui.UIBase,b=r.editor.ui.TablePicker=function(a){this.initOptions(a);this.initTablePicker()};b.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},
_UIBase_render:d.prototype.render,render:function(a){this._UIBase_render(a);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(a,b){var d=this.getDom("overlay").style,c=this.lengthOfCellSide;d.width=a*c+"px";d.height=b*c+"px";this.getDom("label").innerHTML=a+this.editor.getLang("t_col")+" x "+b+this.editor.getLang("t_row");this.numCols=a;this.numRows=b},_onMouseOver:function(b,d){var f=b.relatedTarget||b.fromElement;a.contains(d,f)||
d===f||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(b,d){var f=b.relatedTarget||b.toElement;a.contains(d,f)||d===f||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(b,d){this.getDom("overlay");var f=a.getEventOffset(b),c=this.lengthOfCellSide;this._track(Math.ceil(f.left/
c),Math.ceil(f.top/c))},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};e.inherits(b,d)})();(function(){var e=r.editor.dom.domUtils,a=r.editor.ui.uiUtils,d='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(r.editor.browser.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');
r.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return d})},Stateful_onMouseEnter:function(a,d){this.target=d;if(!this.isDisabled()||this.alwalysHoverable)this.addState("hover"),this.fireEvent("over")},Stateful_onMouseLeave:function(a,d){if(!this.isDisabled()||this.alwalysHoverable)this.removeState("hover"),
this.removeState("active"),this.fireEvent("out")},Stateful_onMouseOver:function(b,d){var f=b.relatedTarget;a.contains(d,f)||d===f||this.Stateful_onMouseEnter(b,d)},Stateful_onMouseOut:function(b,d){var f=b.relatedTarget;a.contains(d,f)||d===f||this.Stateful_onMouseLeave(b,d)},Stateful_onMouseDown:function(a,d){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(a,d){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&
this.addState("disabled")},hasState:function(a){return e.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){this.hasState(a)||(this.getStateDom().className+=" edui-state-"+a)},removeState:function(a){this.hasState(a)&&e.removeClasses(this.getStateDom(),["edui-state-"+a])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){!this.isDisabled()&&a?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},
setDisabled:function(a){a?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}})();(function(){var e=r.editor.utils,a=r.editor.ui.UIBase,d=r.editor.ui.Stateful,b=r.editor.ui.Button=function(a){if(a.name){var b=a.name,d=a.cssRules;a.className||(a.className="edui-for-"+b);a.cssRules=".edui-default  .edui-for-"+b+" .edui-icon {"+d+"}"}this.initOptions(a);this.initButton()};b.prototype={uiName:"button",label:"",title:"",
showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':
"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(a){a=(a=a.target||a.srcElement)&&a.tagName&&a.tagName.toLowerCase();if("input"==a||"object"==a||"object"==a)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(a){this.getDom("label").innerHTML=a}};e.inherits(b,a);e.extend(b.prototype,d)})();(function(){var e=
r.editor.utils,a=r.editor.ui.uiUtils,d=r.editor.ui.UIBase,b=r.editor.ui.Stateful,f=r.editor.ui.SplitButton=function(a){this.initOptions(a);this.initSplitButton()};f.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();if(null!=this.popup){var a=this.popup;this.popup=null;this.setPopup(a)}},_UIBase_postRender:d.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(b){this.popup!==
b&&(null!=this.popup&&this.popup.dispose(),b.addListener("show",e.bind(this._onPopupShow,this)),b.addListener("hide",e.bind(this._onPopupHide,this)),b.addListener("postrender",e.bind(function(){b.getDom("body").appendChild(a.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(a.getClientRect(this.getDom()).width+20)+'px"></div>'));b.getDom().className+=" "+this.className},this)),this.popup=b)},_onPopupShow:function(){this.addState("opened")},
_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var b=
a.getClientRect(this.getDom());b.top-=this.popup.SHADOW_RADIUS;b.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(b)},_onArrowClick:function(a,b){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}};e.inherits(f,d);e.extend(f.prototype,b,!0)})();(function(){var e=r.editor.utils,a=r.editor.ui.uiUtils,d=r.editor.ui.ColorPicker,b=r.editor.ui.Popup,f=r.editor.ui.SplitButton,k=r.editor.ui.ColorButton=function(a){this.initOptions(a);
this.initColorButton()};k.prototype={initColorButton:function(){var a=this;this.popup=new b({content:new d({noColorText:a.editor.getLang("clearColor"),editor:a.editor,onpickcolor:function(b,d){a._onPickColor(d)},onpicknocolor:function(b,d){a._onPickNoColor(d)}}),editor:a.editor});this.initSplitButton()},_SplitButton_postRender:f.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(a.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));
this.getDom().className+=" edui-colorbutton"},setColor:function(a){this.color=this.getDom("colorlump").style.backgroundColor=a},_onPickColor:function(a){!1!==this.fireEvent("pickcolor",a)&&(this.setColor(a),this.popup.hide())},_onPickNoColor:function(a){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}};e.inherits(k,f)})();(function(){var e=r.editor.utils,a=r.editor.ui.Popup,d=r.editor.ui.TablePicker,b=r.editor.ui.SplitButton,f=r.editor.ui.TableButton=function(a){this.initOptions(a);this.initTableButton()};
f.prototype={initTableButton:function(){var b=this;this.popup=new a({content:new d({editor:b.editor,onpicktable:function(a,c,d){b._onPickTable(c,d)}}),editor:b.editor});this.initSplitButton()},_onPickTable:function(a,b){!1!==this.fireEvent("picktable",a,b)&&this.popup.hide()}};e.inherits(f,b)})();(function(){var e=r.editor.utils,a=r.editor.ui.UIBase,d=r.editor.ui.AutoTypeSetPicker=function(a){this.initOptions(a);this.initAutoTypeSetPicker()};d.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},
getHtmlTpl:function(){var a=this.editor,d=a.options.autotypeset,e=a.getLang("autoTypeSet"),g="textAlignValue"+a.uid,c="imageBlockLineValue"+a.uid,l="symbolConverValue"+a.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(d.mergeEmptyline?"checked":"")+">"+e.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(d.removeEmptyline?"checked":"")+">"+e.delLine+
'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(d.removeClass?"checked":"")+">"+e.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(d.indent?"checked":"")+">"+e.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(d.textAlign?"checked":"")+">"+e.alignment+'</td><td colspan="2" id="'+g+'"><input type="radio" name="'+g+'" value="left" '+(d.textAlign&&"left"==d.textAlign?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+
g+'" value="center" '+(d.textAlign&&"center"==d.textAlign?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+g+'" value="right" '+(d.textAlign&&"right"==d.textAlign?"checked":"")+">"+a.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(d.imageBlockLine?"checked":"")+">"+e.imageFloat+'</td><td nowrap id="'+c+'"><input type="radio" name="'+c+'" value="none" '+(d.imageBlockLine&&"none"==d.imageBlockLine?"checked":"")+">"+a.getLang("default")+
'<input type="radio" name="'+c+'" value="left" '+(d.imageBlockLine&&"left"==d.imageBlockLine?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+c+'" value="center" '+(d.imageBlockLine&&"center"==d.imageBlockLine?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+c+'" value="right" '+(d.imageBlockLine&&"right"==d.imageBlockLine?"checked":"")+">"+a.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(d.clearFontSize?
"checked":"")+">"+e.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(d.clearFontFamily?"checked":"")+">"+e.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(d.removeEmptyNode?"checked":"")+">"+e.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(d.pasteFilter?"checked":"")+">"+e.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(d.bdc2sb||
d.tobdc?"checked":"")+">"+e.symbol+'</td><td id="'+l+'"><input type="radio" name="bdc" value="bdc2sb" '+(d.bdc2sb?"checked":"")+">"+e.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(d.tobdc?"checked":"")+">"+e.tobdc+'</td><td nowrap align="right"><button >'+e.run+"</button></td></tr></table></div></div>"},_UIBase_render:a.prototype.render};e.inherits(d,a)})();(function(){function g(b){for(var c={},d=b.getDom(),f=b.editor.uid,g,h=e.getElementsByTagName(d,"input"),k=h.length-1,n;n=h[k--];)if(g=
n.getAttribute("type"),"checkbox"==g)if(g=n.getAttribute("name"),c[g]&&delete c[g],n.checked)if(n=document.getElementById(g+"Value"+f))if(/input/ig.test(n.tagName))c[g]=n.value;else{n=n.getElementsByTagName("input");for(var x=n.length-1,v;v=n[x--];)if(v.checked){c[g]=v.value;break}}else c[g]=!0;else c[g]=!1;else c[n.getAttribute("value")]=n.checked;d=e.getElementsByTagName(d,"select");for(k=0;f=d[k++];)h=f.getAttribute("name"),c[h]=c[h]?f.value:"";a.extend(b.editor.options.autotypeset,c);b.editor.setPreferences("autotypeset",
c)}var a=r.editor.utils,d=r.editor.ui.Popup,b=r.editor.ui.AutoTypeSetPicker,f=r.editor.ui.SplitButton,k=r.editor.ui.AutoTypeSetButton=function(a){this.initOptions(a);this.initAutoTypeSetButton()};k.prototype={initAutoTypeSetButton:function(){var a=this;this.popup=new d({content:new b({editor:a.editor}),editor:a.editor,hide:function(){!this._hidden&&this.getDom()&&(g(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var c=0;this.popup.addListener("postRenderAfter",
function(){var b=this;if(!c){var d=this.getDom();d.getElementsByTagName("button")[0].onclick=function(){g(b);a.editor.execCommand("autotypeset");b.hide()};e.on(d,"click",function(c){c=c.target||c.srcElement;var d=a.editor.uid;if(c&&"INPUT"==c.tagName){if("imageBlockLine"==c.name||"textAlign"==c.name||"symbolConver"==c.name)for(var f=c.checked,e=document.getElementById(c.name+"Value"+d).getElementsByTagName("input"),h={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},l=0;l<e.length;l++)f?
e[l].value==h[c.name]&&(e[l].checked="checked"):e[l].checked=!1;(c.name=="imageBlockLineValue"+d||c.name=="textAlignValue"+d||"bdc"==c.name)&&(c=c.parentNode.previousSibling.getElementsByTagName("input"))&&(c[0].checked=!0);g(b)}});c=1}});this.initSplitButton()}};a.inherits(k,f)})();(function(){var e=r.editor.utils,a=r.editor.ui.Popup,d=r.editor.ui.Stateful,b=r.editor.ui.UIBase,f=r.editor.ui.CellAlignPicker=function(a){this.initOptions(a);this.initSelected();this.initCellAlignPicker()};f.prototype=
{initSelected:function(){var a={top:0,middle:1,bottom:2},b={left:0,center:1,right:2};this.selected&&(this.selectedIndex=3*a[this.selected.valign]+b[this.selected.align])},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){for(var a=["left","center","right"],b,c,d=[],f=0;9>f;f++)b=this.selectedIndex===f?' class="edui-cellalign-selected" ':"",c=f%3,0===c&&d.push("<tr>"),d.push('<td index="'+f+'" '+b+' stateful><div class="edui-icon edui-'+a[c]+'"></div></td>'),
2===c&&d.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+d.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(b){var d=b.target||b.srcElement;/icon/.test(d.className)&&(this.items[d.parentNode.getAttribute("index")].onclick(),a.postHide(b))},_UIBase_render:b.prototype.render};e.inherits(f,b);e.extend(f.prototype,d,!0)})();(function(){var g=r.editor.utils,a=r.editor.ui.Stateful,
d=r.editor.ui.uiUtils,b=r.editor.ui.UIBase,f=r.editor.ui.PastePicker=function(a){this.initOptions(a);this.initPastePicker()};f.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+
this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(a){this.editor.ui._isTransfer=!0;this.editor.fireEvent("pasteTransfer",a)},_onClick:function(a){var b=e.getNextDomNode(a),c=d.getViewportRect().height,f=d.getClientRect(b);b.style.top=
f.top+f.height>c?-f.height-a.offsetHeight+"px":"";/hidden/ig.test(e.getComputedStyle(b,"visibility"))?(b.style.visibility="visible",e.addClass(a,"edui-state-opened")):(b.style.visibility="hidden",e.removeClasses(a,"edui-state-opened"))},_UIBase_render:b.prototype.render};g.inherits(f,b);g.extend(f.prototype,a,!0)})();(function(){var e=r.editor.utils,a=r.editor.ui.uiUtils,d=r.editor.ui.UIBase,b=r.editor.ui.Toolbar=function(a){this.initOptions(a);this.initToolbar()};b.prototype={items:null,initToolbar:function(){this.items=
this.items||[];this.initUIBase()},add:function(a,b){void 0===b?this.items.push(a):this.items.splice(b,0,a)},getHtmlTpl:function(){for(var a=[],b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+a.join("")+"</div>"},postRender:function(){for(var b=this.getDom(),d=0;d<this.items.length;d++)this.items[d].postRender();a.makeUnselectable(b)},_onMouseDown:function(a){a=
(a=a.target||a.srcElement)&&a.tagName&&a.tagName.toLowerCase();if("input"==a||"object"==a||"object"==a)return!1}};e.inherits(b,d)})();(function(){var e=r.editor.utils,a=r.editor.dom.domUtils,d=r.editor.ui.uiUtils,b=r.editor.ui.UIBase,f=r.editor.ui.Popup,k=r.editor.ui.Stateful,h=r.editor.ui.CellAlignPicker,c=r.editor.ui.Menu=function(a){this.initOptions(a);this.initMenu()},l={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},
postRender:function(){},queryAutoHide:function(){return!0}};c.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];"-"==b?this.items[a]=this.getSeparator():b instanceof p||(b.editor=this.editor,b.theme=this.editor.options.theme,this.items[a]=this.createItem(b))}},getSeparator:function(){return l},createItem:function(a){a.menu=this;return new p(a)},_Popup_getContentHtmlTpl:f.prototype.getContentHtmlTpl,
getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var a=[],b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'<div class="%%-body">'+a.join("")+"</div>"},_Popup_postRender:f.prototype.postRender,postRender:function(){for(var b=this,c=0;c<this.items.length;c++){var f=this.items[c];f.ownerMenu=this;f.postRender()}a.on(this.getDom(),"mouseover",function(a){a=a||event;a=a.relatedTarget||a.fromElement;var c=b.getDom();d.contains(c,a)||c===a||
b.fireEvent("over")});this._Popup_postRender()},queryAutoHide:function(a){if(a){if(d.contains(this.getDom(),a))return!1;for(var b=0;b<this.items.length;b++)if(!1===this.items[b].queryAutoHide(a))return!1}},clearItems:function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];clearTimeout(b._showingTimer);clearTimeout(b._closingTimer);b.subMenu&&b.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&a.remove(this.getDom());this.clearItems()},dispose:function(){this.destroy()}};
e.inherits(c,f);var p=r.editor.ui.MenuItem=function(b){this.initOptions(b);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof c))if(b.className&&-1!=b.className.indexOf("aligntd")){var d=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new f({content:new h(this.subMenu),parentMenu:d,editor:d.editor,destroy:function(){this.getDom()&&a.remove(this.getDom())}});this.subMenu.addListener("postRenderAfter",function(){a.on(this.getDom(),
"mouseover",function(){d.addState("opened")})})}else this.subMenu=new c(this.subMenu)};p.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var a=this;this.addListener("over",function(){a.ownerMenu.fireEvent("submenuover",a);a.subMenu&&a.delayShowSubMenu()});this.subMenu&&(this.getDom().className+=
" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){a.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(a._closingTimer);a._closingTimer=null;a.addState("opened")}),this.ownerMenu.addListener("hide",function(){a.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(b,c){c!==a&&a.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(b){return b&&d.contains(a.getDom(),b)?!1:this._bakQueryAutoHide(b)});
this.getDom().style.tabIndex="-1";d.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var a=this;a.isDisabled()||(a.addState("opened"),clearTimeout(a._showingTimer),clearTimeout(a._closingTimer),a._closingTimer=null,a._showingTimer=setTimeout(function(){a.showSubMenu()},250))},delayHideSubMenu:function(){var a=this;a.isDisabled()||(a.removeState("opened"),clearTimeout(a._showingTimer),a._closingTimer||(a._closingTimer=setTimeout(function(){a.hasState("opened")||
a.hideSubMenu();a._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(a){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(a)},_onClick:function(a,b){this.hasState("disabled")||!1!==this.fireEvent("click",a,b)&&(this.subMenu?this.showSubMenu():f.postHide(a))},
showSubMenu:function(){var a=d.getClientRect(this.getDom());a.right-=5;a.left+=2;a.width-=7;a.top-=4;a.bottom+=4;a.height+=8;this.subMenu.showAnchorRect(a,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}};e.inherits(p,b);e.extend(p.prototype,k,!0)})();(function(){var e=r.editor.utils,a=r.editor.ui.uiUtils,d=r.editor.ui.Menu,b=r.editor.ui.SplitButton,f=r.editor.ui.Combox=function(a){this.initOptions(a);this.initCombox()};f.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var a=
this;this.items=this.items||[];for(var b=0;b<this.items.length;b++){var c=this.items[b];c.uiName="listitem";c.index=b;c.onclick=function(){a.selectByIndex(this.index)}}this.popup=new d({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this});this.initSplitButton()},_SplitButton_postRender:b.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var b=a.getClientRect(this.getDom());
b.top+=1;--b.bottom;b.height-=2;this.popup.showAnchorRect(b)},getValue:function(){return this.value},setValue:function(a){var b=this.indexByValue(a);-1!=b?(this.selectedIndex=b,this.setLabel(this.items[b].label),this.value=this.items[b].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(a)),this.value=a)},setLabel:function(a){this.label=this.getDom("button_body").innerHTML=a},getLabelForUnknowValue:function(a){return a},indexByValue:function(a){for(var b=0;b<this.items.length;b++)if(a==
this.items[b].value)return b;return-1},getItem:function(a){return this.items[a]},selectByIndex:function(a){a<this.items.length&&!1!==this.fireEvent("select",a)&&(this.selectedIndex=a,this.value=this.items[a].value,this.setLabel(this.items[a].label))}};e.inherits(f,b)})();(function(){var e=r.editor.utils,a=r.editor.dom.domUtils,d=r.editor.ui.uiUtils,b=r.editor.ui.Mask,f=r.editor.ui.UIBase,k=r.editor.ui.Button,h=r.editor.ui.Dialog=function(a){if(a.name){var b=a.name,c=a.cssRules;a.className||(a.className=
"edui-for-"+b);c&&(a.cssRules=".edui-default .edui-for-"+b+" .edui-dialog-content  {"+c+"}")}this.initOptions(e.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(a,b){return b?this.onok():this.oncancel()},holdScroll:!1},a));this.initDialog()},c,l,p;h.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var a=this,d=this.editor.options.theme;this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules);this.initUIBase();this.modalMask=
c||(c=new b({className:"edui-dialog-modalmask",theme:d,onclick:function(){p&&p.close(!1)}}));this.dragMask=l||(l=new b({className:"edui-dialog-dragmask",theme:d}));this.closeButton=new k({className:"edui-dialog-closebutton",title:a.closeDialog,theme:d,onclick:function(){a.close(!1)}});this.fullscreen&&this.initResizeEvent();if(this.buttons)for(d=0;d<this.buttons.length;d++)this.buttons[d]instanceof k||(this.buttons[d]=new k(e.extend(this.buttons[d],{editor:this.editor},!0)))},initResizeEvent:function(){var b=
this;a.on(window,"resize",function(){b._hidden||void 0===b._hidden||(b.__resizeTimer&&window.clearTimeout(b.__resizeTimer),b.__resizeTimer=window.setTimeout(function(){b.__resizeTimer=null;var a=b.getDom(),c=b.getDom("content"),f=UE.ui.uiUtils.getClientRect(a),e=UE.ui.uiUtils.getClientRect(c),g=d.getViewportRect();c.style.width=g.width-f.width+e.width+"px";c.style.height=g.height-f.height+e.height+"px";a.style.width=g.width+"px";a.style.height=g.height+"px";b.fireEvent("resize")},100))})},fitSize:function(){var a=
this.getDom("body"),b=this.mesureSize();a.style.width=b.width+"px";a.style.height=b.height+"px";return b},safeSetOffset:function(a){var b=this.getDom(),c=d.getViewportRect(),f=d.getClientRect(b),e=a.left;e+f.width>c.right&&(e=c.right-f.width);a=a.top;a+f.height>c.bottom&&(a=c.bottom-f.height);b.style.left=Math.max(e,0)+"px";b.style.top=Math.max(a,0)+"px"},showAtCenter:function(){var b=d.getViewportRect();if(this.fullscreen){var c=this.getDom(),f=this.getDom("content");c.style.display="block";var e=
UE.ui.uiUtils.getClientRect(c),g=UE.ui.uiUtils.getClientRect(f);c.style.left="-100000px";f.style.width=b.width-e.width+g.width+"px";f.style.height=b.height-e.height+g.height+"px";c.style.width=b.width+"px";c.style.height=b.height+"px";c.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX=
"hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}else this.getDom().style.display="",f=this.fitSize(),e=this.getDom("titlebar").offsetHeight|0,c=b.width/2-f.width/2,b=b.height/2-(f.height-e)/2-e,f=this.getDom(),this.safeSetOffset({left:Math.max(c|0,0),top:Math.max(b|0,0)}),a.hasClass(f,"edui-state-centered")||(f.className+=" edui-state-centered");this._show()},getContentHtml:function(){var a="";"string"==typeof this.content?
a=this.content:this.iframeUrl&&(a='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>');return a},getHtmlTpl:function(){var a="";if(this.buttons){for(var a=[],b=0;b<this.buttons.length;b++)a[b]=this.buttons[b].renderHtml();a='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+a.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?
'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+a+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||
(this.modalMask.render(),this.modalMask.hide());this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var b=this;this.addListener("show",function(){b.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){b.modalMask.hide()});if(this.buttons)for(var c=0;c<this.buttons.length;c++)this.buttons[c].postRender();a.on(window,"resize",function(){setTimeout(function(){b.isHidden()||b.safeSetOffset(d.getClientRect(b.getDom()))})});this._hide()},mesureSize:function(){var a=
this.getDom("body"),b=d.getClientRect(this.getDom("content")).width;a.style.width=b;return d.getClientRect(a)},_onTitlebarMouseDown:function(b,c){if(this.draggable){var f;d.getViewportRect();var e=this;d.startDrag(b,{ondragstart:function(){f=d.getClientRect(e.getDom());e.getDom("contmask").style.visibility="visible";e.dragMask.show(e.getDom().style.zIndex-1)},ondragmove:function(a,b){e.safeSetOffset({left:f.left+a,top:f.top+b})},ondragstop:function(){e.getDom("contmask").style.visibility="hidden";
a.removeClasses(e.getDom(),["edui-state-centered"]);e.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),r.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},
_hide:function(){if(!this._hidden){var a=this.getDom();a.style.display="none";a.style.zIndex="";a.style.width="";a.style.height="";this._hidden=!0;this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(m){this.render(),this.open()}this.showAtCenter();if(this.iframeUrl)try{this.getDom("iframe").focus()}catch(m){}p=this},_onCloseButtonClick:function(a,b){this.close(!1)},close:function(b){if(!1!==this.fireEvent("close",b)){this.fullscreen&&(document.documentElement.style.overflowX=
this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext);this._hide();b=this.getDom("content");var c=this.getDom("iframe");b&&c&&((c=c.contentDocument||c.contentWindow.document)&&(c.body.innerHTML=""),a.remove(b))}}};e.inherits(h,f)})();(function(){var e=r.editor.utils,a=r.editor.ui.Menu,
d=r.editor.ui.SplitButton,b=r.editor.ui.MenuButton=function(a){this.initOptions(a);this.initMenuButton()};b.prototype={initMenuButton:function(){var b=this;this.uiName="menubutton";this.popup=new a({items:b.items,className:b.className,editor:b.editor});this.popup.addListener("show",function(){for(var a=0;a<this.items.length;a++)this.items[a].removeState("checked"),this.items[a].value==b._value&&(this.items[a].addState("checked"),this.value=b._value)});this.initSplitButton()},setValue:function(a){this._value=
a}};e.inherits(b,d)})();(function(){var e=r.editor.utils,a=r.editor.ui.Popup,d=r.editor.ui.SplitButton,b=r.editor.ui.MultiMenuPop=function(a){this.initOptions(a);this.initMultiMenu()};b.prototype={initMultiMenu:function(){var b=this;this.popup=new a({content:"",editor:b.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+b.id+'_iframe" src="'+b.iframeUrl+'" frameborder="0"></iframe>',b.editor.container.style.zIndex&&
(this.getDom().style.zIndex=1*b.editor.container.style.zIndex+1))}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};e.inherits(b,d)})();(function(){function e(a){if(!k.findParent(a.target||a.srcElement,function(a){return k.hasClass(a,"edui-shortcutmenu")||k.hasClass(a,"edui-popup")},!0)){a=0;for(var b;b=h[a++];)b.hide()}}var a=r.editor.ui,d=a.UIBase,b=a.uiUtils,f=r.editor.utils,k=r.editor.dom.domUtils,h=[],c,l=!1,p=a.ShortCutMenu=function(a){this.initOptions(a);this.initShortCutMenu()};
p.postHide=e;p.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();h.push(this)},initEvent:function(){var a=this,b=a.editor.document;k.on(b,"mousemove",function(b){if(!1===a.isHidden&&!a.getSubMenuMark()&&"contextmenu"!=a.eventType){var d=!0,e=a.getDom(),f=e.offsetWidth/2+a.SPACE,g=e.offsetHeight/2,h=Math.abs(b.screenX-a.left),l=Math.abs(b.screenY-a.top);clearTimeout(c);c=setTimeout(function(){0<l&&l<g?a.setOpacity(e,
"1"):l>g&&l<g+70?(a.setOpacity(e,"0.5"),d=!1):l>g+70&&l<g+140&&a.hide();d&&0<h&&h<f?a.setOpacity(e,"1"):h>f&&h<f+70?a.setOpacity(e,"0.5"):h>f+70&&h<f+140&&a.hide()})}});if(t.chrome)k.on(b,"mouseout",function(b){b=b.relatedTarget||b.toElement;null!=b&&"HTML"!=b.tagName||a.hide()});a.editor.addListener("afterhidepop",function(){a.isHidden||(l=!0)})},initItems:function(){if(f.isArray(this.items))for(var b=0,c=this.items.length;b<c;b++){var d=this.items[b].toLowerCase();a[d]&&(this.items[b]=new a[d](this.editor),
this.items[b].className+=" edui-shortcutsubmenu ")}},setOpacity:function(a,b){t.ie&&9>t.version?a.style.filter="alpha(opacity = "+100*parseFloat(b)+");":a.style.opacity=b},getSubMenuMark:function(){l=!1;for(var a=b.getFixedLayer(),a=k.getElementsByTagName(a,"div",function(a){return k.hasClass(a,"edui-shortcutsubmenu edui-popup")}),c=0,d;d=a[c++];)"none"!=d.style.display&&(l=!0);return l},show:function(a,c){function d(a){0>a.left&&(a.left=0);0>a.top&&(a.top=0);g.style.cssText="position:absolute;left:"+
a.left+"px;top:"+a.top+"px;"}function e(a){a.tagName||(a=a.getDom());f.left=parseInt(a.style.left);f.top=parseInt(a.style.top);f.top-=g.offsetHeight+15;d(f)}var f={},g=this.getDom(),h=b.getFixedLayer();this.eventType=a.type;g.style.cssText="display:block;left:-9999px";if("contextmenu"==a.type&&c){var l=k.getElementsByTagName(h,"div","edui-contextmenu")[0];l?e(l):this.editor.addListener("aftershowcontextmenu",function(a,b){e(b)})}else f=b.getViewportOffsetByEvent(a),f.top-=g.offsetHeight+this.SPACE,
f.left+=this.SPACE+20,d(f),this.setOpacity(g,.2);this.isHidden=!1;this.left=a.screenX+g.offsetWidth/2-this.SPACE;this.top=a.screenY-g.offsetHeight/2-this.SPACE;this.editor&&(g.style.zIndex=1*this.editor.container.style.zIndex+10,h.style.zIndex=g.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none");this.isHidden=!0},postRender:function(){if(f.isArray(this.items))for(var a=0,b;b=this.items[a++];)b.postRender()},getHtmlTpl:function(){if(f.isArray(this.items)){var a=[];
for(var b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();a=a.join("")}else a=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+a+"</div>"}};f.inherits(p,d);k.on(document,"mousedown",function(a){e(a)});k.on(window,"scroll",function(a){e(a)})})();(function(){var e=r.editor.utils,a=r.editor.ui.UIBase,d=r.editor.ui.Breakline=function(a){this.initOptions(a);this.initSeparator()};d.prototype={uiName:"Breakline",
initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};e.inherits(d,a)})();(function(){var e=r.editor.utils,a=r.editor.dom.domUtils,d=r.editor.ui.UIBase,b=r.editor.ui.Message=function(a){this.initOptions(a);this.initMessage()};b.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">\u00d7</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},
reset:function(a){var b=this;a.keepshow||(clearTimeout(this.timer),b.timer=setTimeout(function(){b.hide()},a.timeout||4E3));void 0!==a.content&&b.setContent(a.content);void 0!==a.type&&b.setType(a.type);b.show()},postRender:function(){var b=this,d=this.getDom("closer");d&&a.on(d,"click",function(){b.hide()})},setContent:function(a){this.getDom("content").innerHTML=a},setType:function(a){a=a||"info";var b=this.getDom("body");b.className=b.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+
a)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var a=this.getDom("body").match(/edui-message-type-([\w-]+)/);return a?a[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var a=this.getDom();a&&(a.style.display="none",a.parentNode&&a.parentNode.removeChild(a))}};e.inherits(b,d)})();(function(){var e=r.editor.utils,a=r.editor.ui,d=a.Dialog;a.buttons={};a.Dialog=function(a){var b=new d(a);b.addListener("hide",function(){if(b.editor){var a=
b.editor;try{if(t.gecko){var c=a.window.scrollY,d=a.window.scrollX;a.body.focus();a.window.scrollTo(d,c)}else a.focus()}catch(w){}}});return b};for(var b={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",wordimage:"~/dialogs/wordimage/wordimage.html",
attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},
f="undo redo formatmatch bold italic underline fontborder touppercase tolowercase strikethrough subscript superscript source indent outdent blockquote pasteplain pagebreak selectall print horizontal removeformat time date unlink insertparagraphbeforetable insertrow insertcol mergeright mergedown deleterow deletecol splittorows splittocols splittocells mergecells deletetable drafts uploadimage chooseimage insertgood emotion link insertvideo".split(" "),k=0,h;h=f[k++];)h=h.toLowerCase(),a[h]=function(b){return function(c){var d=
new a.Button({className:"edui-for-"+b,title:c.options.labelMap[b]||c.getLang("labelMap."+b)||"",onclick:function(){c.execCommand(b)},theme:c.options.theme,showText:!1});a.buttons[b]=d;c.addListener("selectionchange",function(a,e,f){a=c.queryCommandState(b);-1==a?(d.setDisabled(!0),d.setChecked(!1)):f||(d.setDisabled(!1),d.setChecked(a))});return d}}(h);a.cleardoc=function(b){var c=new a.Button({className:"edui-for-cleardoc",title:b.options.labelMap.cleardoc||b.getLang("labelMap.cleardoc")||"",theme:b.options.theme,
onclick:function(){confirm(b.getLang("confirmClear"))&&b.execCommand("cleardoc")}});a.buttons.cleardoc=c;b.addListener("selectionchange",function(){c.setDisabled(-1==b.queryCommandState("cleardoc"))});return c};var f={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(c in f)(function(b,c){for(var d=0,e;e=c[d++];)(function(c){a[b.replace("float","")+c]=function(d){var e=new a.Button({className:"edui-for-"+b.replace("float","")+
c,title:d.options.labelMap[b.replace("float","")+c]||d.getLang("labelMap."+b.replace("float","")+c)||"",theme:d.options.theme,onclick:function(){d.execCommand(b,c)}});a.buttons[b]=e;d.addListener("selectionchange",function(a,f,g){e.setDisabled(-1==d.queryCommandState(b));e.setChecked(d.queryCommandValue(b)==c&&!g)});return e}})(e)})(c,f[c]);for(k=0;h=["backcolor","forecolor"][k++];)a[h]=function(b){return function(c){var d=new a.ColorButton({className:"edui-for-"+b,color:"default",title:c.options.labelMap[b]||
c.getLang("labelMap."+b)||"",editor:c,onpickcolor:function(a,d){c.execCommand(b,d)},onpicknocolor:function(){c.execCommand(b,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){c.execCommand(b,this.color)}});a.buttons[b]=d;c.addListener("selectionchange",function(){d.setDisabled(-1==c.queryCommandState(b))});return d}}(h);f={noOk:["searchreplace","help","spechars","webapp","preview"],ok:"attachment anchor insertimage map gmap insertframe wordimage insertframe edittip edittable edittd scrawl template music background charts".split(" ")};
for(c in f)(function(c,d){for(var f=0,g;g=d[f++];)t.opera&&"searchreplace"===g||function(d){a[d]=function(f,g,h){g=g||(f.options.iframeUrlMap||{})[d]||b[d];h=f.options.labelMap[d]||f.getLang("labelMap."+d)||"";if(g){var l=new a.Dialog(e.extend({iframeUrl:f.ui.mapUrl(g),editor:f,className:"edui-for-"+d,title:h,holdScroll:"insertimage"===d,fullscreen:/charts|preview/.test(d),closeDialog:f.getLang("closeDialog")},"ok"==c?{buttons:[{className:"edui-okbutton",label:f.getLang("ok"),editor:f,onclick:function(){l.close(!0)}},
{className:"edui-cancelbutton",label:f.getLang("cancel"),editor:f,onclick:function(){l.close(!1)}}]}:{}));f.ui._dialogs[d+"Dialog"]=l}var k=new a.Button({className:"edui-for-"+d,title:h,onclick:function(){if(l)switch(d){case "wordimage":var a=f.execCommand("wordimage");a&&a.length&&(l.render(),l.open());break;case "scrawl":-1!=f.queryCommandState("scrawl")&&(l.render(),l.open());break;default:l.render(),l.open()}},theme:f.options.theme,disabled:"scrawl"==d&&-1==f.queryCommandState("scrawl")||"charts"==
d});a.buttons[d]=k;f.addListener("selectionchange",function(){if(!(d in{edittable:1})){var a=f.queryCommandState(d);k.getDom()&&(k.setDisabled(-1==a),k.setChecked(a))}});return k}}(g.toLowerCase())})(c,f[c]);a.snapscreen=function(c,d,e){e=c.options.labelMap.snapscreen||c.getLang("labelMap.snapscreen")||"";var f=new a.Button({className:"edui-for-snapscreen",title:e,onclick:function(){c.execCommand("snapscreen")},theme:c.options.theme});a.buttons.snapscreen=f;if(d=d||(c.options.iframeUrlMap||{}).snapscreen||
b.snapscreen){var g=new a.Dialog({iframeUrl:c.ui.mapUrl(d),editor:c,className:"edui-for-snapscreen",title:e,buttons:[{className:"edui-okbutton",label:c.getLang("ok"),editor:c,onclick:function(){g.close(!0)}},{className:"edui-cancelbutton",label:c.getLang("cancel"),editor:c,onclick:function(){g.close(!1)}}]});g.render();c.ui._dialogs.snapscreenDialog=g}c.addListener("selectionchange",function(){f.setDisabled(-1==c.queryCommandState("snapscreen"))});return f};a.insertcode=function(b,c,d){c=b.options.insertcode||
[];d=b.options.labelMap.insertcode||b.getLang("labelMap.insertcode")||"";var f=[];e.each(c,function(a,c){f.push({label:a,value:c,theme:b.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var g=new a.Combox({editor:b,items:f,onselect:function(a,c){b.execCommand("insertcode",this.items[c].value)},onbuttonclick:function(){this.showPopup()},title:d,initValue:d,className:"edui-for-insertcode",indexByValue:function(a){if(a)for(var b=0,c;c=
this.items[b];b++)if(-1!=c.value.indexOf(a))return b;return-1}});a.buttons.insertcode=g;b.addListener("selectionchange",function(a,c,e){e||(-1==b.queryCommandState("insertcode")?g.setDisabled(!0):(g.setDisabled(!1),(a=b.queryCommandValue("insertcode"))?(a&&(a=a.replace(/['"]/g,"").split(",")[0]),g.setValue(a)):g.setValue(d)))});return g};a.fontfamily=function(b,c,d){c=b.options.fontfamily||[];d=b.options.labelMap.fontfamily||b.getLang("labelMap.fontfamily")||"";if(c.length){for(var f=0,g,h=[];g=c[f];f++){var l=
b.getLang("fontfamily")[g.name]||"";(function(a,c){h.push({label:a,value:c,theme:b.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(g.label||l,g.val)}var k=new a.Combox({editor:b,items:h,onselect:function(a,c){b.execCommand("FontFamily",this.items[c].value)},onbuttonclick:function(){this.showPopup()},title:d,initValue:d,className:"edui-for-fontfamily",indexByValue:function(a){if(a)for(var b=
0,c;c=this.items[b];b++)if(-1!=c.value.indexOf(a))return b;return-1}});a.buttons.fontfamily=k;b.addListener("selectionchange",function(a,c,d){d||(-1==b.queryCommandState("FontFamily")?k.setDisabled(!0):(k.setDisabled(!1),(a=b.queryCommandValue("FontFamily"))&&(a=a.replace(/['"]/g,"").split(",")[0]),k.setValue(a)))});return k}};a.fontsize=function(b,c,d){d=b.options.labelMap.fontsize||b.getLang("labelMap.fontsize")||"";c=c||b.options.fontsize||[];if(c.length){for(var e=[],f=0;f<c.length;f++){var g=
c[f]+"px";e.push({label:g,value:g,theme:b.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var h=new a.Combox({editor:b,items:e,title:d,initValue:d,onselect:function(a,c){b.execCommand("FontSize",this.items[c].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});a.buttons.fontsize=h;b.addListener("selectionchange",function(a,c,d){d||(-1==b.queryCommandState("FontSize")?
h.setDisabled(!0):(h.setDisabled(!1),h.setValue(b.queryCommandValue("FontSize"))))});return h}};a.paragraph=function(b,c,d){d=b.options.labelMap.paragraph||b.getLang("labelMap.paragraph")||"";c=b.options.paragraph||[];if(!e.isEmptyObject(c)){var f=[],g;for(g in c)f.push({value:g,label:c[g]||b.getLang("paragraph")[g],theme:b.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var h=new a.Combox({editor:b,
items:f,title:d,initValue:d,className:"edui-for-paragraph",onselect:function(a,c){b.execCommand("Paragraph",this.items[c].value)},onbuttonclick:function(){this.showPopup()}});a.buttons.paragraph=h;b.addListener("selectionchange",function(a,c,d){d||(-1==b.queryCommandState("Paragraph")?h.setDisabled(!0):(h.setDisabled(!1),a=b.queryCommandValue("Paragraph"),-1!=h.indexByValue(a)?h.setValue(a):h.setValue(h.initValue)))});return h}};a.customstyle=function(b){var c=b.options.customstyle||[],d=b.options.labelMap.customstyle||
b.getLang("labelMap.customstyle")||"";if(c.length){for(var e=b.getLang("customstyle"),f=0,g=[],h;h=c[f++];)(function(a){var c={};c.label=a.label?a.label:e[a.name];c.style=a.style;c.className=a.className;c.tag=a.tag;g.push({label:c.label,value:c,theme:b.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+c.tag+" "+(c.className?' class="'+c.className+'"':"")+(c.style?' style="'+c.style+'"':"")+">"+c.label+"</"+c.tag+"></div>"}})})(h);var l=new a.Combox({editor:b,items:g,
title:d,initValue:d,className:"edui-for-customstyle",onselect:function(a,c){b.execCommand("customstyle",this.items[c].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(a){for(var b=0,c;c=this.items[b++];)if(c.label==a)return b-1;return-1}});a.buttons.customstyle=l;b.addListener("selectionchange",function(a,c,d){d||(-1==b.queryCommandState("customstyle")?l.setDisabled(!0):(l.setDisabled(!1),a=b.queryCommandValue("customstyle"),-1!=l.indexByValue(a)?l.setValue(a):l.setValue(l.initValue)))});
return l}};a.inserttable=function(b,c,d){d=b.options.labelMap.inserttable||b.getLang("labelMap.inserttable")||"";var e=new a.TableButton({editor:b,title:d,className:"edui-for-inserttable",onpicktable:function(a,c,d){b.execCommand("InsertTable",{numRows:d,numCols:c,border:1})},onbuttonclick:function(){this.showPopup()}});a.buttons.inserttable=e;b.addListener("selectionchange",function(){e.setDisabled(-1==b.queryCommandState("inserttable"))});return e};a.lineheight=function(b){var c=b.options.lineheight||
[];if(c.length){for(var d=0,e,f=[];e=c[d++];)f.push({label:e,value:e,theme:b.options.theme,onclick:function(){b.execCommand("lineheight",this.value)}});var g=new a.MenuButton({editor:b,className:"edui-for-lineheight",title:b.options.labelMap.lineheight||b.getLang("labelMap.lineheight")||"",items:f,onbuttonclick:function(){var a=b.queryCommandValue("LineHeight")||this.value;b.execCommand("LineHeight",a)}});a.buttons.lineheight=g;b.addListener("selectionchange",function(){var a=b.queryCommandState("LineHeight");
if(-1==a)g.setDisabled(!0);else{g.setDisabled(!1);var c=b.queryCommandValue("LineHeight");c&&g.setValue((c+"").replace(/cm/,""));g.setChecked(a)}});return g}};var c=["top","bottom"];for(f=0;k=c[f++];)(function(b){a["rowspacing"+b]=function(c){var d=c.options["rowspacing"+b]||[];if(!d.length)return null;for(var e=0,f,g=[];f=d[e++];)g.push({label:f,value:f,theme:c.options.theme,onclick:function(){c.execCommand("rowspacing",this.value,b)}});var h=new a.MenuButton({editor:c,className:"edui-for-rowspacing"+
b,title:c.options.labelMap["rowspacing"+b]||c.getLang("labelMap.rowspacing"+b)||"",items:g,onbuttonclick:function(){var a=c.queryCommandValue("rowspacing",b)||this.value;c.execCommand("rowspacing",a,b)}});a.buttons[b]=h;c.addListener("selectionchange",function(){var a=c.queryCommandState("rowspacing",b);if(-1==a)h.setDisabled(!0);else{h.setDisabled(!1);var d=c.queryCommandValue("rowspacing",b);d&&h.setValue((d+"").replace(/%/,""));h.setChecked(a)}});return h}})(k);c=["insertorderedlist","insertunorderedlist"];
for(f=0;k=c[f++];)(function(b){a[b]=function(c){var d=c.options[b],e=function(){c.execCommand(b,this.value)},f=[],g;for(g in d)f.push({label:d[g]||c.getLang()[b][g]||"",value:g,theme:c.options.theme,onclick:e});var h=new a.MenuButton({editor:c,className:"edui-for-"+b,title:c.getLang("labelMap."+b)||"",items:f,onbuttonclick:function(){var a=c.queryCommandValue(b)||this.value;c.execCommand(b,a)}});a.buttons[b]=h;c.addListener("selectionchange",function(){var a=c.queryCommandState(b);if(-1==a)h.setDisabled(!0);
else{h.setDisabled(!1);var d=c.queryCommandValue(b);h.setValue(d);h.setChecked(a)}});return h}})(k);a.fullscreen=function(b,c){c=b.options.labelMap.fullscreen||b.getLang("labelMap.fullscreen")||"";var d=new a.Button({className:"edui-for-fullscreen",title:c,theme:b.options.theme,onclick:function(){b.ui&&b.ui.setFullScreen(!b.ui.isFullScreen());this.setChecked(b.ui.isFullScreen())}});a.buttons.fullscreen=d;b.addListener("selectionchange",function(){var a=b.queryCommandState("fullscreen");d.setDisabled(-1==
a);d.setChecked(b.ui.isFullScreen())});return d};a.autotypeset=function(b){var c=new a.AutoTypeSetButton({editor:b,title:b.options.labelMap.autotypeset||b.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){b.execCommand("autotypeset")}});a.buttons.autotypeset=c;b.addListener("selectionchange",function(){c.setDisabled(-1==b.queryCommandState("autotypeset"))});return c};a.simpleupload=function(b){var c=new a.Button({className:"edui-for-simpleupload",title:b.options.labelMap.simpleupload||
b.getLang("labelMap.simpleupload")||"",onclick:function(){},theme:b.options.theme,showText:!1});a.buttons.simpleupload=c;b.addListener("ready",function(){var a=c.getDom("body").children[0];b.fireEvent("simpleuploadbtnready",a)});b.addListener("selectionchange",function(a,d,e){a=b.queryCommandState("simpleupload");-1==a?(c.setDisabled(!0),c.setChecked(!1)):e||(c.setDisabled(!1),c.setChecked(a))});return c}})();(function(){function e(a){this.initOptions(a);this.initEditorUI()}var a=r.editor.utils,d=
r.editor.ui.uiUtils,b=r.editor.ui.UIBase,f=r.editor.dom.domUtils,k=[];e.prototype={uiName:"editor",initEditorUI:function(){function a(a,b){a.setOpt({wordCount:!0,maximumWords:1E4,wordCountMsg:a.options.wordCountMsg||a.getLang("wordCountMsg"),wordOverFlowMsg:a.options.wordOverFlowMsg||a.getLang("wordOverFlowMsg")});var c=a.options,d=c.maximumWords,e=c.wordCountMsg,f=c.wordOverFlowMsg,g=b.getDom("wordcount");c.wordCount&&(c=a.getContentLength(!0),c>d?(g.innerHTML=f,a.fireEvent("wordcountoverflow")):
g.innerHTML=e.replace("{#leave}",d-c).replace("{#count}",c))}this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var b=this.editor,d=this;b.addListener("ready",function(){b.getDialog=function(a){return b.ui._dialogs[a+"Dialog"]};f.on(b.window,"scroll",function(a){r.editor.ui.Popup.postHide(a)});b.ui._actualFrameWidth=b.options.initialFrameWidth;UE.browser.ie&&6===UE.browser.version&&b.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0);b.options.elementPathEnabled&&
(b.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+b.getLang("elementPathTip")+":</div>");b.options.wordCount&&(f.on(b.document,"click",function(){a(b,d);f.un(b.document,"click",arguments.callee)}),b.ui.getDom("wordcount").innerHTML=b.getLang("wordCountTip"));b.ui._scale();b.options.scaleEnabled?(b.autoHeightEnabled&&b.disableAutoHeight(),d.enableScale()):d.disableScale();b.options.elementPathEnabled||b.options.wordCount||b.options.scaleEnabled||(b.ui.getDom("elementpath").style.display=
"none",b.ui.getDom("wordcount").style.display="none",b.ui.getDom("scale").style.display="none");b.selection.isFocus()&&b.fireEvent("selectionchange",!1,!0)});b.addListener("mousedown",function(a,b){r.editor.ui.Popup.postHide(b,b.target||b.srcElement);r.editor.ui.ShortCutMenu.postHide(b)});b.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(b);b.getDialog("edittip").open()});var e,g=!1,h;b.addListener("afterpaste",function(){b.queryCommandState("pasteplain")||(r.editor.ui.PastePicker&&
(e=new r.editor.ui.Popup({content:new r.editor.ui.PastePicker({editor:b}),editor:b,className:"edui-wordpastepop"}),e.render()),g=!0)});b.addListener("afterinserthtml",function(){clearTimeout(h);h=setTimeout(function(){if(e&&(g||b.ui._isTransfer)){if(e.isHidden()){var a=f.createElement(b.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});b.selection.getRange().insertNode(a);var c=G(a,"firstChild","previousSibling");c&&e.showAnchor(3==c.nodeType?c.parentNode:c);f.remove(a)}else e.show();
delete b.ui._isTransfer;g=!1}},200)});b.addListener("contextmenu",function(a,b){r.editor.ui.Popup.postHide(b)});b.addListener("keydown",function(a,b){e&&e.dispose(b);var c=b.keyCode||b.which;if(b.altKey&&90==c)UE.ui.buttons.fullscreen.onclick()});b.addListener("wordcount",function(b){a(this,d)});b.addListener("selectionchange",function(){if(b.options.elementPathEnabled)d[(-1==b.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"]();if(b.options.scaleEnabled)d[(-1==b.queryCommandState("scale")?
"dis":"en")+"ableScale"]()});var k=new r.editor.ui.Popup({editor:b,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();var a=b.queryCommandValue("link"),c;a&&(c=a.getAttribute("_href")||a.getAttribute("href",2));b.execCommand("link",c)},_onImgEditButtonClick:function(a){this.hide();b.ui._dialogs[a]&&b.ui._dialogs[a].open()},_onImgSetFloat:function(a){this.hide();b.execCommand("imagefloat",a)},_setIframeAlign:function(a){var b=k.anchorEl,c=b.cloneNode(!0);switch(a){case -2:c.setAttribute("align",
"");break;case -1:c.setAttribute("align","left");break;case 1:c.setAttribute("align","right")}b.parentNode.insertBefore(c,b);f.remove(b);k.anchorEl=c;k.showAnchor(k.anchorEl)},_updateIframe:function(){var a=b._iframe=k.anchorEl;f.hasClass(a,"ueditor_baidumap")?(b.selection.getRange().selectNode(a).select(),b.ui._dialogs.mapDialog.open()):b.ui._dialogs.insertframeDialog.open();k.hide()},_onRemoveButtonClick:function(a){b.execCommand(a);this.hide()},queryAutoHide:function(a){return a&&a.ownerDocument==
b.document&&("img"==a.tagName.toLowerCase()||f.findParentByTagName(a,"a",!0))?a!==k.anchorEl:r.editor.ui.Popup.prototype.queryAutoHide.call(this,a)}});k.render();b.options.imagePopup&&(b.addListener("mouseover",function(a,c){c=c||window.event;var d=c.target||c.srcElement;if(b.ui._dialogs.insertframeDialog&&/iframe/ig.test(d.tagName)){var e=k.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+b.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+
b.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+b.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+b.getLang("modify")+"</span></nobr>");e?(k.getDom("content").innerHTML=e,k.anchorEl=d,k.showAnchor(k.anchorEl)):k.hide()}}),b.addListener("selectionchange",function(a,c){if(c){var d="",e=b.selection.getRange().getClosedNode();var g=b.ui._dialogs;if(e&&"IMG"==e.tagName){var h="insertimageDialog";
if(-1!=e.className.indexOf("edui-faked-video")||-1!=e.className.indexOf("edui-upload-video"))h="insertvideoDialog";-1!=e.className.indexOf("edui-faked-webapp")&&(h="webappDialog");-1!=e.src.indexOf("http://api.map.baidu.com")&&(h="mapDialog");-1!=e.className.indexOf("edui-faked-music")&&(h="musicDialog");-1!=e.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(h="gmapDialog");e.getAttribute("anchorname")&&(h="anchorDialog",d=k.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+
b.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+b.getLang("delete")+"</span></nobr>"));e.getAttribute("word_img")&&(b.word_img=[e.getAttribute("word_img")],h="wordimageDialog");if(f.hasClass(e,"loadingclass")||f.hasClass(e,"loaderrorclass"))h="";if(!g[h])return;g="<nobr>"+b.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+b.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+
b.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+b.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+b.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+h+'\');" class="edui-clickable">'+b.getLang("modify")+"</span></nobr>";!d&&(d=k.formatHtml(g))}g=b.queryCommandValue("link");var l;g&&(l=g.getAttribute("_href")||g.getAttribute("href",2))&&
(h=l,30<l.length&&(h=l.substring(0,20)+"..."),d&&(d+='<div style="height:5px;"></div>'),d+=k.formatHtml("<nobr>"+b.getLang("anthorMsg")+': <a target="_blank" href="'+l+'" title="'+l+'" >'+h+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+b.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+b.getLang("clear")+"</span></nobr>"),k.showAnchor(g));d?(k.getDom("content").innerHTML=d,k.anchorEl=e||g,k.showAnchor(k.anchorEl)):
k.hide()}}))},_initToolbars:function(){for(var b,d=this.editor,e=this.toolbars||[],f=[],g=0;g<e.length;g++){var h=e[g];b=new r.editor.ui.Toolbar({theme:d.options.theme});for(var k=0;k<h.length;k++){var n=h[k],t=null;if("string"==typeof n){if(n=n.toLowerCase(),"|"==n&&(n="Separator"),"||"==n&&(n="Breakline"),r.editor.ui[n]&&(t=new r.editor.ui[n](d)),"fullscreen"==n){f&&f[0]?f[0].items.splice(0,0,t):t&&b.items.splice(0,0,t);continue}}else t=n;t&&t.id&&b.add(t)}f[g]=b}a.each(UE._customizeUI,function(a,
c){var e;if(a.id&&a.id!=d.key)return!1;if(e=a.execFn.call(d,d,c)){var f=a.index;void 0===f&&(f=b.items.length);b.add(e,f)}});this.toolbars=f},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+
this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},
showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var a=[],b=0;b<this.toolbars.length;b++)a.push(this.toolbars[b].renderHtml());return a.join("")},setFullScreen:function(a){var b,c=this.editor,d=c.container.parentNode.parentNode;if(this._fullscreen!=a){this._fullscreen=a;this.editor.fireEvent("beforefullscreenchange",a);r.editor.browser.gecko&&(b=c.selection.getRange().createBookmark());if(a){for(;"BODY"!=d.tagName;){var e=r.editor.dom.domUtils.getComputedStyle(d,
"position");k.push(e);d.style.position="static";d=d.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=c.iframe.parentNode.offsetWidth;this._bakAutoHeight&&(c.autoHeightEnabled=!1,this.editor.disableAutoHeight());document.documentElement.style.overflow="hidden";
window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;c.iframe.parentNode.style.width="";this._updateFullScreen()}else{for(;"BODY"!=d.tagName;)d.style.position=k.shift(),d=d.parentNode;this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;this._bakAutoHeight&&(c.autoHeightEnabled=!0,this.editor.enableAutoHeight());document.documentElement.style.overflow=this._bakHtmlOverflow;
document.body.style.overflow=this._bakBodyOverflow;c.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(t.gecko&&"true"===c.body.contentEditable){var f=document.createElement("input");document.body.appendChild(f);c.body.contentEditable=!1;setTimeout(function(){f.focus();setTimeout(function(){c.body.contentEditable=!0;c.fireEvent("fullscreenchanged",a);c.selection.getRange().moveToBookmark(b).select(!0);r.editor.dom.domUtils.remove(f);a&&window.scroll(0,
0)},0)},0)}"true"===c.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",a),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var a=d.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+a.width+"px;height:"+a.height+"px;z-index:"+(1*this.getDom().style.zIndex+100);d.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(a.height-this.getDom("toolbarbox").offsetHeight-
this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0);if(t.gecko)try{window.onresize()}catch(l){}}},_updateElementPath:function(){var a=this.getDom("elementpath"),b;if(this.elementPathEnabled&&(b=this.editor.queryCommandValue("elementpath"))){for(var d=[],e=0,f;f=b[e];e++)d[e]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+e+'&quot;);">'+f+"</span>");a.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+
this.editor.getLang("elementPathTip")+": "+d.join(" &gt; ")+"</div>"}else a.style.display="none"},disableElementPath:function(){var a=this.getDom("elementpath");a.innerHTML="";a.style.display="none";this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="";this.elementPathEnabled=!0;this._updateElementPath()},_scale:function(){function a(){I=f.getXY(k);O||(O=h.options.minFrameHeight+r.offsetHeight+z.offsetHeight);E.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+
k.offsetWidth+"px;height:"+k.offsetHeight+"px;z-index:"+(h.options.zIndex+1);f.on(g,"mousemove",b);f.on(n,"mouseup",d);f.on(g,"mouseup",d)}function b(a){e();a=a||window.event;S=a.pageX||g.documentElement.scrollLeft+a.clientX;J=a.pageY||g.documentElement.scrollTop+a.clientY;N=S-I.x;X=J-I.y;N>=R&&(G=!0,E.style.width=N+"px");X>=O&&(G=!0,E.style.height=X+"px")}function d(){G&&(G=!1,h.ui._actualFrameWidth=E.offsetWidth-2,k.style.width=h.ui._actualFrameWidth+"px",h.setHeight(E.offsetHeight-z.offsetHeight-
r.offsetHeight-2,!0));E&&(E.style.display="none");e();f.un(g,"mousemove",b);f.un(n,"mouseup",d);f.un(g,"mouseup",d)}function e(){t.ie?g.selection.clear():window.getSelection().removeAllRanges()}var g=document,h=this.editor,k=h.container,n=h.document,r=this.getDom("toolbarbox"),z=this.getDom("bottombar"),A=this.getDom("scale"),E=this.getDom("scalelayer"),G=!1,I=null,O=0,R=h.options.minFrameWidth,S=0,J=0,N=0,X=0,C=this;this.editor.addListener("fullscreenchanged",function(a,b){if(b)C.disableScale();
else if(C.editor.options.scaleEnabled){C.enableScale();var c=C.editor.document.createElement("span");C.editor.body.appendChild(c);C.editor.body.style.height=Math.max(f.getXY(c).y,C.editor.iframe.offsetHeight-20)+"px";f.remove(c)}});this.enableScale=function(){1!=h.queryCommandState("source")&&(A.style.display="",this.scaleEnabled=!0,f.on(A,"mousedown",a))};this.disableScale=function(){A.style.display="none";this.scaleEnabled=!1;f.un(A,"mousedown",a)}},isFullScreen:function(){return this._fullscreen},
postRender:function(){b.prototype.postRender.call(this);for(var a=0;a<this.toolbars.length;a++)this.toolbars[a].postRender();var d=this,e,f=r.editor.dom.domUtils,g=function(){clearTimeout(e);e=setTimeout(function(){d._updateFullScreen()})};f.on(window,"resize",g);d.addListener("destroy",function(){f.un(window,"resize",g);clearTimeout(e)})},showToolbarMsg:function(a,b){this.getDom("toolbarmsg_label").innerHTML=a;this.getDom("toolbarmsg").style.display="";b||(this.getDom("upload_dialog").style.display=
"none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(a){return a?a.replace("~/",window.UEDITOR_IFRAME_URL||this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var a=this.getDom();a.style.zoom="1"==a.style.zoom?"100%":"1"}};a.inherits(e,r.editor.ui.UIBase);var h={};UE.ui.Editor=function(b){var c=new UE.Editor(b);c.options.editor=c;a.loadFile(document,{href:c.options.themePath+c.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",
rel:"stylesheet"});var d=c.render;c.render=function(b){b.constructor===String&&(c.key=b,h[b]=c);a.domReady(function(){function a(){c.setOpt({labelMap:c.options.labelMap||c.getLang("labelMap")});new e(c.options);if(b&&(b.constructor===String&&(b=document.getElementById(b)),b&&b.getAttribute("name")&&(c.options.textarea=b.getAttribute("name")),b&&/script|textarea/ig.test(b.tagName))){var a=document.createElement("div");b.parentNode.insertBefore(a,b);var g=b.value||b.innerHTML;c.options.initialContent=
/^[\t\r\n ]*$/.test(g)?c.options.initialContent:g.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");b.className&&(a.className=b.className);b.style.cssText&&(a.style.cssText=b.style.cssText);/textarea/i.test(b.tagName)?(c.textarea=b,c.textarea.style.display="none"):b.parentNode.removeChild(b);b.id&&(a.id=b.id,f.removeAttributes(b,"id"));b=a;b.innerHTML=""}f.addClass(b,"edui-"+c.options.theme);c.ui.render(b);a=c.options;c.container=c.ui.getDom();for(var g=
f.findParents(b,!0),h=[],k=0,l;l=g[k];k++)h[k]=l.style.display,l.style.display="block";a.initialFrameWidth?a.minFrameWidth=a.initialFrameWidth:(a.minFrameWidth=a.initialFrameWidth=b.offsetWidth,k=b.style.width,/%$/.test(k)&&(a.initialFrameWidth=k));a.initialFrameHeight?a.minFrameHeight=a.initialFrameHeight:a.initialFrameHeight=a.minFrameHeight=b.offsetHeight;for(k=0;l=g[k];k++)l.style.display=h[k];b.style.height&&(b.style.height="");c.container.style.width=a.initialFrameWidth+(/%$/.test(a.initialFrameWidth)?
"":"px");c.container.style.zIndex=a.zIndex;d.call(c,c.ui.getDom("iframeholder"));c.fireEvent("afteruiready")}c.langIsReady?a():c.addListener("langReady",a)})};return c};UE.getEditor=function(a,b){var c=h[a];c||(c=h[a]=new UE.ui.Editor(b),c.render(a));return c};UE.delEditor=function(a){var b;if(b=h[a])b.key&&b.destroy(),delete h[a]};UE.registerUI=function(b,d,e,f){a.each(b.split(/\s+/),function(a){UE._customizeUI[a]={id:f,execFn:d,index:e}})}})();UE.registerUI("message",function(e){function a(){var a=
g.ui.getDom("toolbarbox");a&&(b.style.top=a.offsetHeight+3+"px");b.style.zIndex=Math.max(g.options.zIndex,g.iframe.style.zIndex)+1}var d=r.editor.ui.Message,b,f=[],g=e;g.addListener("ready",function(){b=document.getElementById(g.ui.id+"_message_holder");a();setTimeout(function(){a()},500)});g.addListener("showmessage",function(e,c){c=n.isString(c)?{content:c}:c;var h=new d({timeout:c.timeout,type:c.type,content:c.content,keepshow:c.keepshow,editor:g}),k=c.id||"msg_"+(+new Date).toString(36);h.render(b);
f[k]=h;h.reset(c);a();return k});g.addListener("updatemessage",function(a,c,d){d=n.isString(d)?{content:d}:d;a=f[c];a.render(b);a&&a.reset(d)});g.addListener("hidemessage",function(a,b){var c=f[b];c&&c.hide()})})})();
